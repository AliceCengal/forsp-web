(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Pp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Dp={exports:{}},_l={},Np={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Is=Symbol.for("react.element"),pv=Symbol.for("react.portal"),mv=Symbol.for("react.fragment"),gv=Symbol.for("react.strict_mode"),yv=Symbol.for("react.profiler"),vv=Symbol.for("react.provider"),wv=Symbol.for("react.context"),xv=Symbol.for("react.forward_ref"),kv=Symbol.for("react.suspense"),Sv=Symbol.for("react.memo"),Cv=Symbol.for("react.lazy"),Xh=Symbol.iterator;function bv(t){return t===null||typeof t!="object"?null:(t=Xh&&t[Xh]||t["@@iterator"],typeof t=="function"?t:null)}var Lp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rp=Object.assign,Ip={};function yr(t,e,n){this.props=t,this.context=e,this.refs=Ip,this.updater=n||Lp}yr.prototype.isReactComponent={};yr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _p(){}_p.prototype=yr.prototype;function Bc(t,e,n){this.props=t,this.context=e,this.refs=Ip,this.updater=n||Lp}var Fc=Bc.prototype=new _p;Fc.constructor=Bc;Rp(Fc,yr.prototype);Fc.isPureReactComponent=!0;var Jh=Array.isArray,Bp=Object.prototype.hasOwnProperty,zc={current:null},Fp={key:!0,ref:!0,__self:!0,__source:!0};function zp(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Bp.call(e,i)&&!Fp.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:Is,type:t,key:s,ref:o,props:r,_owner:zc.current}}function Ev(t,e){return{$$typeof:Is,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Is}function Mv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zh=/\/+/g;function la(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Mv(""+t.key):e.toString(36)}function Po(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Is:case pv:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+la(o,0):i,Jh(r)?(n="",t!=null&&(n=t.replace(Zh,"$&/")+"/"),Po(r,e,n,"",function(u){return u})):r!=null&&(jc(r)&&(r=Ev(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Zh,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Jh(t))for(var l=0;l<t.length;l++){s=t[l];var a=i+la(s,l);o+=Po(s,e,n,a,r)}else if(a=bv(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=i+la(s,l++),o+=Po(s,e,n,a,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qs(t,e,n){if(t==null)return t;var i=[],r=0;return Po(t,i,"","",function(s){return e.call(n,s,r++)}),i}function Av(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qe={current:null},Do={transition:null},Tv={ReactCurrentDispatcher:qe,ReactCurrentBatchConfig:Do,ReactCurrentOwner:zc};function jp(){throw Error("act(...) is not supported in production builds of React.")}V.Children={map:qs,forEach:function(t,e,n){qs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qs(t,function(){e++}),e},toArray:function(t){return qs(t,function(e){return e})||[]},only:function(t){if(!jc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};V.Component=yr;V.Fragment=mv;V.Profiler=yv;V.PureComponent=Bc;V.StrictMode=gv;V.Suspense=kv;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tv;V.act=jp;V.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Rp({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=zc.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Bp.call(e,a)&&!Fp.hasOwnProperty(a)&&(i[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:Is,type:t.type,key:r,ref:s,props:i,_owner:o}};V.createContext=function(t){return t={$$typeof:wv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vv,_context:t},t.Consumer=t};V.createElement=zp;V.createFactory=function(t){var e=zp.bind(null,t);return e.type=t,e};V.createRef=function(){return{current:null}};V.forwardRef=function(t){return{$$typeof:xv,render:t}};V.isValidElement=jc;V.lazy=function(t){return{$$typeof:Cv,_payload:{_status:-1,_result:t},_init:Av}};V.memo=function(t,e){return{$$typeof:Sv,type:t,compare:e===void 0?null:e}};V.startTransition=function(t){var e=Do.transition;Do.transition={};try{t()}finally{Do.transition=e}};V.unstable_act=jp;V.useCallback=function(t,e){return qe.current.useCallback(t,e)};V.useContext=function(t){return qe.current.useContext(t)};V.useDebugValue=function(){};V.useDeferredValue=function(t){return qe.current.useDeferredValue(t)};V.useEffect=function(t,e){return qe.current.useEffect(t,e)};V.useId=function(){return qe.current.useId()};V.useImperativeHandle=function(t,e,n){return qe.current.useImperativeHandle(t,e,n)};V.useInsertionEffect=function(t,e){return qe.current.useInsertionEffect(t,e)};V.useLayoutEffect=function(t,e){return qe.current.useLayoutEffect(t,e)};V.useMemo=function(t,e){return qe.current.useMemo(t,e)};V.useReducer=function(t,e,n){return qe.current.useReducer(t,e,n)};V.useRef=function(t){return qe.current.useRef(t)};V.useState=function(t){return qe.current.useState(t)};V.useSyncExternalStore=function(t,e,n){return qe.current.useSyncExternalStore(t,e,n)};V.useTransition=function(){return qe.current.useTransition()};V.version="18.3.1";Np.exports=V;var G=Np.exports;const Hc=Pp(G);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov=G,Pv=Symbol.for("react.element"),Dv=Symbol.for("react.fragment"),Nv=Object.prototype.hasOwnProperty,Lv=Ov.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rv={key:!0,ref:!0,__self:!0,__source:!0};function Hp(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)Nv.call(e,i)&&!Rv.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Pv,type:t,key:s,ref:o,props:r,_owner:Lv.current}}_l.Fragment=Dv;_l.jsx=Hp;_l.jsxs=Hp;Dp.exports=_l;var E=Dp.exports,Za={},Vp={exports:{}},ft={},Wp={exports:{}},$p={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(T,B){var R=T.length;T.push(B);e:for(;0<R;){var $=R-1>>>1,Z=T[$];if(0<r(Z,B))T[$]=B,T[R]=Z,R=$;else break e}}function n(T){return T.length===0?null:T[0]}function i(T){if(T.length===0)return null;var B=T[0],R=T.pop();if(R!==B){T[0]=R;e:for(var $=0,Z=T.length,pt=Z>>>1;$<pt;){var Ge=2*($+1)-1,wn=T[Ge],Bt=Ge+1,Ks=T[Bt];if(0>r(wn,R))Bt<Z&&0>r(Ks,wn)?(T[$]=Ks,T[Bt]=R,$=Bt):(T[$]=wn,T[Ge]=R,$=Ge);else if(Bt<Z&&0>r(Ks,R))T[$]=Ks,T[Bt]=R,$=Bt;else break e}}return B}function r(T,B){var R=T.sortIndex-B.sortIndex;return R!==0?R:T.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,h=null,f=3,d=!1,m=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(T){for(var B=n(u);B!==null;){if(B.callback===null)i(u);else if(B.startTime<=T)i(u),B.sortIndex=B.expirationTime,e(a,B);else break;B=n(u)}}function k(T){if(y=!1,v(T),!m)if(n(a)!==null)m=!0,be(S);else{var B=n(u);B!==null&&Ee(k,B.startTime-T)}}function S(T,B){m=!1,y&&(y=!1,p(M),M=-1),d=!0;var R=f;try{for(v(B),h=n(a);h!==null&&(!(h.expirationTime>B)||T&&!F());){var $=h.callback;if(typeof $=="function"){h.callback=null,f=h.priorityLevel;var Z=$(h.expirationTime<=B);B=t.unstable_now(),typeof Z=="function"?h.callback=Z:h===n(a)&&i(a),v(B)}else i(a);h=n(a)}if(h!==null)var pt=!0;else{var Ge=n(u);Ge!==null&&Ee(k,Ge.startTime-B),pt=!1}return pt}finally{h=null,f=R,d=!1}}var b=!1,C=null,M=-1,_=5,P=-1;function F(){return!(t.unstable_now()-P<_)}function z(){if(C!==null){var T=t.unstable_now();P=T;var B=!0;try{B=C(!0,T)}finally{B?U():(b=!1,C=null)}}else b=!1}var U;if(typeof g=="function")U=function(){g(z)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,se=W.port2;W.port1.onmessage=z,U=function(){se.postMessage(null)}}else U=function(){w(z,0)};function be(T){C=T,b||(b=!0,U())}function Ee(T,B){M=w(function(){T(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_continueExecution=function(){m||d||(m=!0,be(S))},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(T){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var R=f;f=B;try{return T()}finally{f=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(T,B){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var R=f;f=T;try{return B()}finally{f=R}},t.unstable_scheduleCallback=function(T,B,R){var $=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?$+R:$):R=$,T){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=R+Z,T={id:c++,callback:B,priorityLevel:T,startTime:R,expirationTime:Z,sortIndex:-1},R>$?(T.sortIndex=R,e(u,T),n(a)===null&&T===n(u)&&(y?(p(M),M=-1):y=!0,Ee(k,R-$))):(T.sortIndex=Z,e(a,T),m||d||(m=!0,be(S))),T},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(T){var B=f;return function(){var R=f;f=B;try{return T.apply(this,arguments)}finally{f=R}}}})($p);Wp.exports=$p;var Iv=Wp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _v=G,ht=Iv;function A(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Up=new Set,ls={};function Ai(t,e){tr(t,e),tr(t+"Capture",e)}function tr(t,e){for(ls[t]=e,t=0;t<e.length;t++)Up.add(e[t])}var cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eu=Object.prototype.hasOwnProperty,Bv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ef={},tf={};function Fv(t){return eu.call(tf,t)?!0:eu.call(ef,t)?!1:Bv.test(t)?tf[t]=!0:(ef[t]=!0,!1)}function zv(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function jv(t,e,n,i){if(e===null||typeof e>"u"||zv(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ye(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Re[t]=new Ye(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Re[e]=new Ye(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Re[t]=new Ye(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Re[t]=new Ye(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Re[t]=new Ye(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Re[t]=new Ye(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Re[t]=new Ye(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Re[t]=new Ye(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Re[t]=new Ye(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vc=/[\-:]([a-z])/g;function Wc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vc,Wc);Re[e]=new Ye(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vc,Wc);Re[e]=new Ye(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vc,Wc);Re[e]=new Ye(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Re[t]=new Ye(t,1,!1,t.toLowerCase(),null,!1,!1)});Re.xlinkHref=new Ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Re[t]=new Ye(t,1,!1,t.toLowerCase(),null,!0,!0)});function $c(t,e,n,i){var r=Re.hasOwnProperty(e)?Re[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jv(e,n,r,i)&&(n=null),i||r===null?Fv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var vn=_v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ys=Symbol.for("react.element"),Di=Symbol.for("react.portal"),Ni=Symbol.for("react.fragment"),Uc=Symbol.for("react.strict_mode"),tu=Symbol.for("react.profiler"),Kp=Symbol.for("react.provider"),qp=Symbol.for("react.context"),Kc=Symbol.for("react.forward_ref"),nu=Symbol.for("react.suspense"),iu=Symbol.for("react.suspense_list"),qc=Symbol.for("react.memo"),kn=Symbol.for("react.lazy"),Yp=Symbol.for("react.offscreen"),nf=Symbol.iterator;function Cr(t){return t===null||typeof t!="object"?null:(t=nf&&t[nf]||t["@@iterator"],typeof t=="function"?t:null)}var me=Object.assign,aa;function _r(t){if(aa===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);aa=e&&e[1]||""}return`
`+aa+t}var ua=!1;function ca(t,e){if(!t||ua)return"";ua=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,l=s.length-1;1<=o&&0<=l&&r[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==s[l]){var a=`
`+r[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{ua=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_r(t):""}function Hv(t){switch(t.tag){case 5:return _r(t.type);case 16:return _r("Lazy");case 13:return _r("Suspense");case 19:return _r("SuspenseList");case 0:case 2:case 15:return t=ca(t.type,!1),t;case 11:return t=ca(t.type.render,!1),t;case 1:return t=ca(t.type,!0),t;default:return""}}function ru(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ni:return"Fragment";case Di:return"Portal";case tu:return"Profiler";case Uc:return"StrictMode";case nu:return"Suspense";case iu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case qp:return(t.displayName||"Context")+".Consumer";case Kp:return(t._context.displayName||"Context")+".Provider";case Kc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qc:return e=t.displayName||null,e!==null?e:ru(t.type)||"Memo";case kn:e=t._payload,t=t._init;try{return ru(t(e))}catch{}}return null}function Vv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ru(e);case 8:return e===Uc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $n(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Wv(t){var e=Gp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gs(t){t._valueTracker||(t._valueTracker=Wv(t))}function Qp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Gp(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Jo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function su(t,e){var n=e.checked;return me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rf(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=$n(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Xp(t,e){e=e.checked,e!=null&&$c(t,"checked",e,!1)}function ou(t,e){Xp(t,e);var n=$n(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lu(t,e.type,n):e.hasOwnProperty("defaultValue")&&lu(t,e.type,$n(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lu(t,e,n){(e!=="number"||Jo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Br=Array.isArray;function $i(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+$n(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function au(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(A(91));return me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function of(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(A(92));if(Br(n)){if(1<n.length)throw Error(A(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$n(n)}}function Jp(t,e){var n=$n(e.value),i=$n(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function lf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Zp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qs,em=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qs=Qs||document.createElement("div"),Qs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function as(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$v=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(t){$v.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Kr[e]=Kr[t]})});function tm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Kr.hasOwnProperty(t)&&Kr[t]?(""+e).trim():e+"px"}function nm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=tm(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Uv=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cu(t,e){if(e){if(Uv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(A(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(A(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(A(61))}if(e.style!=null&&typeof e.style!="object")throw Error(A(62))}}function hu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fu=null;function Yc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var du=null,Ui=null,Ki=null;function af(t){if(t=Fs(t)){if(typeof du!="function")throw Error(A(280));var e=t.stateNode;e&&(e=Hl(e),du(t.stateNode,t.type,e))}}function im(t){Ui?Ki?Ki.push(t):Ki=[t]:Ui=t}function rm(){if(Ui){var t=Ui,e=Ki;if(Ki=Ui=null,af(t),e)for(t=0;t<e.length;t++)af(e[t])}}function sm(t,e){return t(e)}function om(){}var ha=!1;function lm(t,e,n){if(ha)return t(e,n);ha=!0;try{return sm(t,e,n)}finally{ha=!1,(Ui!==null||Ki!==null)&&(om(),rm())}}function us(t,e){var n=t.stateNode;if(n===null)return null;var i=Hl(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(A(231,e,typeof n));return n}var pu=!1;if(cn)try{var br={};Object.defineProperty(br,"passive",{get:function(){pu=!0}}),window.addEventListener("test",br,br),window.removeEventListener("test",br,br)}catch{pu=!1}function Kv(t,e,n,i,r,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var qr=!1,Zo=null,el=!1,mu=null,qv={onError:function(t){qr=!0,Zo=t}};function Yv(t,e,n,i,r,s,o,l,a){qr=!1,Zo=null,Kv.apply(qv,arguments)}function Gv(t,e,n,i,r,s,o,l,a){if(Yv.apply(this,arguments),qr){if(qr){var u=Zo;qr=!1,Zo=null}else throw Error(A(198));el||(el=!0,mu=u)}}function Ti(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function am(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function uf(t){if(Ti(t)!==t)throw Error(A(188))}function Qv(t){var e=t.alternate;if(!e){if(e=Ti(t),e===null)throw Error(A(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return uf(r),t;if(s===i)return uf(r),e;s=s.sibling}throw Error(A(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=s;break}if(l===i){o=!0,i=r,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,i=r;break}if(l===i){o=!0,i=s,n=r;break}l=l.sibling}if(!o)throw Error(A(189))}}if(n.alternate!==i)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?t:e}function um(t){return t=Qv(t),t!==null?cm(t):null}function cm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=cm(t);if(e!==null)return e;t=t.sibling}return null}var hm=ht.unstable_scheduleCallback,cf=ht.unstable_cancelCallback,Xv=ht.unstable_shouldYield,Jv=ht.unstable_requestPaint,ve=ht.unstable_now,Zv=ht.unstable_getCurrentPriorityLevel,Gc=ht.unstable_ImmediatePriority,fm=ht.unstable_UserBlockingPriority,tl=ht.unstable_NormalPriority,e1=ht.unstable_LowPriority,dm=ht.unstable_IdlePriority,Bl=null,Qt=null;function t1(t){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Bl,t,void 0,(t.current.flags&128)===128)}catch{}}var Dt=Math.clz32?Math.clz32:r1,n1=Math.log,i1=Math.LN2;function r1(t){return t>>>=0,t===0?32:31-(n1(t)/i1|0)|0}var Xs=64,Js=4194304;function Fr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nl(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~r;l!==0?i=Fr(l):(s&=o,s!==0&&(i=Fr(s)))}else o=n&~r,o!==0?i=Fr(o):s!==0&&(i=Fr(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Dt(e),r=1<<n,i|=t[n],e&=~r;return i}function s1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function o1(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Dt(s),l=1<<o,a=r[o];a===-1?(!(l&n)||l&i)&&(r[o]=s1(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function gu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function pm(){var t=Xs;return Xs<<=1,!(Xs&4194240)&&(Xs=64),t}function fa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _s(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Dt(e),t[e]=n}function l1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Dt(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Qc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Dt(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var ee=0;function mm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gm,Xc,ym,vm,wm,yu=!1,Zs=[],In=null,_n=null,Bn=null,cs=new Map,hs=new Map,En=[],a1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hf(t,e){switch(t){case"focusin":case"focusout":In=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":cs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hs.delete(e.pointerId)}}function Er(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Fs(e),e!==null&&Xc(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function u1(t,e,n,i,r){switch(e){case"focusin":return In=Er(In,t,e,n,i,r),!0;case"dragenter":return _n=Er(_n,t,e,n,i,r),!0;case"mouseover":return Bn=Er(Bn,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return cs.set(s,Er(cs.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,hs.set(s,Er(hs.get(s)||null,t,e,n,i,r)),!0}return!1}function xm(t){var e=ai(t.target);if(e!==null){var n=Ti(e);if(n!==null){if(e=n.tag,e===13){if(e=am(n),e!==null){t.blockedOn=e,wm(t.priority,function(){ym(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function No(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);fu=i,n.target.dispatchEvent(i),fu=null}else return e=Fs(n),e!==null&&Xc(e),t.blockedOn=n,!1;e.shift()}return!0}function ff(t,e,n){No(t)&&n.delete(e)}function c1(){yu=!1,In!==null&&No(In)&&(In=null),_n!==null&&No(_n)&&(_n=null),Bn!==null&&No(Bn)&&(Bn=null),cs.forEach(ff),hs.forEach(ff)}function Mr(t,e){t.blockedOn===e&&(t.blockedOn=null,yu||(yu=!0,ht.unstable_scheduleCallback(ht.unstable_NormalPriority,c1)))}function fs(t){function e(r){return Mr(r,t)}if(0<Zs.length){Mr(Zs[0],t);for(var n=1;n<Zs.length;n++){var i=Zs[n];i.blockedOn===t&&(i.blockedOn=null)}}for(In!==null&&Mr(In,t),_n!==null&&Mr(_n,t),Bn!==null&&Mr(Bn,t),cs.forEach(e),hs.forEach(e),n=0;n<En.length;n++)i=En[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<En.length&&(n=En[0],n.blockedOn===null);)xm(n),n.blockedOn===null&&En.shift()}var qi=vn.ReactCurrentBatchConfig,il=!0;function h1(t,e,n,i){var r=ee,s=qi.transition;qi.transition=null;try{ee=1,Jc(t,e,n,i)}finally{ee=r,qi.transition=s}}function f1(t,e,n,i){var r=ee,s=qi.transition;qi.transition=null;try{ee=4,Jc(t,e,n,i)}finally{ee=r,qi.transition=s}}function Jc(t,e,n,i){if(il){var r=vu(t,e,n,i);if(r===null)Sa(t,e,i,rl,n),hf(t,i);else if(u1(r,t,e,n,i))i.stopPropagation();else if(hf(t,i),e&4&&-1<a1.indexOf(t)){for(;r!==null;){var s=Fs(r);if(s!==null&&gm(s),s=vu(t,e,n,i),s===null&&Sa(t,e,i,rl,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Sa(t,e,i,null,n)}}var rl=null;function vu(t,e,n,i){if(rl=null,t=Yc(i),t=ai(t),t!==null)if(e=Ti(t),e===null)t=null;else if(n=e.tag,n===13){if(t=am(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rl=t,null}function km(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zv()){case Gc:return 1;case fm:return 4;case tl:case e1:return 16;case dm:return 536870912;default:return 16}default:return 16}}var On=null,Zc=null,Lo=null;function Sm(){if(Lo)return Lo;var t,e=Zc,n=e.length,i,r="value"in On?On.value:On.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Lo=r.slice(t,1<i?1-i:void 0)}function Ro(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function eo(){return!0}function df(){return!1}function dt(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?eo:df,this.isPropagationStopped=df,this}return me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=eo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=eo)},persist:function(){},isPersistent:eo}),e}var vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eh=dt(vr),Bs=me({},vr,{view:0,detail:0}),d1=dt(Bs),da,pa,Ar,Fl=me({},Bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:th,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ar&&(Ar&&t.type==="mousemove"?(da=t.screenX-Ar.screenX,pa=t.screenY-Ar.screenY):pa=da=0,Ar=t),da)},movementY:function(t){return"movementY"in t?t.movementY:pa}}),pf=dt(Fl),p1=me({},Fl,{dataTransfer:0}),m1=dt(p1),g1=me({},Bs,{relatedTarget:0}),ma=dt(g1),y1=me({},vr,{animationName:0,elapsedTime:0,pseudoElement:0}),v1=dt(y1),w1=me({},vr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),x1=dt(w1),k1=me({},vr,{data:0}),mf=dt(k1),S1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},C1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=b1[t])?!!e[t]:!1}function th(){return E1}var M1=me({},Bs,{key:function(t){if(t.key){var e=S1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ro(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?C1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:th,charCode:function(t){return t.type==="keypress"?Ro(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ro(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),A1=dt(M1),T1=me({},Fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gf=dt(T1),O1=me({},Bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:th}),P1=dt(O1),D1=me({},vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),N1=dt(D1),L1=me({},Fl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),R1=dt(L1),I1=[9,13,27,32],nh=cn&&"CompositionEvent"in window,Yr=null;cn&&"documentMode"in document&&(Yr=document.documentMode);var _1=cn&&"TextEvent"in window&&!Yr,Cm=cn&&(!nh||Yr&&8<Yr&&11>=Yr),yf=" ",vf=!1;function bm(t,e){switch(t){case"keyup":return I1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Em(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Li=!1;function B1(t,e){switch(t){case"compositionend":return Em(e);case"keypress":return e.which!==32?null:(vf=!0,yf);case"textInput":return t=e.data,t===yf&&vf?null:t;default:return null}}function F1(t,e){if(Li)return t==="compositionend"||!nh&&bm(t,e)?(t=Sm(),Lo=Zc=On=null,Li=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Cm&&e.locale!=="ko"?null:e.data;default:return null}}var z1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!z1[t.type]:e==="textarea"}function Mm(t,e,n,i){im(i),e=sl(e,"onChange"),0<e.length&&(n=new eh("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Gr=null,ds=null;function j1(t){Bm(t,0)}function zl(t){var e=_i(t);if(Qp(e))return t}function H1(t,e){if(t==="change")return e}var Am=!1;if(cn){var ga;if(cn){var ya="oninput"in document;if(!ya){var xf=document.createElement("div");xf.setAttribute("oninput","return;"),ya=typeof xf.oninput=="function"}ga=ya}else ga=!1;Am=ga&&(!document.documentMode||9<document.documentMode)}function kf(){Gr&&(Gr.detachEvent("onpropertychange",Tm),ds=Gr=null)}function Tm(t){if(t.propertyName==="value"&&zl(ds)){var e=[];Mm(e,ds,t,Yc(t)),lm(j1,e)}}function V1(t,e,n){t==="focusin"?(kf(),Gr=e,ds=n,Gr.attachEvent("onpropertychange",Tm)):t==="focusout"&&kf()}function W1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zl(ds)}function $1(t,e){if(t==="click")return zl(e)}function U1(t,e){if(t==="input"||t==="change")return zl(e)}function K1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Lt=typeof Object.is=="function"?Object.is:K1;function ps(t,e){if(Lt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!eu.call(e,r)||!Lt(t[r],e[r]))return!1}return!0}function Sf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cf(t,e){var n=Sf(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sf(n)}}function Om(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Om(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Pm(){for(var t=window,e=Jo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Jo(t.document)}return e}function ih(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function q1(t){var e=Pm(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Om(n.ownerDocument.documentElement,n)){if(i!==null&&ih(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=Cf(n,s);var o=Cf(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Y1=cn&&"documentMode"in document&&11>=document.documentMode,Ri=null,wu=null,Qr=null,xu=!1;function bf(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xu||Ri==null||Ri!==Jo(i)||(i=Ri,"selectionStart"in i&&ih(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Qr&&ps(Qr,i)||(Qr=i,i=sl(wu,"onSelect"),0<i.length&&(e=new eh("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ri)))}function to(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ii={animationend:to("Animation","AnimationEnd"),animationiteration:to("Animation","AnimationIteration"),animationstart:to("Animation","AnimationStart"),transitionend:to("Transition","TransitionEnd")},va={},Dm={};cn&&(Dm=document.createElement("div").style,"AnimationEvent"in window||(delete Ii.animationend.animation,delete Ii.animationiteration.animation,delete Ii.animationstart.animation),"TransitionEvent"in window||delete Ii.transitionend.transition);function jl(t){if(va[t])return va[t];if(!Ii[t])return t;var e=Ii[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Dm)return va[t]=e[n];return t}var Nm=jl("animationend"),Lm=jl("animationiteration"),Rm=jl("animationstart"),Im=jl("transitionend"),_m=new Map,Ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ei(t,e){_m.set(t,e),Ai(e,[t])}for(var wa=0;wa<Ef.length;wa++){var xa=Ef[wa],G1=xa.toLowerCase(),Q1=xa[0].toUpperCase()+xa.slice(1);ei(G1,"on"+Q1)}ei(Nm,"onAnimationEnd");ei(Lm,"onAnimationIteration");ei(Rm,"onAnimationStart");ei("dblclick","onDoubleClick");ei("focusin","onFocus");ei("focusout","onBlur");ei(Im,"onTransitionEnd");tr("onMouseEnter",["mouseout","mouseover"]);tr("onMouseLeave",["mouseout","mouseover"]);tr("onPointerEnter",["pointerout","pointerover"]);tr("onPointerLeave",["pointerout","pointerover"]);Ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ai("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X1=new Set("cancel close invalid load scroll toggle".split(" ").concat(zr));function Mf(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Gv(i,e,void 0,t),t.currentTarget=null}function Bm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var l=i[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&r.isPropagationStopped())break e;Mf(r,l,u),s=a}else for(o=0;o<i.length;o++){if(l=i[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&r.isPropagationStopped())break e;Mf(r,l,u),s=a}}}if(el)throw t=mu,el=!1,mu=null,t}function oe(t,e){var n=e[Eu];n===void 0&&(n=e[Eu]=new Set);var i=t+"__bubble";n.has(i)||(Fm(e,t,2,!1),n.add(i))}function ka(t,e,n){var i=0;e&&(i|=4),Fm(n,t,i,e)}var no="_reactListening"+Math.random().toString(36).slice(2);function ms(t){if(!t[no]){t[no]=!0,Up.forEach(function(n){n!=="selectionchange"&&(X1.has(n)||ka(n,!1,t),ka(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[no]||(e[no]=!0,ka("selectionchange",!1,e))}}function Fm(t,e,n,i){switch(km(e)){case 1:var r=h1;break;case 4:r=f1;break;default:r=Jc}n=r.bind(null,e,n,t),r=void 0,!pu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Sa(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===r||a.nodeType===8&&a.parentNode===r))return;o=o.return}for(;l!==null;){if(o=ai(l),o===null)return;if(a=o.tag,a===5||a===6){i=s=o;continue e}l=l.parentNode}}i=i.return}lm(function(){var u=s,c=Yc(n),h=[];e:{var f=_m.get(t);if(f!==void 0){var d=eh,m=t;switch(t){case"keypress":if(Ro(n)===0)break e;case"keydown":case"keyup":d=A1;break;case"focusin":m="focus",d=ma;break;case"focusout":m="blur",d=ma;break;case"beforeblur":case"afterblur":d=ma;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=pf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=m1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=P1;break;case Nm:case Lm:case Rm:d=v1;break;case Im:d=N1;break;case"scroll":d=d1;break;case"wheel":d=R1;break;case"copy":case"cut":case"paste":d=x1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=gf}var y=(e&4)!==0,w=!y&&t==="scroll",p=y?f!==null?f+"Capture":null:f;y=[];for(var g=u,v;g!==null;){v=g;var k=v.stateNode;if(v.tag===5&&k!==null&&(v=k,p!==null&&(k=us(g,p),k!=null&&y.push(gs(g,k,v)))),w)break;g=g.return}0<y.length&&(f=new d(f,m,null,n,c),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",f&&n!==fu&&(m=n.relatedTarget||n.fromElement)&&(ai(m)||m[hn]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(m=n.relatedTarget||n.toElement,d=u,m=m?ai(m):null,m!==null&&(w=Ti(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(d=null,m=u),d!==m)){if(y=pf,k="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=gf,k="onPointerLeave",p="onPointerEnter",g="pointer"),w=d==null?f:_i(d),v=m==null?f:_i(m),f=new y(k,g+"leave",d,n,c),f.target=w,f.relatedTarget=v,k=null,ai(c)===u&&(y=new y(p,g+"enter",m,n,c),y.target=v,y.relatedTarget=w,k=y),w=k,d&&m)t:{for(y=d,p=m,g=0,v=y;v;v=Oi(v))g++;for(v=0,k=p;k;k=Oi(k))v++;for(;0<g-v;)y=Oi(y),g--;for(;0<v-g;)p=Oi(p),v--;for(;g--;){if(y===p||p!==null&&y===p.alternate)break t;y=Oi(y),p=Oi(p)}y=null}else y=null;d!==null&&Af(h,f,d,y,!1),m!==null&&w!==null&&Af(h,w,m,y,!0)}}e:{if(f=u?_i(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var S=H1;else if(wf(f))if(Am)S=U1;else{S=W1;var b=V1}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=$1);if(S&&(S=S(t,u))){Mm(h,S,n,c);break e}b&&b(t,f,u),t==="focusout"&&(b=f._wrapperState)&&b.controlled&&f.type==="number"&&lu(f,"number",f.value)}switch(b=u?_i(u):window,t){case"focusin":(wf(b)||b.contentEditable==="true")&&(Ri=b,wu=u,Qr=null);break;case"focusout":Qr=wu=Ri=null;break;case"mousedown":xu=!0;break;case"contextmenu":case"mouseup":case"dragend":xu=!1,bf(h,n,c);break;case"selectionchange":if(Y1)break;case"keydown":case"keyup":bf(h,n,c)}var C;if(nh)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Li?bm(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(Cm&&n.locale!=="ko"&&(Li||M!=="onCompositionStart"?M==="onCompositionEnd"&&Li&&(C=Sm()):(On=c,Zc="value"in On?On.value:On.textContent,Li=!0)),b=sl(u,M),0<b.length&&(M=new mf(M,t,null,n,c),h.push({event:M,listeners:b}),C?M.data=C:(C=Em(n),C!==null&&(M.data=C)))),(C=_1?B1(t,n):F1(t,n))&&(u=sl(u,"onBeforeInput"),0<u.length&&(c=new mf("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=C))}Bm(h,e)})}function gs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sl(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=us(t,n),s!=null&&i.unshift(gs(t,s,r)),s=us(t,e),s!=null&&i.push(gs(t,s,r))),t=t.return}return i}function Oi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Af(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===i)break;l.tag===5&&u!==null&&(l=u,r?(a=us(n,s),a!=null&&o.unshift(gs(n,a,l))):r||(a=us(n,s),a!=null&&o.push(gs(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var J1=/\r\n?/g,Z1=/\u0000|\uFFFD/g;function Tf(t){return(typeof t=="string"?t:""+t).replace(J1,`
`).replace(Z1,"")}function io(t,e,n){if(e=Tf(e),Tf(t)!==e&&n)throw Error(A(425))}function ol(){}var ku=null,Su=null;function Cu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bu=typeof setTimeout=="function"?setTimeout:void 0,ew=typeof clearTimeout=="function"?clearTimeout:void 0,Of=typeof Promise=="function"?Promise:void 0,tw=typeof queueMicrotask=="function"?queueMicrotask:typeof Of<"u"?function(t){return Of.resolve(null).then(t).catch(nw)}:bu;function nw(t){setTimeout(function(){throw t})}function Ca(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),fs(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);fs(e)}function Fn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Pf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wr=Math.random().toString(36).slice(2),Ut="__reactFiber$"+wr,ys="__reactProps$"+wr,hn="__reactContainer$"+wr,Eu="__reactEvents$"+wr,iw="__reactListeners$"+wr,rw="__reactHandles$"+wr;function ai(t){var e=t[Ut];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hn]||n[Ut]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Pf(t);t!==null;){if(n=t[Ut])return n;t=Pf(t)}return e}t=n,n=t.parentNode}return null}function Fs(t){return t=t[Ut]||t[hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _i(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(A(33))}function Hl(t){return t[ys]||null}var Mu=[],Bi=-1;function ti(t){return{current:t}}function le(t){0>Bi||(t.current=Mu[Bi],Mu[Bi]=null,Bi--)}function re(t,e){Bi++,Mu[Bi]=t.current,t.current=e}var Un={},We=ti(Un),nt=ti(!1),yi=Un;function nr(t,e){var n=t.type.contextTypes;if(!n)return Un;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function it(t){return t=t.childContextTypes,t!=null}function ll(){le(nt),le(We)}function Df(t,e,n){if(We.current!==Un)throw Error(A(168));re(We,e),re(nt,n)}function zm(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(A(108,Vv(t)||"Unknown",r));return me({},n,i)}function al(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Un,yi=We.current,re(We,t),re(nt,nt.current),!0}function Nf(t,e,n){var i=t.stateNode;if(!i)throw Error(A(169));n?(t=zm(t,e,yi),i.__reactInternalMemoizedMergedChildContext=t,le(nt),le(We),re(We,t)):le(nt),re(nt,n)}var nn=null,Vl=!1,ba=!1;function jm(t){nn===null?nn=[t]:nn.push(t)}function sw(t){Vl=!0,jm(t)}function ni(){if(!ba&&nn!==null){ba=!0;var t=0,e=ee;try{var n=nn;for(ee=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}nn=null,Vl=!1}catch(r){throw nn!==null&&(nn=nn.slice(t+1)),hm(Gc,ni),r}finally{ee=e,ba=!1}}return null}var Fi=[],zi=0,ul=null,cl=0,gt=[],yt=0,vi=null,rn=1,sn="";function si(t,e){Fi[zi++]=cl,Fi[zi++]=ul,ul=t,cl=e}function Hm(t,e,n){gt[yt++]=rn,gt[yt++]=sn,gt[yt++]=vi,vi=t;var i=rn;t=sn;var r=32-Dt(i)-1;i&=~(1<<r),n+=1;var s=32-Dt(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,rn=1<<32-Dt(e)+r|n<<r|i,sn=s+t}else rn=1<<s|n<<r|i,sn=t}function rh(t){t.return!==null&&(si(t,1),Hm(t,1,0))}function sh(t){for(;t===ul;)ul=Fi[--zi],Fi[zi]=null,cl=Fi[--zi],Fi[zi]=null;for(;t===vi;)vi=gt[--yt],gt[yt]=null,sn=gt[--yt],gt[yt]=null,rn=gt[--yt],gt[yt]=null}var ut=null,at=null,ue=!1,Tt=null;function Vm(t,e){var n=vt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Lf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ut=t,at=Fn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ut=t,at=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=vi!==null?{id:rn,overflow:sn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ut=t,at=null,!0):!1;default:return!1}}function Au(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tu(t){if(ue){var e=at;if(e){var n=e;if(!Lf(t,e)){if(Au(t))throw Error(A(418));e=Fn(n.nextSibling);var i=ut;e&&Lf(t,e)?Vm(i,n):(t.flags=t.flags&-4097|2,ue=!1,ut=t)}}else{if(Au(t))throw Error(A(418));t.flags=t.flags&-4097|2,ue=!1,ut=t}}}function Rf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ut=t}function ro(t){if(t!==ut)return!1;if(!ue)return Rf(t),ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Cu(t.type,t.memoizedProps)),e&&(e=at)){if(Au(t))throw Wm(),Error(A(418));for(;e;)Vm(t,e),e=Fn(e.nextSibling)}if(Rf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){at=Fn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}at=null}}else at=ut?Fn(t.stateNode.nextSibling):null;return!0}function Wm(){for(var t=at;t;)t=Fn(t.nextSibling)}function ir(){at=ut=null,ue=!1}function oh(t){Tt===null?Tt=[t]:Tt.push(t)}var ow=vn.ReactCurrentBatchConfig;function Tr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var i=n.stateNode}if(!i)throw Error(A(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=r.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,t))}return t}function so(t,e){throw t=Object.prototype.toString.call(e),Error(A(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function If(t){var e=t._init;return e(t._payload)}function $m(t){function e(p,g){if(t){var v=p.deletions;v===null?(p.deletions=[g],p.flags|=16):v.push(g)}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function i(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function r(p,g){return p=Vn(p,g),p.index=0,p.sibling=null,p}function s(p,g,v){return p.index=v,t?(v=p.alternate,v!==null?(v=v.index,v<g?(p.flags|=2,g):v):(p.flags|=2,g)):(p.flags|=1048576,g)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,g,v,k){return g===null||g.tag!==6?(g=Da(v,p.mode,k),g.return=p,g):(g=r(g,v),g.return=p,g)}function a(p,g,v,k){var S=v.type;return S===Ni?c(p,g,v.props.children,k,v.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===kn&&If(S)===g.type)?(k=r(g,v.props),k.ref=Tr(p,g,v),k.return=p,k):(k=Ho(v.type,v.key,v.props,null,p.mode,k),k.ref=Tr(p,g,v),k.return=p,k)}function u(p,g,v,k){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=Na(v,p.mode,k),g.return=p,g):(g=r(g,v.children||[]),g.return=p,g)}function c(p,g,v,k,S){return g===null||g.tag!==7?(g=pi(v,p.mode,k,S),g.return=p,g):(g=r(g,v),g.return=p,g)}function h(p,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Da(""+g,p.mode,v),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ys:return v=Ho(g.type,g.key,g.props,null,p.mode,v),v.ref=Tr(p,null,g),v.return=p,v;case Di:return g=Na(g,p.mode,v),g.return=p,g;case kn:var k=g._init;return h(p,k(g._payload),v)}if(Br(g)||Cr(g))return g=pi(g,p.mode,v,null),g.return=p,g;so(p,g)}return null}function f(p,g,v,k){var S=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:l(p,g,""+v,k);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ys:return v.key===S?a(p,g,v,k):null;case Di:return v.key===S?u(p,g,v,k):null;case kn:return S=v._init,f(p,g,S(v._payload),k)}if(Br(v)||Cr(v))return S!==null?null:c(p,g,v,k,null);so(p,v)}return null}function d(p,g,v,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return p=p.get(v)||null,l(g,p,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ys:return p=p.get(k.key===null?v:k.key)||null,a(g,p,k,S);case Di:return p=p.get(k.key===null?v:k.key)||null,u(g,p,k,S);case kn:var b=k._init;return d(p,g,v,b(k._payload),S)}if(Br(k)||Cr(k))return p=p.get(v)||null,c(g,p,k,S,null);so(g,k)}return null}function m(p,g,v,k){for(var S=null,b=null,C=g,M=g=0,_=null;C!==null&&M<v.length;M++){C.index>M?(_=C,C=null):_=C.sibling;var P=f(p,C,v[M],k);if(P===null){C===null&&(C=_);break}t&&C&&P.alternate===null&&e(p,C),g=s(P,g,M),b===null?S=P:b.sibling=P,b=P,C=_}if(M===v.length)return n(p,C),ue&&si(p,M),S;if(C===null){for(;M<v.length;M++)C=h(p,v[M],k),C!==null&&(g=s(C,g,M),b===null?S=C:b.sibling=C,b=C);return ue&&si(p,M),S}for(C=i(p,C);M<v.length;M++)_=d(C,p,M,v[M],k),_!==null&&(t&&_.alternate!==null&&C.delete(_.key===null?M:_.key),g=s(_,g,M),b===null?S=_:b.sibling=_,b=_);return t&&C.forEach(function(F){return e(p,F)}),ue&&si(p,M),S}function y(p,g,v,k){var S=Cr(v);if(typeof S!="function")throw Error(A(150));if(v=S.call(v),v==null)throw Error(A(151));for(var b=S=null,C=g,M=g=0,_=null,P=v.next();C!==null&&!P.done;M++,P=v.next()){C.index>M?(_=C,C=null):_=C.sibling;var F=f(p,C,P.value,k);if(F===null){C===null&&(C=_);break}t&&C&&F.alternate===null&&e(p,C),g=s(F,g,M),b===null?S=F:b.sibling=F,b=F,C=_}if(P.done)return n(p,C),ue&&si(p,M),S;if(C===null){for(;!P.done;M++,P=v.next())P=h(p,P.value,k),P!==null&&(g=s(P,g,M),b===null?S=P:b.sibling=P,b=P);return ue&&si(p,M),S}for(C=i(p,C);!P.done;M++,P=v.next())P=d(C,p,M,P.value,k),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?M:P.key),g=s(P,g,M),b===null?S=P:b.sibling=P,b=P);return t&&C.forEach(function(z){return e(p,z)}),ue&&si(p,M),S}function w(p,g,v,k){if(typeof v=="object"&&v!==null&&v.type===Ni&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ys:e:{for(var S=v.key,b=g;b!==null;){if(b.key===S){if(S=v.type,S===Ni){if(b.tag===7){n(p,b.sibling),g=r(b,v.props.children),g.return=p,p=g;break e}}else if(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===kn&&If(S)===b.type){n(p,b.sibling),g=r(b,v.props),g.ref=Tr(p,b,v),g.return=p,p=g;break e}n(p,b);break}else e(p,b);b=b.sibling}v.type===Ni?(g=pi(v.props.children,p.mode,k,v.key),g.return=p,p=g):(k=Ho(v.type,v.key,v.props,null,p.mode,k),k.ref=Tr(p,g,v),k.return=p,p=k)}return o(p);case Di:e:{for(b=v.key;g!==null;){if(g.key===b)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(p,g.sibling),g=r(g,v.children||[]),g.return=p,p=g;break e}else{n(p,g);break}else e(p,g);g=g.sibling}g=Na(v,p.mode,k),g.return=p,p=g}return o(p);case kn:return b=v._init,w(p,g,b(v._payload),k)}if(Br(v))return m(p,g,v,k);if(Cr(v))return y(p,g,v,k);so(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(n(p,g.sibling),g=r(g,v),g.return=p,p=g):(n(p,g),g=Da(v,p.mode,k),g.return=p,p=g),o(p)):n(p,g)}return w}var rr=$m(!0),Um=$m(!1),hl=ti(null),fl=null,ji=null,lh=null;function ah(){lh=ji=fl=null}function uh(t){var e=hl.current;le(hl),t._currentValue=e}function Ou(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Yi(t,e){fl=t,lh=ji=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tt=!0),t.firstContext=null)}function kt(t){var e=t._currentValue;if(lh!==t)if(t={context:t,memoizedValue:e,next:null},ji===null){if(fl===null)throw Error(A(308));ji=t,fl.dependencies={lanes:0,firstContext:t}}else ji=ji.next=t;return e}var ui=null;function ch(t){ui===null?ui=[t]:ui.push(t)}function Km(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,ch(e)):(n.next=r.next,r.next=n),e.interleaved=n,fn(t,i)}function fn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Sn=!1;function hh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ln(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zn(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,K&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,fn(t,n)}return r=i.interleaved,r===null?(e.next=e,ch(i)):(e.next=r.next,r.next=e),i.interleaved=e,fn(t,n)}function Io(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Qc(t,n)}}function _f(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function dl(t,e,n,i){var r=t.updateQueue;Sn=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(s!==null){var h=r.baseState;o=0,c=u=a=null,l=s;do{var f=l.lane,d=l.eventTime;if((i&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,y=l;switch(f=e,d=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){h=m.call(d,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(d,h,f):m,f==null)break e;h=me({},h,f);break e;case 2:Sn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else d={eventTime:d,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=d,a=h):c=c.next=d,o|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(c===null&&(a=h),r.baseState=a,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);xi|=o,t.lanes=o,t.memoizedState=h}}function Bf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(A(191,r));r.call(i)}}}var zs={},Xt=ti(zs),vs=ti(zs),ws=ti(zs);function ci(t){if(t===zs)throw Error(A(174));return t}function fh(t,e){switch(re(ws,e),re(vs,t),re(Xt,zs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uu(e,t)}le(Xt),re(Xt,e)}function sr(){le(Xt),le(vs),le(ws)}function Ym(t){ci(ws.current);var e=ci(Xt.current),n=uu(e,t.type);e!==n&&(re(vs,t),re(Xt,n))}function dh(t){vs.current===t&&(le(Xt),le(vs))}var he=ti(0);function pl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ea=[];function ph(){for(var t=0;t<Ea.length;t++)Ea[t]._workInProgressVersionPrimary=null;Ea.length=0}var _o=vn.ReactCurrentDispatcher,Ma=vn.ReactCurrentBatchConfig,wi=0,pe=null,Se=null,Me=null,ml=!1,Xr=!1,xs=0,lw=0;function Ie(){throw Error(A(321))}function mh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Lt(t[n],e[n]))return!1;return!0}function gh(t,e,n,i,r,s){if(wi=s,pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_o.current=t===null||t.memoizedState===null?hw:fw,t=n(i,r),Xr){s=0;do{if(Xr=!1,xs=0,25<=s)throw Error(A(301));s+=1,Me=Se=null,e.updateQueue=null,_o.current=dw,t=n(i,r)}while(Xr)}if(_o.current=gl,e=Se!==null&&Se.next!==null,wi=0,Me=Se=pe=null,ml=!1,e)throw Error(A(300));return t}function yh(){var t=xs!==0;return xs=0,t}function Wt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?pe.memoizedState=Me=t:Me=Me.next=t,Me}function St(){if(Se===null){var t=pe.alternate;t=t!==null?t.memoizedState:null}else t=Se.next;var e=Me===null?pe.memoizedState:Me.next;if(e!==null)Me=e,Se=t;else{if(t===null)throw Error(A(310));Se=t,t={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Me===null?pe.memoizedState=Me=t:Me=Me.next=t}return Me}function ks(t,e){return typeof e=="function"?e(t):e}function Aa(t){var e=St(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var i=Se,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var l=o=null,a=null,u=s;do{var c=u.lane;if((wi&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=h,o=i):a=a.next=h,pe.lanes|=c,xi|=c}u=u.next}while(u!==null&&u!==s);a===null?o=i:a.next=l,Lt(i,e.memoizedState)||(tt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=a,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,pe.lanes|=s,xi|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ta(t){var e=St(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Lt(s,e.memoizedState)||(tt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function Gm(){}function Qm(t,e){var n=pe,i=St(),r=e(),s=!Lt(i.memoizedState,r);if(s&&(i.memoizedState=r,tt=!0),i=i.queue,vh(Zm.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Me!==null&&Me.memoizedState.tag&1){if(n.flags|=2048,Ss(9,Jm.bind(null,n,i,r,e),void 0,null),Te===null)throw Error(A(349));wi&30||Xm(n,e,r)}return r}function Xm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pe.updateQueue,e===null?(e={lastEffect:null,stores:null},pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Jm(t,e,n,i){e.value=n,e.getSnapshot=i,eg(e)&&tg(t)}function Zm(t,e,n){return n(function(){eg(e)&&tg(t)})}function eg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Lt(t,n)}catch{return!0}}function tg(t){var e=fn(t,1);e!==null&&Nt(e,t,1,-1)}function Ff(t){var e=Wt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:t},e.queue=t,t=t.dispatch=cw.bind(null,pe,t),[e.memoizedState,t]}function Ss(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=pe.updateQueue,e===null?(e={lastEffect:null,stores:null},pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function ng(){return St().memoizedState}function Bo(t,e,n,i){var r=Wt();pe.flags|=t,r.memoizedState=Ss(1|e,n,void 0,i===void 0?null:i)}function Wl(t,e,n,i){var r=St();i=i===void 0?null:i;var s=void 0;if(Se!==null){var o=Se.memoizedState;if(s=o.destroy,i!==null&&mh(i,o.deps)){r.memoizedState=Ss(e,n,s,i);return}}pe.flags|=t,r.memoizedState=Ss(1|e,n,s,i)}function zf(t,e){return Bo(8390656,8,t,e)}function vh(t,e){return Wl(2048,8,t,e)}function ig(t,e){return Wl(4,2,t,e)}function rg(t,e){return Wl(4,4,t,e)}function sg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function og(t,e,n){return n=n!=null?n.concat([t]):null,Wl(4,4,sg.bind(null,e,t),n)}function wh(){}function lg(t,e){var n=St();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&mh(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function ag(t,e){var n=St();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&mh(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function ug(t,e,n){return wi&21?(Lt(n,e)||(n=pm(),pe.lanes|=n,xi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tt=!0),t.memoizedState=n)}function aw(t,e){var n=ee;ee=n!==0&&4>n?n:4,t(!0);var i=Ma.transition;Ma.transition={};try{t(!1),e()}finally{ee=n,Ma.transition=i}}function cg(){return St().memoizedState}function uw(t,e,n){var i=Hn(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},hg(t))fg(e,n);else if(n=Km(t,e,n,i),n!==null){var r=Ue();Nt(n,t,i,r),dg(n,e,i)}}function cw(t,e,n){var i=Hn(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(hg(t))fg(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(r.hasEagerState=!0,r.eagerState=l,Lt(l,o)){var a=e.interleaved;a===null?(r.next=r,ch(e)):(r.next=a.next,a.next=r),e.interleaved=r;return}}catch{}finally{}n=Km(t,e,r,i),n!==null&&(r=Ue(),Nt(n,t,i,r),dg(n,e,i))}}function hg(t){var e=t.alternate;return t===pe||e!==null&&e===pe}function fg(t,e){Xr=ml=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dg(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Qc(t,n)}}var gl={readContext:kt,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useInsertionEffect:Ie,useLayoutEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useMutableSource:Ie,useSyncExternalStore:Ie,useId:Ie,unstable_isNewReconciler:!1},hw={readContext:kt,useCallback:function(t,e){return Wt().memoizedState=[t,e===void 0?null:e],t},useContext:kt,useEffect:zf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bo(4194308,4,sg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bo(4,2,t,e)},useMemo:function(t,e){var n=Wt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Wt();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=uw.bind(null,pe,t),[i.memoizedState,t]},useRef:function(t){var e=Wt();return t={current:t},e.memoizedState=t},useState:Ff,useDebugValue:wh,useDeferredValue:function(t){return Wt().memoizedState=t},useTransition:function(){var t=Ff(!1),e=t[0];return t=aw.bind(null,t[1]),Wt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=pe,r=Wt();if(ue){if(n===void 0)throw Error(A(407));n=n()}else{if(n=e(),Te===null)throw Error(A(349));wi&30||Xm(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,zf(Zm.bind(null,i,s,t),[t]),i.flags|=2048,Ss(9,Jm.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Wt(),e=Te.identifierPrefix;if(ue){var n=sn,i=rn;n=(i&~(1<<32-Dt(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=xs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fw={readContext:kt,useCallback:lg,useContext:kt,useEffect:vh,useImperativeHandle:og,useInsertionEffect:ig,useLayoutEffect:rg,useMemo:ag,useReducer:Aa,useRef:ng,useState:function(){return Aa(ks)},useDebugValue:wh,useDeferredValue:function(t){var e=St();return ug(e,Se.memoizedState,t)},useTransition:function(){var t=Aa(ks)[0],e=St().memoizedState;return[t,e]},useMutableSource:Gm,useSyncExternalStore:Qm,useId:cg,unstable_isNewReconciler:!1},dw={readContext:kt,useCallback:lg,useContext:kt,useEffect:vh,useImperativeHandle:og,useInsertionEffect:ig,useLayoutEffect:rg,useMemo:ag,useReducer:Ta,useRef:ng,useState:function(){return Ta(ks)},useDebugValue:wh,useDeferredValue:function(t){var e=St();return Se===null?e.memoizedState=t:ug(e,Se.memoizedState,t)},useTransition:function(){var t=Ta(ks)[0],e=St().memoizedState;return[t,e]},useMutableSource:Gm,useSyncExternalStore:Qm,useId:cg,unstable_isNewReconciler:!1};function Mt(t,e){if(t&&t.defaultProps){e=me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Pu(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $l={isMounted:function(t){return(t=t._reactInternals)?Ti(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ue(),r=Hn(t),s=ln(i,r);s.payload=e,n!=null&&(s.callback=n),e=zn(t,s,r),e!==null&&(Nt(e,t,r,i),Io(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ue(),r=Hn(t),s=ln(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=zn(t,s,r),e!==null&&(Nt(e,t,r,i),Io(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ue(),i=Hn(t),r=ln(n,i);r.tag=2,e!=null&&(r.callback=e),e=zn(t,r,i),e!==null&&(Nt(e,t,i,n),Io(e,t,i))}};function jf(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!ps(n,i)||!ps(r,s):!0}function pg(t,e,n){var i=!1,r=Un,s=e.contextType;return typeof s=="object"&&s!==null?s=kt(s):(r=it(e)?yi:We.current,i=e.contextTypes,s=(i=i!=null)?nr(t,r):Un),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$l,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function Hf(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&$l.enqueueReplaceState(e,e.state,null)}function Du(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},hh(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=kt(s):(s=it(e)?yi:We.current,r.context=nr(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Pu(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&$l.enqueueReplaceState(r,r.state,null),dl(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function or(t,e){try{var n="",i=e;do n+=Hv(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Oa(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Nu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var pw=typeof WeakMap=="function"?WeakMap:Map;function mg(t,e,n){n=ln(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){vl||(vl=!0,Vu=i),Nu(t,e)},n}function gg(t,e,n){n=ln(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Nu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Nu(t,e),typeof i!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Vf(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new pw;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Tw.bind(null,t,e,n),e.then(t,t))}function Wf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $f(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ln(-1,1),e.tag=2,zn(n,e,1))),n.lanes|=1),t)}var mw=vn.ReactCurrentOwner,tt=!1;function $e(t,e,n,i){e.child=t===null?Um(e,null,n,i):rr(e,t.child,n,i)}function Uf(t,e,n,i,r){n=n.render;var s=e.ref;return Yi(e,r),i=gh(t,e,n,i,s,r),n=yh(),t!==null&&!tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,dn(t,e,r)):(ue&&n&&rh(e),e.flags|=1,$e(t,e,i,r),e.child)}function Kf(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Ah(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,yg(t,e,s,i,r)):(t=Ho(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ps,n(o,i)&&t.ref===e.ref)return dn(t,e,r)}return e.flags|=1,t=Vn(s,i),t.ref=e.ref,t.return=e,e.child=t}function yg(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(ps(s,i)&&t.ref===e.ref)if(tt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(tt=!0);else return e.lanes=t.lanes,dn(t,e,r)}return Lu(t,e,n,i,r)}function vg(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},re(Vi,ot),ot|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,re(Vi,ot),ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,re(Vi,ot),ot|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,re(Vi,ot),ot|=i;return $e(t,e,r,n),e.child}function wg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Lu(t,e,n,i,r){var s=it(n)?yi:We.current;return s=nr(e,s),Yi(e,r),n=gh(t,e,n,i,s,r),i=yh(),t!==null&&!tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,dn(t,e,r)):(ue&&i&&rh(e),e.flags|=1,$e(t,e,n,r),e.child)}function qf(t,e,n,i,r){if(it(n)){var s=!0;al(e)}else s=!1;if(Yi(e,r),e.stateNode===null)Fo(t,e),pg(e,n,i),Du(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=kt(u):(u=it(n)?yi:We.current,u=nr(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||a!==u)&&Hf(e,o,i,u),Sn=!1;var f=e.memoizedState;o.state=f,dl(e,i,o,r),a=e.memoizedState,l!==i||f!==a||nt.current||Sn?(typeof c=="function"&&(Pu(e,n,c,i),a=e.memoizedState),(l=Sn||jf(e,n,l,i,f,a,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=a),o.props=i,o.state=a,o.context=u,i=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,qm(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Mt(e.type,l),o.props=u,h=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=kt(a):(a=it(n)?yi:We.current,a=nr(e,a));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==a)&&Hf(e,o,i,a),Sn=!1,f=e.memoizedState,o.state=f,dl(e,i,o,r);var m=e.memoizedState;l!==h||f!==m||nt.current||Sn?(typeof d=="function"&&(Pu(e,n,d,i),m=e.memoizedState),(u=Sn||jf(e,n,u,i,f,m,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,m,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,m,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),o.props=i,o.state=m,o.context=a,i=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return Ru(t,e,n,i,s,r)}function Ru(t,e,n,i,r,s){wg(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Nf(e,n,!1),dn(t,e,s);i=e.stateNode,mw.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=rr(e,t.child,null,s),e.child=rr(e,null,l,s)):$e(t,e,l,s),e.memoizedState=i.state,r&&Nf(e,n,!0),e.child}function xg(t){var e=t.stateNode;e.pendingContext?Df(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Df(t,e.context,!1),fh(t,e.containerInfo)}function Yf(t,e,n,i,r){return ir(),oh(r),e.flags|=256,$e(t,e,n,i),e.child}var Iu={dehydrated:null,treeContext:null,retryLane:0};function _u(t){return{baseLanes:t,cachePool:null,transitions:null}}function kg(t,e,n){var i=e.pendingProps,r=he.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),re(he,r&1),t===null)return Tu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ql(o,i,0,null),t=pi(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=_u(n),e.memoizedState=Iu,t):xh(e,o));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return gw(t,e,o,i,l,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,l=r.sibling;var a={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=a,e.deletions=null):(i=Vn(r,a),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?s=Vn(l,s):(s=pi(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?_u(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Iu,i}return s=t.child,t=s.sibling,i=Vn(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function xh(t,e){return e=ql({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function oo(t,e,n,i){return i!==null&&oh(i),rr(e,t.child,null,n),t=xh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gw(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Oa(Error(A(422))),oo(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=ql({mode:"visible",children:i.children},r,0,null),s=pi(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&rr(e,t.child,null,o),e.child.memoizedState=_u(o),e.memoizedState=Iu,s);if(!(e.mode&1))return oo(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error(A(419)),i=Oa(s,i,void 0),oo(t,e,o,i)}if(l=(o&t.childLanes)!==0,tt||l){if(i=Te,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,fn(t,r),Nt(i,t,r,-1))}return Mh(),i=Oa(Error(A(421))),oo(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Ow.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,at=Fn(r.nextSibling),ut=e,ue=!0,Tt=null,t!==null&&(gt[yt++]=rn,gt[yt++]=sn,gt[yt++]=vi,rn=t.id,sn=t.overflow,vi=e),e=xh(e,i.children),e.flags|=4096,e)}function Gf(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Ou(t.return,e,n)}function Pa(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Sg(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if($e(t,e,i.children,n),i=he.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gf(t,n,e);else if(t.tag===19)Gf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(re(he,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&pl(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Pa(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&pl(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Pa(e,!0,n,null,s);break;case"together":Pa(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function dn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(A(153));if(e.child!==null){for(t=e.child,n=Vn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yw(t,e,n){switch(e.tag){case 3:xg(e),ir();break;case 5:Ym(e);break;case 1:it(e.type)&&al(e);break;case 4:fh(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;re(hl,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(re(he,he.current&1),e.flags|=128,null):n&e.child.childLanes?kg(t,e,n):(re(he,he.current&1),t=dn(t,e,n),t!==null?t.sibling:null);re(he,he.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Sg(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),re(he,he.current),i)break;return null;case 22:case 23:return e.lanes=0,vg(t,e,n)}return dn(t,e,n)}var Cg,Bu,bg,Eg;Cg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bu=function(){};bg=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,ci(Xt.current);var s=null;switch(n){case"input":r=su(t,r),i=su(t,i),s=[];break;case"select":r=me({},r,{value:void 0}),i=me({},i,{value:void 0}),s=[];break;case"textarea":r=au(t,r),i=au(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=ol)}cu(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ls.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var a=i[u];if(l=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ls.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&oe("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Eg=function(t,e,n,i){n!==i&&(e.flags|=4)};function Or(t,e){if(!ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function _e(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function vw(t,e,n){var i=e.pendingProps;switch(sh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _e(e),null;case 1:return it(e.type)&&ll(),_e(e),null;case 3:return i=e.stateNode,sr(),le(nt),le(We),ph(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ro(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Tt!==null&&(Uu(Tt),Tt=null))),Bu(t,e),_e(e),null;case 5:dh(e);var r=ci(ws.current);if(n=e.type,t!==null&&e.stateNode!=null)bg(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(A(166));return _e(e),null}if(t=ci(Xt.current),ro(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Ut]=e,i[ys]=s,t=(e.mode&1)!==0,n){case"dialog":oe("cancel",i),oe("close",i);break;case"iframe":case"object":case"embed":oe("load",i);break;case"video":case"audio":for(r=0;r<zr.length;r++)oe(zr[r],i);break;case"source":oe("error",i);break;case"img":case"image":case"link":oe("error",i),oe("load",i);break;case"details":oe("toggle",i);break;case"input":rf(i,s),oe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},oe("invalid",i);break;case"textarea":of(i,s),oe("invalid",i)}cu(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&io(i.textContent,l,t),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&io(i.textContent,l,t),r=["children",""+l]):ls.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&oe("scroll",i)}switch(n){case"input":Gs(i),sf(i,s,!0);break;case"textarea":Gs(i),lf(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=ol)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Ut]=e,t[ys]=i,Cg(t,e,!1,!1),e.stateNode=t;e:{switch(o=hu(n,i),n){case"dialog":oe("cancel",t),oe("close",t),r=i;break;case"iframe":case"object":case"embed":oe("load",t),r=i;break;case"video":case"audio":for(r=0;r<zr.length;r++)oe(zr[r],t);r=i;break;case"source":oe("error",t),r=i;break;case"img":case"image":case"link":oe("error",t),oe("load",t),r=i;break;case"details":oe("toggle",t),r=i;break;case"input":rf(t,i),r=su(t,i),oe("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=me({},i,{value:void 0}),oe("invalid",t);break;case"textarea":of(t,i),r=au(t,i),oe("invalid",t);break;default:r=i}cu(n,r),l=r;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?nm(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&em(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&as(t,a):typeof a=="number"&&as(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ls.hasOwnProperty(s)?a!=null&&s==="onScroll"&&oe("scroll",t):a!=null&&$c(t,s,a,o))}switch(n){case"input":Gs(t),sf(t,i,!1);break;case"textarea":Gs(t),lf(t);break;case"option":i.value!=null&&t.setAttribute("value",""+$n(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?$i(t,!!i.multiple,s,!1):i.defaultValue!=null&&$i(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=ol)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _e(e),null;case 6:if(t&&e.stateNode!=null)Eg(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(A(166));if(n=ci(ws.current),ci(Xt.current),ro(e)){if(i=e.stateNode,n=e.memoizedProps,i[Ut]=e,(s=i.nodeValue!==n)&&(t=ut,t!==null))switch(t.tag){case 3:io(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&io(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ut]=e,e.stateNode=i}return _e(e),null;case 13:if(le(he),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ue&&at!==null&&e.mode&1&&!(e.flags&128))Wm(),ir(),e.flags|=98560,s=!1;else if(s=ro(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(A(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(A(317));s[Ut]=e}else ir(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_e(e),s=!1}else Tt!==null&&(Uu(Tt),Tt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||he.current&1?Ce===0&&(Ce=3):Mh())),e.updateQueue!==null&&(e.flags|=4),_e(e),null);case 4:return sr(),Bu(t,e),t===null&&ms(e.stateNode.containerInfo),_e(e),null;case 10:return uh(e.type._context),_e(e),null;case 17:return it(e.type)&&ll(),_e(e),null;case 19:if(le(he),s=e.memoizedState,s===null)return _e(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Or(s,!1);else{if(Ce!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=pl(t),o!==null){for(e.flags|=128,Or(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return re(he,he.current&1|2),e.child}t=t.sibling}s.tail!==null&&ve()>lr&&(e.flags|=128,i=!0,Or(s,!1),e.lanes=4194304)}else{if(!i)if(t=pl(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Or(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ue)return _e(e),null}else 2*ve()-s.renderingStartTime>lr&&n!==1073741824&&(e.flags|=128,i=!0,Or(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ve(),e.sibling=null,n=he.current,re(he,i?n&1|2:n&1),e):(_e(e),null);case 22:case 23:return Eh(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ot&1073741824&&(_e(e),e.subtreeFlags&6&&(e.flags|=8192)):_e(e),null;case 24:return null;case 25:return null}throw Error(A(156,e.tag))}function ww(t,e){switch(sh(e),e.tag){case 1:return it(e.type)&&ll(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return sr(),le(nt),le(We),ph(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dh(e),null;case 13:if(le(he),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(A(340));ir()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return le(he),null;case 4:return sr(),null;case 10:return uh(e.type._context),null;case 22:case 23:return Eh(),null;case 24:return null;default:return null}}var lo=!1,Fe=!1,xw=typeof WeakSet=="function"?WeakSet:Set,D=null;function Hi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ge(t,e,i)}else n.current=null}function Fu(t,e,n){try{n()}catch(i){ge(t,e,i)}}var Qf=!1;function kw(t,e){if(ku=il,t=Pm(),ih(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,h=t,f=null;t:for(;;){for(var d;h!==n||r!==0&&h.nodeType!==3||(l=o+r),h!==s||i!==0&&h.nodeType!==3||(a=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===t)break t;if(f===n&&++u===r&&(l=o),f===s&&++c===i&&(a=o),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Su={focusedElem:t,selectionRange:n},il=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,w=m.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?y:Mt(e.type,y),w);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(k){ge(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return m=Qf,Qf=!1,m}function Jr(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Fu(e,n,s)}r=r.next}while(r!==i)}}function Ul(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function zu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Mg(t){var e=t.alternate;e!==null&&(t.alternate=null,Mg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ut],delete e[ys],delete e[Eu],delete e[iw],delete e[rw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ag(t){return t.tag===5||t.tag===3||t.tag===4}function Xf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ag(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ju(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ol));else if(i!==4&&(t=t.child,t!==null))for(ju(t,e,n),t=t.sibling;t!==null;)ju(t,e,n),t=t.sibling}function Hu(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Hu(t,e,n),t=t.sibling;t!==null;)Hu(t,e,n),t=t.sibling}var Oe=null,At=!1;function xn(t,e,n){for(n=n.child;n!==null;)Tg(t,e,n),n=n.sibling}function Tg(t,e,n){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Bl,n)}catch{}switch(n.tag){case 5:Fe||Hi(n,e);case 6:var i=Oe,r=At;Oe=null,xn(t,e,n),Oe=i,At=r,Oe!==null&&(At?(t=Oe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Oe.removeChild(n.stateNode));break;case 18:Oe!==null&&(At?(t=Oe,n=n.stateNode,t.nodeType===8?Ca(t.parentNode,n):t.nodeType===1&&Ca(t,n),fs(t)):Ca(Oe,n.stateNode));break;case 4:i=Oe,r=At,Oe=n.stateNode.containerInfo,At=!0,xn(t,e,n),Oe=i,At=r;break;case 0:case 11:case 14:case 15:if(!Fe&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Fu(n,e,o),r=r.next}while(r!==i)}xn(t,e,n);break;case 1:if(!Fe&&(Hi(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){ge(n,e,l)}xn(t,e,n);break;case 21:xn(t,e,n);break;case 22:n.mode&1?(Fe=(i=Fe)||n.memoizedState!==null,xn(t,e,n),Fe=i):xn(t,e,n);break;default:xn(t,e,n)}}function Jf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xw),e.forEach(function(i){var r=Pw.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Et(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Oe=l.stateNode,At=!1;break e;case 3:Oe=l.stateNode.containerInfo,At=!0;break e;case 4:Oe=l.stateNode.containerInfo,At=!0;break e}l=l.return}if(Oe===null)throw Error(A(160));Tg(s,o,r),Oe=null,At=!1;var a=r.alternate;a!==null&&(a.return=null),r.return=null}catch(u){ge(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Og(e,t),e=e.sibling}function Og(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Et(e,t),Ft(t),i&4){try{Jr(3,t,t.return),Ul(3,t)}catch(y){ge(t,t.return,y)}try{Jr(5,t,t.return)}catch(y){ge(t,t.return,y)}}break;case 1:Et(e,t),Ft(t),i&512&&n!==null&&Hi(n,n.return);break;case 5:if(Et(e,t),Ft(t),i&512&&n!==null&&Hi(n,n.return),t.flags&32){var r=t.stateNode;try{as(r,"")}catch(y){ge(t,t.return,y)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Xp(r,s),hu(l,o);var u=hu(l,s);for(o=0;o<a.length;o+=2){var c=a[o],h=a[o+1];c==="style"?nm(r,h):c==="dangerouslySetInnerHTML"?em(r,h):c==="children"?as(r,h):$c(r,c,h,u)}switch(l){case"input":ou(r,s);break;case"textarea":Jp(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?$i(r,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?$i(r,!!s.multiple,s.defaultValue,!0):$i(r,!!s.multiple,s.multiple?[]:"",!1))}r[ys]=s}catch(y){ge(t,t.return,y)}}break;case 6:if(Et(e,t),Ft(t),i&4){if(t.stateNode===null)throw Error(A(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(y){ge(t,t.return,y)}}break;case 3:if(Et(e,t),Ft(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{fs(e.containerInfo)}catch(y){ge(t,t.return,y)}break;case 4:Et(e,t),Ft(t);break;case 13:Et(e,t),Ft(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Ch=ve())),i&4&&Jf(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Fe=(u=Fe)||c,Et(e,t),Fe=u):Et(e,t),Ft(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(D=t,c=t.child;c!==null;){for(h=D=c;D!==null;){switch(f=D,d=f.child,f.tag){case 0:case 11:case 14:case 15:Jr(4,f,f.return);break;case 1:Hi(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){ge(i,n,y)}}break;case 5:Hi(f,f.return);break;case 22:if(f.memoizedState!==null){ed(h);continue}}d!==null?(d.return=f,D=d):ed(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{r=h.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=h.stateNode,a=h.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=tm("display",o))}catch(y){ge(t,t.return,y)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){ge(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Et(e,t),Ft(t),i&4&&Jf(t);break;case 21:break;default:Et(e,t),Ft(t)}}function Ft(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ag(n)){var i=n;break e}n=n.return}throw Error(A(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(as(r,""),i.flags&=-33);var s=Xf(t);Hu(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,l=Xf(t);ju(t,l,o);break;default:throw Error(A(161))}}catch(a){ge(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Sw(t,e,n){D=t,Pg(t)}function Pg(t,e,n){for(var i=(t.mode&1)!==0;D!==null;){var r=D,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||lo;if(!o){var l=r.alternate,a=l!==null&&l.memoizedState!==null||Fe;l=lo;var u=Fe;if(lo=o,(Fe=a)&&!u)for(D=r;D!==null;)o=D,a=o.child,o.tag===22&&o.memoizedState!==null?td(r):a!==null?(a.return=o,D=a):td(r);for(;s!==null;)D=s,Pg(s),s=s.sibling;D=r,lo=l,Fe=u}Zf(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,D=s):Zf(t)}}function Zf(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fe||Ul(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Fe)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Mt(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Bf(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Bf(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&fs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Fe||e.flags&512&&zu(e)}catch(f){ge(e,e.return,f)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function ed(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function td(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ul(4,e)}catch(a){ge(e,n,a)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(a){ge(e,r,a)}}var s=e.return;try{zu(e)}catch(a){ge(e,s,a)}break;case 5:var o=e.return;try{zu(e)}catch(a){ge(e,o,a)}}}catch(a){ge(e,e.return,a)}if(e===t){D=null;break}var l=e.sibling;if(l!==null){l.return=e.return,D=l;break}D=e.return}}var Cw=Math.ceil,yl=vn.ReactCurrentDispatcher,kh=vn.ReactCurrentOwner,wt=vn.ReactCurrentBatchConfig,K=0,Te=null,we=null,Le=0,ot=0,Vi=ti(0),Ce=0,Cs=null,xi=0,Kl=0,Sh=0,Zr=null,Je=null,Ch=0,lr=1/0,en=null,vl=!1,Vu=null,jn=null,ao=!1,Pn=null,wl=0,es=0,Wu=null,zo=-1,jo=0;function Ue(){return K&6?ve():zo!==-1?zo:zo=ve()}function Hn(t){return t.mode&1?K&2&&Le!==0?Le&-Le:ow.transition!==null?(jo===0&&(jo=pm()),jo):(t=ee,t!==0||(t=window.event,t=t===void 0?16:km(t.type)),t):1}function Nt(t,e,n,i){if(50<es)throw es=0,Wu=null,Error(A(185));_s(t,n,i),(!(K&2)||t!==Te)&&(t===Te&&(!(K&2)&&(Kl|=n),Ce===4&&Mn(t,Le)),rt(t,i),n===1&&K===0&&!(e.mode&1)&&(lr=ve()+500,Vl&&ni()))}function rt(t,e){var n=t.callbackNode;o1(t,e);var i=nl(t,t===Te?Le:0);if(i===0)n!==null&&cf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&cf(n),e===1)t.tag===0?sw(nd.bind(null,t)):jm(nd.bind(null,t)),tw(function(){!(K&6)&&ni()}),n=null;else{switch(mm(i)){case 1:n=Gc;break;case 4:n=fm;break;case 16:n=tl;break;case 536870912:n=dm;break;default:n=tl}n=Fg(n,Dg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Dg(t,e){if(zo=-1,jo=0,K&6)throw Error(A(327));var n=t.callbackNode;if(Gi()&&t.callbackNode!==n)return null;var i=nl(t,t===Te?Le:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=xl(t,i);else{e=i;var r=K;K|=2;var s=Lg();(Te!==t||Le!==e)&&(en=null,lr=ve()+500,di(t,e));do try{Mw();break}catch(l){Ng(t,l)}while(!0);ah(),yl.current=s,K=r,we!==null?e=0:(Te=null,Le=0,e=Ce)}if(e!==0){if(e===2&&(r=gu(t),r!==0&&(i=r,e=$u(t,r))),e===1)throw n=Cs,di(t,0),Mn(t,i),rt(t,ve()),n;if(e===6)Mn(t,i);else{if(r=t.current.alternate,!(i&30)&&!bw(r)&&(e=xl(t,i),e===2&&(s=gu(t),s!==0&&(i=s,e=$u(t,s))),e===1))throw n=Cs,di(t,0),Mn(t,i),rt(t,ve()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(A(345));case 2:oi(t,Je,en);break;case 3:if(Mn(t,i),(i&130023424)===i&&(e=Ch+500-ve(),10<e)){if(nl(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Ue(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=bu(oi.bind(null,t,Je,en),e);break}oi(t,Je,en);break;case 4:if(Mn(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Dt(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=ve()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Cw(i/1960))-i,10<i){t.timeoutHandle=bu(oi.bind(null,t,Je,en),i);break}oi(t,Je,en);break;case 5:oi(t,Je,en);break;default:throw Error(A(329))}}}return rt(t,ve()),t.callbackNode===n?Dg.bind(null,t):null}function $u(t,e){var n=Zr;return t.current.memoizedState.isDehydrated&&(di(t,e).flags|=256),t=xl(t,e),t!==2&&(e=Je,Je=n,e!==null&&Uu(e)),t}function Uu(t){Je===null?Je=t:Je.push.apply(Je,t)}function bw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Lt(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mn(t,e){for(e&=~Sh,e&=~Kl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Dt(e),i=1<<n;t[n]=-1,e&=~i}}function nd(t){if(K&6)throw Error(A(327));Gi();var e=nl(t,0);if(!(e&1))return rt(t,ve()),null;var n=xl(t,e);if(t.tag!==0&&n===2){var i=gu(t);i!==0&&(e=i,n=$u(t,i))}if(n===1)throw n=Cs,di(t,0),Mn(t,e),rt(t,ve()),n;if(n===6)throw Error(A(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,oi(t,Je,en),rt(t,ve()),null}function bh(t,e){var n=K;K|=1;try{return t(e)}finally{K=n,K===0&&(lr=ve()+500,Vl&&ni())}}function ki(t){Pn!==null&&Pn.tag===0&&!(K&6)&&Gi();var e=K;K|=1;var n=wt.transition,i=ee;try{if(wt.transition=null,ee=1,t)return t()}finally{ee=i,wt.transition=n,K=e,!(K&6)&&ni()}}function Eh(){ot=Vi.current,le(Vi)}function di(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ew(n)),we!==null)for(n=we.return;n!==null;){var i=n;switch(sh(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ll();break;case 3:sr(),le(nt),le(We),ph();break;case 5:dh(i);break;case 4:sr();break;case 13:le(he);break;case 19:le(he);break;case 10:uh(i.type._context);break;case 22:case 23:Eh()}n=n.return}if(Te=t,we=t=Vn(t.current,null),Le=ot=e,Ce=0,Cs=null,Sh=Kl=xi=0,Je=Zr=null,ui!==null){for(e=0;e<ui.length;e++)if(n=ui[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}ui=null}return t}function Ng(t,e){do{var n=we;try{if(ah(),_o.current=gl,ml){for(var i=pe.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ml=!1}if(wi=0,Me=Se=pe=null,Xr=!1,xs=0,kh.current=null,n===null||n.return===null){Ce=1,Cs=e,we=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Le,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=Wf(o);if(d!==null){d.flags&=-257,$f(d,o,l,s,e),d.mode&1&&Vf(s,u,e),e=d,a=u;var m=e.updateQueue;if(m===null){var y=new Set;y.add(a),e.updateQueue=y}else m.add(a);break e}else{if(!(e&1)){Vf(s,u,e),Mh();break e}a=Error(A(426))}}else if(ue&&l.mode&1){var w=Wf(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),$f(w,o,l,s,e),oh(or(a,l));break e}}s=a=or(a,l),Ce!==4&&(Ce=2),Zr===null?Zr=[s]:Zr.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=mg(s,a,e);_f(s,p);break e;case 1:l=a;var g=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(jn===null||!jn.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=gg(s,l,e);_f(s,k);break e}}s=s.return}while(s!==null)}Ig(n)}catch(S){e=S,we===n&&n!==null&&(we=n=n.return);continue}break}while(!0)}function Lg(){var t=yl.current;return yl.current=gl,t===null?gl:t}function Mh(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),Te===null||!(xi&268435455)&&!(Kl&268435455)||Mn(Te,Le)}function xl(t,e){var n=K;K|=2;var i=Lg();(Te!==t||Le!==e)&&(en=null,di(t,e));do try{Ew();break}catch(r){Ng(t,r)}while(!0);if(ah(),K=n,yl.current=i,we!==null)throw Error(A(261));return Te=null,Le=0,Ce}function Ew(){for(;we!==null;)Rg(we)}function Mw(){for(;we!==null&&!Xv();)Rg(we)}function Rg(t){var e=Bg(t.alternate,t,ot);t.memoizedProps=t.pendingProps,e===null?Ig(t):we=e,kh.current=null}function Ig(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ww(n,e),n!==null){n.flags&=32767,we=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ce=6,we=null;return}}else if(n=vw(n,e,ot),n!==null){we=n;return}if(e=e.sibling,e!==null){we=e;return}we=e=t}while(e!==null);Ce===0&&(Ce=5)}function oi(t,e,n){var i=ee,r=wt.transition;try{wt.transition=null,ee=1,Aw(t,e,n,i)}finally{wt.transition=r,ee=i}return null}function Aw(t,e,n,i){do Gi();while(Pn!==null);if(K&6)throw Error(A(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(A(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(l1(t,s),t===Te&&(we=Te=null,Le=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ao||(ao=!0,Fg(tl,function(){return Gi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=wt.transition,wt.transition=null;var o=ee;ee=1;var l=K;K|=4,kh.current=null,kw(t,n),Og(n,t),q1(Su),il=!!ku,Su=ku=null,t.current=n,Sw(n),Jv(),K=l,ee=o,wt.transition=s}else t.current=n;if(ao&&(ao=!1,Pn=t,wl=r),s=t.pendingLanes,s===0&&(jn=null),t1(n.stateNode),rt(t,ve()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(vl)throw vl=!1,t=Vu,Vu=null,t;return wl&1&&t.tag!==0&&Gi(),s=t.pendingLanes,s&1?t===Wu?es++:(es=0,Wu=t):es=0,ni(),null}function Gi(){if(Pn!==null){var t=mm(wl),e=wt.transition,n=ee;try{if(wt.transition=null,ee=16>t?16:t,Pn===null)var i=!1;else{if(t=Pn,Pn=null,wl=0,K&6)throw Error(A(331));var r=K;for(K|=4,D=t.current;D!==null;){var s=D,o=s.child;if(D.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(D=u;D!==null;){var c=D;switch(c.tag){case 0:case 11:case 15:Jr(8,c,s)}var h=c.child;if(h!==null)h.return=c,D=h;else for(;D!==null;){c=D;var f=c.sibling,d=c.return;if(Mg(c),c===u){D=null;break}if(f!==null){f.return=d,D=f;break}D=d}}}var m=s.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}D=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,D=o;else e:for(;D!==null;){if(s=D,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Jr(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,D=p;break e}D=s.return}}var g=t.current;for(D=g;D!==null;){o=D;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,D=v;else e:for(o=g;D!==null;){if(l=D,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ul(9,l)}}catch(S){ge(l,l.return,S)}if(l===o){D=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,D=k;break e}D=l.return}}if(K=r,ni(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Bl,t)}catch{}i=!0}return i}finally{ee=n,wt.transition=e}}return!1}function id(t,e,n){e=or(n,e),e=mg(t,e,1),t=zn(t,e,1),e=Ue(),t!==null&&(_s(t,1,e),rt(t,e))}function ge(t,e,n){if(t.tag===3)id(t,t,n);else for(;e!==null;){if(e.tag===3){id(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(jn===null||!jn.has(i))){t=or(n,t),t=gg(e,t,1),e=zn(e,t,1),t=Ue(),e!==null&&(_s(e,1,t),rt(e,t));break}}e=e.return}}function Tw(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ue(),t.pingedLanes|=t.suspendedLanes&n,Te===t&&(Le&n)===n&&(Ce===4||Ce===3&&(Le&130023424)===Le&&500>ve()-Ch?di(t,0):Sh|=n),rt(t,e)}function _g(t,e){e===0&&(t.mode&1?(e=Js,Js<<=1,!(Js&130023424)&&(Js=4194304)):e=1);var n=Ue();t=fn(t,e),t!==null&&(_s(t,e,n),rt(t,n))}function Ow(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_g(t,n)}function Pw(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(A(314))}i!==null&&i.delete(e),_g(t,n)}var Bg;Bg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nt.current)tt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tt=!1,yw(t,e,n);tt=!!(t.flags&131072)}else tt=!1,ue&&e.flags&1048576&&Hm(e,cl,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Fo(t,e),t=e.pendingProps;var r=nr(e,We.current);Yi(e,n),r=gh(null,e,i,t,r,n);var s=yh();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,it(i)?(s=!0,al(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,hh(e),r.updater=$l,e.stateNode=r,r._reactInternals=e,Du(e,i,t,n),e=Ru(null,e,i,!0,s,n)):(e.tag=0,ue&&s&&rh(e),$e(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Fo(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Nw(i),t=Mt(i,t),r){case 0:e=Lu(null,e,i,t,n);break e;case 1:e=qf(null,e,i,t,n);break e;case 11:e=Uf(null,e,i,t,n);break e;case 14:e=Kf(null,e,i,Mt(i.type,t),n);break e}throw Error(A(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Mt(i,r),Lu(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Mt(i,r),qf(t,e,i,r,n);case 3:e:{if(xg(e),t===null)throw Error(A(387));i=e.pendingProps,s=e.memoizedState,r=s.element,qm(t,e),dl(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=or(Error(A(423)),e),e=Yf(t,e,i,n,r);break e}else if(i!==r){r=or(Error(A(424)),e),e=Yf(t,e,i,n,r);break e}else for(at=Fn(e.stateNode.containerInfo.firstChild),ut=e,ue=!0,Tt=null,n=Um(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ir(),i===r){e=dn(t,e,n);break e}$e(t,e,i,n)}e=e.child}return e;case 5:return Ym(e),t===null&&Tu(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Cu(i,r)?o=null:s!==null&&Cu(i,s)&&(e.flags|=32),wg(t,e),$e(t,e,o,n),e.child;case 6:return t===null&&Tu(e),null;case 13:return kg(t,e,n);case 4:return fh(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=rr(e,null,i,n):$e(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Mt(i,r),Uf(t,e,i,r,n);case 7:return $e(t,e,e.pendingProps,n),e.child;case 8:return $e(t,e,e.pendingProps.children,n),e.child;case 12:return $e(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,re(hl,i._currentValue),i._currentValue=o,s!==null)if(Lt(s.value,o)){if(s.children===r.children&&!nt.current){e=dn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===i){if(s.tag===1){a=ln(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Ou(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(A(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ou(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$e(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Yi(e,n),r=kt(r),i=i(r),e.flags|=1,$e(t,e,i,n),e.child;case 14:return i=e.type,r=Mt(i,e.pendingProps),r=Mt(i.type,r),Kf(t,e,i,r,n);case 15:return yg(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Mt(i,r),Fo(t,e),e.tag=1,it(i)?(t=!0,al(e)):t=!1,Yi(e,n),pg(e,i,r),Du(e,i,r,n),Ru(null,e,i,!0,t,n);case 19:return Sg(t,e,n);case 22:return vg(t,e,n)}throw Error(A(156,e.tag))};function Fg(t,e){return hm(t,e)}function Dw(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(t,e,n,i){return new Dw(t,e,n,i)}function Ah(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Nw(t){if(typeof t=="function")return Ah(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Kc)return 11;if(t===qc)return 14}return 2}function Vn(t,e){var n=t.alternate;return n===null?(n=vt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ho(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Ah(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ni:return pi(n.children,r,s,e);case Uc:o=8,r|=8;break;case tu:return t=vt(12,n,e,r|2),t.elementType=tu,t.lanes=s,t;case nu:return t=vt(13,n,e,r),t.elementType=nu,t.lanes=s,t;case iu:return t=vt(19,n,e,r),t.elementType=iu,t.lanes=s,t;case Yp:return ql(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Kp:o=10;break e;case qp:o=9;break e;case Kc:o=11;break e;case qc:o=14;break e;case kn:o=16,i=null;break e}throw Error(A(130,t==null?t:typeof t,""))}return e=vt(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function pi(t,e,n,i){return t=vt(7,t,i,e),t.lanes=n,t}function ql(t,e,n,i){return t=vt(22,t,i,e),t.elementType=Yp,t.lanes=n,t.stateNode={isHidden:!1},t}function Da(t,e,n){return t=vt(6,t,null,e),t.lanes=n,t}function Na(t,e,n){return e=vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Lw(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fa(0),this.expirationTimes=fa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fa(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Th(t,e,n,i,r,s,o,l,a){return t=new Lw(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=vt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hh(s),t}function Rw(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Di,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function zg(t){if(!t)return Un;t=t._reactInternals;e:{if(Ti(t)!==t||t.tag!==1)throw Error(A(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(it(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(A(171))}if(t.tag===1){var n=t.type;if(it(n))return zm(t,n,e)}return e}function jg(t,e,n,i,r,s,o,l,a){return t=Th(n,i,!0,t,r,s,o,l,a),t.context=zg(null),n=t.current,i=Ue(),r=Hn(n),s=ln(i,r),s.callback=e??null,zn(n,s,r),t.current.lanes=r,_s(t,r,i),rt(t,i),t}function Yl(t,e,n,i){var r=e.current,s=Ue(),o=Hn(r);return n=zg(n),e.context===null?e.context=n:e.pendingContext=n,e=ln(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=zn(r,e,o),t!==null&&(Nt(t,r,o,s),Io(t,r,o)),o}function kl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Oh(t,e){rd(t,e),(t=t.alternate)&&rd(t,e)}function Iw(){return null}var Hg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ph(t){this._internalRoot=t}Gl.prototype.render=Ph.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(A(409));Yl(t,e,null,null)};Gl.prototype.unmount=Ph.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ki(function(){Yl(null,t,null,null)}),e[hn]=null}};function Gl(t){this._internalRoot=t}Gl.prototype.unstable_scheduleHydration=function(t){if(t){var e=vm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<En.length&&e!==0&&e<En[n].priority;n++);En.splice(n,0,t),n===0&&xm(t)}};function Dh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ql(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sd(){}function _w(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=kl(o);s.call(u)}}var o=jg(e,i,t,0,null,!1,!1,"",sd);return t._reactRootContainer=o,t[hn]=o.current,ms(t.nodeType===8?t.parentNode:t),ki(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var u=kl(a);l.call(u)}}var a=Th(t,0,!1,null,null,!1,!1,"",sd);return t._reactRootContainer=a,t[hn]=a.current,ms(t.nodeType===8?t.parentNode:t),ki(function(){Yl(e,a,n,i)}),a}function Xl(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var l=r;r=function(){var a=kl(o);l.call(a)}}Yl(e,o,t,r)}else o=_w(n,e,t,r,i);return kl(o)}gm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fr(e.pendingLanes);n!==0&&(Qc(e,n|1),rt(e,ve()),!(K&6)&&(lr=ve()+500,ni()))}break;case 13:ki(function(){var i=fn(t,1);if(i!==null){var r=Ue();Nt(i,t,1,r)}}),Oh(t,1)}};Xc=function(t){if(t.tag===13){var e=fn(t,134217728);if(e!==null){var n=Ue();Nt(e,t,134217728,n)}Oh(t,134217728)}};ym=function(t){if(t.tag===13){var e=Hn(t),n=fn(t,e);if(n!==null){var i=Ue();Nt(n,t,e,i)}Oh(t,e)}};vm=function(){return ee};wm=function(t,e){var n=ee;try{return ee=t,e()}finally{ee=n}};du=function(t,e,n){switch(e){case"input":if(ou(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Hl(i);if(!r)throw Error(A(90));Qp(i),ou(i,r)}}}break;case"textarea":Jp(t,n);break;case"select":e=n.value,e!=null&&$i(t,!!n.multiple,e,!1)}};sm=bh;om=ki;var Bw={usingClientEntryPoint:!1,Events:[Fs,_i,Hl,im,rm,bh]},Pr={findFiberByHostInstance:ai,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Fw={bundleType:Pr.bundleType,version:Pr.version,rendererPackageName:Pr.rendererPackageName,rendererConfig:Pr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=um(t),t===null?null:t.stateNode},findFiberByHostInstance:Pr.findFiberByHostInstance||Iw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uo.isDisabled&&uo.supportsFiber)try{Bl=uo.inject(Fw),Qt=uo}catch{}}ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bw;ft.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dh(e))throw Error(A(200));return Rw(t,e,null,n)};ft.createRoot=function(t,e){if(!Dh(t))throw Error(A(299));var n=!1,i="",r=Hg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Th(t,1,!1,null,null,n,!1,i,r),t[hn]=e.current,ms(t.nodeType===8?t.parentNode:t),new Ph(e)};ft.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(A(188)):(t=Object.keys(t).join(","),Error(A(268,t)));return t=um(e),t=t===null?null:t.stateNode,t};ft.flushSync=function(t){return ki(t)};ft.hydrate=function(t,e,n){if(!Ql(e))throw Error(A(200));return Xl(null,t,e,!0,n)};ft.hydrateRoot=function(t,e,n){if(!Dh(t))throw Error(A(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=Hg;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=jg(e,null,t,1,n??null,r,!1,s,o),t[hn]=e.current,ms(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Gl(e)};ft.render=function(t,e,n){if(!Ql(e))throw Error(A(200));return Xl(null,t,e,!1,n)};ft.unmountComponentAtNode=function(t){if(!Ql(t))throw Error(A(40));return t._reactRootContainer?(ki(function(){Xl(null,null,t,!1,function(){t._reactRootContainer=null,t[hn]=null})}),!0):!1};ft.unstable_batchedUpdates=bh;ft.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Ql(n))throw Error(A(200));if(t==null||t._reactInternals===void 0)throw Error(A(38));return Xl(t,e,n,!1,i)};ft.version="18.3.1-next-f1338f8080-20240426";function Vg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vg)}catch(t){console.error(t)}}Vg(),Vp.exports=ft;var zw=Vp.exports,od=zw;Za.createRoot=od.createRoot,Za.hydrateRoot=od.hydrateRoot;var jw={BASE_URL:"/forsp-web",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const ld=t=>{let e;const n=new Set,i=(c,h)=>{const f=typeof c=="function"?c(e):c;if(!Object.is(f,e)){const d=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(m=>m(e,d))}},r=()=>e,a={setState:i,getState:r,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(jw?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(i,r,a);return a},Hw=t=>t?ld(t):ld;var Wg={exports:{}},$g={},Ug={exports:{}},Kg={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ar=G;function Vw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ww=typeof Object.is=="function"?Object.is:Vw,$w=ar.useState,Uw=ar.useEffect,Kw=ar.useLayoutEffect,qw=ar.useDebugValue;function Yw(t,e){var n=e(),i=$w({inst:{value:n,getSnapshot:e}}),r=i[0].inst,s=i[1];return Kw(function(){r.value=n,r.getSnapshot=e,La(r)&&s({inst:r})},[t,n,e]),Uw(function(){return La(r)&&s({inst:r}),t(function(){La(r)&&s({inst:r})})},[t]),qw(n),n}function La(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ww(t,n)}catch{return!0}}function Gw(t,e){return e()}var Qw=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Gw:Yw;Kg.useSyncExternalStore=ar.useSyncExternalStore!==void 0?ar.useSyncExternalStore:Qw;Ug.exports=Kg;var Xw=Ug.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jl=G,Jw=Xw;function Zw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ex=typeof Object.is=="function"?Object.is:Zw,tx=Jw.useSyncExternalStore,nx=Jl.useRef,ix=Jl.useEffect,rx=Jl.useMemo,sx=Jl.useDebugValue;$g.useSyncExternalStoreWithSelector=function(t,e,n,i,r){var s=nx(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=rx(function(){function a(d){if(!u){if(u=!0,c=d,d=i(d),r!==void 0&&o.hasValue){var m=o.value;if(r(m,d))return h=m}return h=d}if(m=h,ex(c,d))return m;var y=i(d);return r!==void 0&&r(m,y)?m:(c=d,h=y)}var u=!1,c,h,f=n===void 0?null:n;return[function(){return a(e())},f===null?void 0:function(){return a(f())}]},[e,n,i,r]);var l=tx(t,s[0],s[1]);return ix(function(){o.hasValue=!0,o.value=l},[l]),sx(l),l};Wg.exports=$g;var ox=Wg.exports;const lx=Pp(ox);var qg={BASE_URL:"/forsp-web",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:ax}=Hc,{useSyncExternalStoreWithSelector:ux}=lx;let ad=!1;const cx=t=>t;function hx(t,e=cx,n){(qg?"production":void 0)!=="production"&&n&&!ad&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ad=!0);const i=ux(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return ax(i),i}const fx=t=>{(qg?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?Hw(t):t,n=(i,r)=>hx(e,i,r);return Object.assign(n,e),n},Yg=t=>fx;function dx(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[i,r]of t)if(!Object.is(r,e.get(i)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(t[i],e[i]))return!1;return!0}const{useRef:px}=Hc;function mx(t){const e=px();return n=>{const i=t(n);return dx(e.current,i)?e.current:e.current=i}}const Gg="forsp-web";var gx={BASE_URL:"/forsp-web",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function yx(t,e){let n;try{n=t()}catch{return}return{getItem:r=>{var s;const o=a=>a===null?null:JSON.parse(a,void 0),l=(s=n.getItem(r))!=null?s:null;return l instanceof Promise?l.then(o):o(l)},setItem:(r,s)=>n.setItem(r,JSON.stringify(s,void 0)),removeItem:r=>n.removeItem(r)}}const bs=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(i){return bs(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return bs(i)(n)}}}},vx=(t,e)=>(n,i,r)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:w=>w,version:0,merge:(w,p)=>({...p,...w}),...e},o=!1;const l=new Set,a=new Set;let u;try{u=s.getStorage()}catch{}if(!u)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...w)},i,r);const c=bs(s.serialize),h=()=>{const w=s.partialize({...i()});let p;const g=c({state:w,version:s.version}).then(v=>u.setItem(s.name,v)).catch(v=>{p=v});if(p)throw p;return g},f=r.setState;r.setState=(w,p)=>{f(w,p),h()};const d=t((...w)=>{n(...w),h()},i,r);let m;const y=()=>{var w;if(!u)return;o=!1,l.forEach(g=>g(i()));const p=((w=s.onRehydrateStorage)==null?void 0:w.call(s,i()))||void 0;return bs(u.getItem.bind(u))(s.name).then(g=>{if(g)return s.deserialize(g)}).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==s.version){if(s.migrate)return s.migrate(g.state,g.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return g.state}).then(g=>{var v;return m=s.merge(g,(v=i())!=null?v:d),n(m,!0),h()}).then(()=>{p==null||p(m,void 0),o=!0,a.forEach(g=>g(m))}).catch(g=>{p==null||p(void 0,g)})};return r.persist={setOptions:w=>{s={...s,...w},w.getStorage&&(u=w.getStorage())},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:w=>(l.add(w),()=>{l.delete(w)}),onFinishHydration:w=>(a.add(w),()=>{a.delete(w)})},y(),m||d},wx=(t,e)=>(n,i,r)=>{let s={storage:yx(()=>localStorage),partialize:y=>y,version:0,merge:(y,w)=>({...w,...y}),...e},o=!1;const l=new Set,a=new Set;let u=s.storage;if(!u)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...y)},i,r);const c=()=>{const y=s.partialize({...i()});return u.setItem(s.name,{state:y,version:s.version})},h=r.setState;r.setState=(y,w)=>{h(y,w),c()};const f=t((...y)=>{n(...y),c()},i,r);r.getInitialState=()=>f;let d;const m=()=>{var y,w;if(!u)return;o=!1,l.forEach(g=>{var v;return g((v=i())!=null?v:f)});const p=((w=s.onRehydrateStorage)==null?void 0:w.call(s,(y=i())!=null?y:f))||void 0;return bs(u.getItem.bind(u))(s.name).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==s.version){if(s.migrate)return s.migrate(g.state,g.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return g.state}).then(g=>{var v;return d=s.merge(g,(v=i())!=null?v:f),n(d,!0),c()}).then(()=>{p==null||p(d,void 0),d=i(),o=!0,a.forEach(g=>g(d))}).catch(g=>{p==null||p(void 0,g)})};return r.persist={setOptions:y=>{s={...s,...y},y.storage&&(u=y.storage)},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:y=>(l.add(y),()=>{l.delete(y)}),onFinishHydration:y=>(a.add(y),()=>{a.delete(y)})},s.skipHydration||m(),d||f},xx=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((gx?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),vx(t,e)):wx(t,e),Qg=xx,kx={name:"std.fp",cts:"std",uts:"lxqe14jw",content:`(\r
  (>x x)                               >force\r
  (>x <x <x)                           >dup\r
  (>_)                                 >drop\r
  (>x >y <x <y)                        >swap\r
\r
  ('())                                >nil\r
  ('() eq)                             >null?\r
\r
  (>x x cswap >_ >x x)                 >if\r
  (>f >t >c >fn <f <t <c fn)           >endif\r
\r
  (>f (>x (<x x) f) dup force)         >Y\r
  (>g (<g Y))                          >rec\r
\r
  (tag 1 eq)                           >atom?\r
  (tag 2 eq)                           >num?\r
  (tag 3 eq)                           >pair?\r
\r
  ;; bitwise ops\r
\r
  ;; >b-nor is primitive\r
  (dup b-nor swap dup b-nor b-nor)     >b-and\r
  (b-nor dup b-nor)                    >b-or\r
  (dup b-nor)                          >b-not\r
\r
  ;; List\r
\r
  (\r
    >thing\r
    <if (<thing tag 0 eq)\r
      #t\r
      (\r
        <if (<thing tag 3 eq)\r
          #t\r
          '()\r
        endif\r
      )\r
    endif\r
  )                                    >list?\r
\r
  ; length [ list -> num ]\r
  (\r
    >self >list\r
    <if (<list null?)\r
      0\r
      (<list cdr self 1 +)\r
    endif\r
  ) rec                                >length\r
\r
  ; explode [ list[n] -> n[ val ] ]\r
  (\r
    >self >list\r
    <if (<list null?)\r
      ()\r
      (<list cdr self <list car)\r
    endif\r
  ) rec                                >explode\r
\r
  ; implode [ n n[ val ] -> list[n] ]\r
  (\r
    >self >n\r
    <if (0 <n eq)\r
      nil\r
      (>tmp <n 1 - self <tmp cons)\r
    endif\r
  ) rec                                >implode\r
\r
  ;; Dictionary\r
\r
  (\r
    >maybe-dict\r
    <if (<maybe-dict pair?)\r
      (\r
        <if (<maybe-dict car pair?)\r
          (\r
            <if (<maybe-dict car car atom?)\r
              #t\r
              '()\r
            endif\r
          )\r
          '()\r
        endif\r
      )\r
      '()\r
    endif\r
  )                                    >dict?\r
\r
  ; dict-get [ key dict -> value? ]\r
  (\r
    >self >key >dict\r
    <if (<dict null?)\r
      nil\r
      (\r
        <if (<dict car car <key eq)\r
          (<dict car cdr)\r
          (<dict cdr <key self)\r
        endif\r
      )\r
    endif\r
  ) rec                                >dict-get\r
\r
  ; dict-set [ value key dict -> dict ]\r
  (\r
    >self >dict >key >value\r
  ) rec                                >dict-set\r
\r
  (\r
    \r
  ) rec >dict-nil\r
\r
  ;; String\r
\r
  (tag 6 eq)                           >string?\r
\r
)`},Sx={name:"tutorial.fp",cts:"tutorial",uts:"lxqe14jw",content:`(\r
  ;; This tutorial is adapted from (https://github.com/xorvoid/forsp)\r
\r
  ; Welcome to Forsp: A Forth+Lisp Hybrid Lambda Calculus Language\r
  ;\r
  ; As you can see, comment lines always start with the ';' semicolon character.\r
  ; Also, all code is inside () braces. Actually, all code is an S-Expression, but\r
  ; if you don't understand what that means, it's okay.\r
  ;\r
  ; In Forsp, we have a value stack. We can print it out as follows:\r
\r
  stack print ; ()\r
\r
  ; This should print a pair of parenthesis which means that the stack is empty.\r
  ; Let's put something on the stack\r
\r
  5\r
\r
  ; And now let's print the stack again\r
\r
  stack print ; (5)\r
\r
  ; Now we have something! Let's put on a few more numbers\r
\r
  4 3\r
\r
  ; Now we have something! Let's put on a few more numbers\r
\r
  stack print ; (3 4 5)\r
\r
  ; A stack is LIFO order, or Last-In-First-Off. This means that the next value\r
  ; to be removed from the stack will be 3. Let's "print" and find out.\r
\r
  print        ; 3\r
  stack print  ; (4 5)\r
\r
  ; Checks out!\r
  ; Let's try arithmetic!\r
\r
  * print     ; 20\r
  stack print ; ()\r
\r
  ; The * operation multiplies the top-two values on the stack and then pushes\r
  ; it back to stack. Then "print" prints the value, leaving the stack empty.\r
\r
  ; Sometimes working only with stack values is challenging. Luckily Forsp \r
  ; has variables as well. We can POP the stack and store to a variable as \r
  ; follows:\r
\r
  5 >my-variable\r
  stack print ; ()\r
\r
  ; Now "my-variable" is bound to 5. To PUSH a value onto the stack from a \r
  ; variable we can do the following:\r
\r
  <my-variable\r
  stack print ; (5)\r
  >_\r
  \r
  ; Coolio. Notice that we bound the variable "_" to remove the value from the \r
  ; stack. Now, say we wanted to square "my-variable". we could to the following:\r
\r
  <my-variable <my-variable * print ; 25\r
\r
  ; Forsp also has function abstraction. They are simply () parenthesis grouping.\r
\r
  (>x <x <x *)\r
  stack print  ; (CLOSURE<(quote x pop quote x push quote x push *)>)\r
\r
  ; What's this scary value on the stack now? When we build a function with (), \r
  ; it forms a lexical closure around the current environment. If you prefer, \r
  ; you can just think of "CLOSURE" as a "callable function value".\r
\r
  ; Fair enough, but how do we call it? As it turns out "print" and "stack" are \r
  ; both functions. To call a function in Forsp, you simply write the function's\r
  ; name. But, our function has no name yet. So, let's give it one by popping it \r
  ; and binding to a variable name!\r
\r
  >square\r
\r
  ; And lets call it on an argument:\r
\r
  6 square\r
  stack print ; 36\r
\r
  ; How cool! It should be easy enough to understand the function definition: \r
  ; ($x ^x ^x *). Pop and bind "x". Push "x". Push "x" again. Call the "*" function.\r
\r
  ; Sometimes you need to refer to some data that you don't want evaluated.\r
  ; For this, you can simply quote the value:\r
\r
  'something\r
  '(1 2 3)\r
  '(abc (1 foo) ())\r
  stack print ;  ((abc (1 foo) ()) (1 2 3) something 36)\r
\r
  ; You can also write "quote" verbosely:\r
\r
  quote other\r
  stack print ; (other (abc (1 foo) ()) (1 2 3) something 36)\r
\r
  ; Let's define another function to remove values for the stack, and use it\r
  ; to cleanup the stack\r
\r
  (>_) >drop\r
  drop drop drop drop drop\r
\r
  ; Believe it or now, this is ALL of Forsp's syntax and semantics!\r
\r
\r
  ; Forsp has only a small number of built-in function primitives:\r
  ; ---------------------------------------------------------------\r
  ;\r
  ;   CORE: Primitives needed to self-implement\r
  ;\r
  ;     primitive [args]          |  description                                      | example usage\r
  ;     --------------------------|---------------------------------------------------|--------------\r
  ;     push  [$name]             |  resolve "name" in environment and push           | 'foo push\r
  ;     pop   [$name $val]        |  bind "val" to "name" in environment              | 'foo pop\r
  ;     eq    [$a $b]             |  if "a" and "b" are equal, then "t", else "()"    | 'a 'b eq\r
  ;     cons  [$fst $snd]         |  construct a pair from "fst" and "snd"            | '(2 3) 1 cons\r
  ;     car   [$pair]             |  extract the first element of a pair              | '(1 2 3) car\r
  ;     cdr   [$pair]             |  extract the second element of a pair             | '(1 2 3) cdr\r
  ;     cswap [$cond $a $b]       |  if cond is "t" then perform a swap               | 1 2 't cswap\r
  ;     tag   [$obj]              |  query the type-tag of any object                 | ^tag tag\r
  ;     read  []                  |  read an s-expression from input data             | read\r
  ;     print [$obj]              |  print an object as an s-expression               | '(foo bar) print\r
  ;\r
  ;   EXTRA: Additional primitives that are not strictly needed by useful to have\r
  ;\r
  ;     primitive [args]          |  description                                      | example usage\r
  ;     --------------------------|---------------------------------------------------|--------------\r
  ;     stack                     |  push the "stack" onto the stack: cons'ing self   | stack\r
  ;     env                       |  push the "env" onto the stack                    | env\r
  ;     -    [$b $a]              |  push the result of "a-b" (subtraction)           | 3 2 -\r
  ;     *    [$b $a]              |  push the result of "a*b" (multiply)              | 3 2 *\r
  ;     nand [$b $a]              |  push the result of "~(a&b)" (bitwise nand)       | 3 2 nand\r
  ;     <<   [$b $a]              |  push the result of "a<<b" (signed left-shift)    | 3 2 <<\r
  ;     >>   [$b $a]              |  push the result of "a>>b" (signed right-shift)   | 3 2 >>\r
\r
  ; And that's all the primitives!\r
  ; From just this, we can implement effectively anything, and we more ease than \r
  ; you'd guess.\r
\r
  ; Let's implement some common functions:\r
\r
  (>x <x <x) >dup\r
\r
  ; This function duplicates the top-of the stack. We can now square numbers as \r
  ; follows:\r
\r
  7 dup * print ; 49\r
\r
  ; Here are a handful of stack manipulation functions:\r
\r
  (>x >y <x <y) >swap\r
  (>x >y <y <x <y) >over\r
  (>x >y >z <y <x <z) >rot\r
\r
  ; Let's demonstrate them by example:\r
\r
  9 8 7 stack print  ; (7 8 9)\r
  swap stack print   ; (8 7 9)\r
  over stack print   ; (7 8 7 9)\r
  drop stack print   ; (8 7 9)\r
  rot stack print    ; (9 8 7)\r
  drop drop drop\r
\r
  ; Arithmetic works in Reverse Polish Notation\r
\r
  4 5 + 2 * 2 - print ; 16\r
\r
  ; Another useful function is "force". We can use this function to force \r
  ; computation of a function on the stack:\r
\r
  (>x x) >force\r
\r
  ; And here's an example of usage, forcing a function without naming it:\r
\r
  (dup *) 8 swap force print ; 64\r
\r
  ; We can also define control structures such as if-statements\r
\r
  (>cond >true >false cond <false <true rot cswap drop force) >if\r
\r
  (5) (4) '#t if print ; 4\r
  (5) (4) '() if print ; 5\r
\r
  ; Writing if-statements backwards is tricky, so we can fix it by defining \r
  ; "endif" which will flip the arguments:\r
\r
  (>false >true >cond >if <false <true <cond if) >endif\r
\r
  ; Now we can write:\r
\r
  <if (1 2 eq)\r
    ("true" print)\r
    ("false" print) ; false\r
  endif\r
\r
  <if (1 1 eq)\r
    ("true" print) ; true\r
    ("false" print)\r
  endif\r
\r
  ; Finally, we'll finish with recursion. Forsp uses the Y-Combinator for recursion\r
\r
  (>f (>x (<x x) f) dup force) >Y\r
\r
  ; We'll also implement a wrapper called "rec" that performs the application Y\r
\r
  (>g (<g Y)) >rec\r
\r
  ; Now we can implement recursive functions:\r
\r
  (>self >list\r
    <if (<list '() eq) \r
      0 \r
      (<list cdr self 1 +)\r
    endif\r
  ) rec >length\r
\r
  '()      length print ; 0\r
  '(5)     length print ; 1\r
  '(8 9)   length print ; 2\r
  '(1 2 3) length print ; 3\r
\r
  ; This concludes the tutorial. You're encouraged to explore the examples to \r
  ; learn more!\r
)`},Cx={name:"extensions.fp",cts:"extensions",uts:"lxqe14jx",content:`(\r
  ;; Differences found in the forsp-js implementation\r
\r
  ; truth is represented by #t instead of just t, following Scheme convention\r
\r
  3 4 + 7 eq print ; #t\r
\r
  ; All numbers follow JS number semantics\r
\r
  4.765 print;\r
\r
  ; No low-level memory unsafe operations\r
\r
  ;; The following are extensions provided by forsp-js , not available in the \r
  ;; original C implementation\r
\r
  ; String values in double quotes\r
\r
  "Hello world" print;\r
\r
  ; import* statement executes another Forsp script file with the given name and \r
  ; appends the env created by that file into the current env. There is no protection\r
  ; against recursive import, so you are free to blow your own stack.\r
\r
  "./std" import*\r
\r
  "hello world" string? print; #t\r
\r
  ; import statement executes another Forsp script file with the given name and\r
  ; pushes a dictionary containing the env created by that file onto the stack.\r
  ; Again, no protection against recursive import.\r
\r
  "./std" import >std\r
\r
  ; A dictionary is an ordered list of key-value pairs built from cons shells.\r
  ; Since this data structure is so commonly used in many programming tasks,\r
  ; there is a special syntax to access its value.\r
\r
  "hello world"\r
  @(std string?)  ; <-- dictionary get syntax\r
  force print ;  #t\r
\r
  ; the above expression desugars into:\r
\r
  "hello world"\r
  <std 'string? dict-get\r
  force print ; #t\r
\r
  ; since dict-get is defined in "std.fp" , the above syntax is only valid after\r
  ; a \`"./std" import*\`\r
\r
)`},bx={std:kx,tutorial:Sx,extensions:Cx},ur=Yg()(Qg(()=>bx,{name:`${Gg}-files`})),Nh=["std","tutorial","extensions"];function Ex(){return ur(t=>Object.entries(t).filter(([e,n])=>!Nh.includes(e)&&typeof n<"u").length)}function Xg(){return Nh}function Jg(){return ur(mx(t=>Object.entries(t).filter(([e,n])=>!Nh.includes(e)&&typeof n<"u").map(([e])=>e)))}function xr(t){return ur(e=>e[t])}function Lh(){return G.useCallback(t=>{t.uts?ur.setState({[t.cts]:{...t,uts:t.uts??Date.now().toString(36)}}):ur.setState({[t.cts]:void 0})},[])}function Mx(t){var e,n;return(n=(e=Object.entries(ur.getState()).find(([i,r])=>r.name===t))==null?void 0:e[1])==null?void 0:n.content}function Ax(t){return window.matchMedia(t).matches}function Tx(t,e){const n=window.matchMedia(e);return n.addEventListener("change",t),()=>{n.removeEventListener("change",t)}}function Zg(t,e=!1){return G.useSyncExternalStore(G.useCallback(n=>Tx(n,t),[t]),()=>Ax(t),()=>e)}function pn({as:t="div",children:e,className:n,...i}){return i.display="flex",G.createElement(t,{className:n,style:i},e)}function mi({as:t="div",children:e,className:n,...i}){return i.display="grid",G.createElement(t,{className:n,style:i},e)}function Ot({as:t="div",children:e,className:n,...i}){return G.createElement(t,{className:n,style:i},e)}function Ox(){return E.jsx("span",{className:"material-icons-outlined",children:"arrow_drop_down"})}function Rh(){return E.jsx("span",{className:"material-icons-outlined",children:"close"})}function Px(){return E.jsx("span",{className:"material-icons-outlined",children:"more_vert"})}function Dx(){return E.jsx("span",{className:"material-icons-outlined",children:"add"})}function Nx(){return E.jsx("span",{className:"material-icons-outlined",children:"done"})}function Lx(){return E.jsx("span",{className:"material-icons-outlined",children:"play_arrow"})}const Rx="_container_1u718_1",Qi={container:Rx,"file-item-row":"_file-item-row_1u718_13","file-item-button":"_file-item-button_1u718_29","file-item-button-active":"_file-item-button-active_1u718_31","file-item-more":"_file-item-more_1u718_59"},e0=Yg()(Qg(()=>({tutorial:{fileId:"tutorial",row:0,column:0,active:!0,seq:1}}),{name:`${Gg}-editors`}));function kr(){return e0(t=>Object.values(t)[0])}function Ih(){return G.useCallback(t=>{e0.setState({[t.fileId]:t},!0)},[])}const ud=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,cd=(...t)=>t.flat(1/0).filter(Boolean).join(" "),t0=(t,e)=>n=>{var a;if((e==null?void 0:e.variants)==null)return cd(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:r}=e,s=Object.keys(i).map(u=>{const c=n==null?void 0:n[u],h=r==null?void 0:r[u];if(c===null)return null;const f=ud(c)||ud(h);return i[u][f]}),o=n&&Object.entries(n).reduce((u,[c,h])=>(h===void 0||(u[c]=h),u),{}),l=(a=e==null?void 0:e.compoundVariants)==null?void 0:a.reduce((u,{class:c,className:h,...f})=>Object.entries(f).every(([d,m])=>Array.isArray(m)?m.includes({...r,...o}[d]):{...r,...o}[d]===m)?[...u,c,h]:u,[]);return cd(t,s,l,n==null?void 0:n.class,n==null?void 0:n.className)},Ix="_base_1gs7k_1",_x="_bold_1gs7k_35",Bx="_active_1gs7k_49",Fx="_soft_1gs7k_63",zx="_tab_1gs7k_91",jx="_line_1gs7k_159",Hx="_text_1gs7k_189",Vx="_small_1gs7k_209",Wx="_regular_1gs7k_227",$x="_large_1gs7k_245",Ux="_center_1gs7k_263",Kx="_start_1gs7k_271",qx="_end_1gs7k_279",st={base:Ix,bold:_x,active:Bx,soft:Fx,tab:zx,line:jx,text:Hx,small:Vx,regular:Wx,large:$x,center:Ux,start:Kx,end:qx},mt=t0(st.base,{variants:{kind:{bold:st.bold,soft:st.soft,line:st.line,text:st.text,tab:st.tab},size:{small:st.small,regular:st.regular,large:st.large},justifyContent:{center:st.center,start:st.start,end:st.end},active:{true:st.active,false:""}},defaultVariants:{kind:"soft",size:"regular",justifyContent:"center",active:!1}});function n0(t=!1){return G.useReducer(Yx,t)}function Yx(t){return!t}const Gx={padding:"0px",border:"none",width:"100vw",backgroundColor:"transparent"};function Qx({open:t,onClose:e,children:n}){const i=G.useRef(null);return G.useEffect(()=>{var r,s;t?(r=i.current)==null||r.showModal():(s=i.current)==null||s.close()},[t]),G.useEffect(()=>{if(!e)return;const r=i.current;if(r)return r.addEventListener("close",e),()=>{r.removeEventListener("close",e)}},[e]),G.useEffect(()=>{const r=i.current;if(!r)return;const s=o=>{const l=r.getBoundingClientRect();if(!l)return;Xx(l,o)||r.close()};return r.addEventListener("click",s),()=>{r.removeEventListener("click",s)}},[]),E.jsx("dialog",{ref:i,style:Gx,children:n})}function Xx(t,e){return t.top<=e.clientY&&e.clientY<=t.top+t.height&&t.left<=e.clientX&&e.clientX<=t.left+t.width}const Jx={display:"flex",justifyContent:"flex-end",gap:"var(--sp-2)"};function Zx({children:t}){return E.jsx("div",{style:Jx,children:t})}const ek="_base_1rb7x_1",tk="_white_1rb7x_9",nk="_back_1rb7x_19",ik="_conBack_1rb7x_31",rk="_xs_1rb7x_41",sk="_sm_1rb7x_51",ok="_md_1rb7x_61",lk="_lg_1rb7x_71",ak="_tabPanel_1rb7x_81",Zt={base:ek,white:tk,back:nk,conBack:ik,xs:rk,sm:sk,md:ok,lg:lk,tabPanel:ak},i0=t0(Zt.base,{variants:{kind:{white:Zt.white,back:Zt.back,conBack:Zt.conBack,front:"",conFront:""},maxWidth:{auto:"",xs:Zt.xs,sm:Zt.sm,md:Zt.md,lg:Zt.lg},padding:{0:"pad-0",1:"pad-1",2:"pad-2",3:"pad-3",4:"pad-4",5:"pad-5"},tabPanel:{true:Zt.tabPanel,false:""}},defaultVariants:{kind:"back",maxWidth:"auto",padding:2,tabPanel:!1}});function hd({children:t}){const[e,n]=n0();return t(e,n)}function uk({label:t,hint:e,layout:n,...i}){const r=typeof t=="string"?E.jsx("span",{children:t}):t,s=typeof e=="string"?E.jsx("span",{style:{fontSize:"0.9em",color:"var(--c-con-7)"},children:e}):e;return E.jsxs("label",{style:n=="freeform"?{display:"contents"}:n=="horizontal"?{display:"grid",gridTemplateColumns:"auto 1fr",columnGap:"var(--sp-1)",alignItems:"baseline"}:{display:"grid"},children:[r,s,E.jsx("input",{...i})]})}G.createContext(null);function ck(t,e="application/json"){const[n,i]=G.useState("");return G.useEffect(()=>{const r=new Blob([t],{type:e}),s=URL.createObjectURL(r);return i(s),()=>{URL.revokeObjectURL(s),i("")}},[t,e]),n}function fd(t){return new Date(Number.parseInt(t,36))}function r0({fileId:t}){const e=xr(t),n=Ih(),i=kr();return E.jsx(pn,{className:Qi["file-item-row"],children:E.jsx("button",{className:Qi[i.fileId===t?"file-item-button-active":"file-item-button"],onClick:()=>{i.fileId!==t&&n({fileId:t,row:0,column:0,active:!0,seq:1})},children:e.name})})}function s0({fileId:t}){const e=xr(t),n=Ih(),i=kr();return e?E.jsxs(pn,{className:Qi["file-item-row"],children:[E.jsx("button",{className:Qi[i.fileId===t?"file-item-button-active":"file-item-button"],onClick:()=>{i.fileId!==t&&n({fileId:t,row:0,column:0,active:!0,seq:1})},children:e.name}),E.jsx(Ot,{flexGrow:1}),E.jsx(hk,{fileId:t,children:E.jsx("button",{className:mt({className:Qi["file-item-more"],kind:"text",size:"small"}),children:E.jsx(Px,{})})})]}):null}function hk({fileId:t,children:e}){const n=xr(t),i=Lh(),[r,s]=n0(),o=ck(n.content,"text/plain");return E.jsxs(E.Fragment,{children:[G.cloneElement(e,{onClick:s}),E.jsx(Qx,{open:r,onClose:()=>{r&&s()},children:E.jsxs("div",{className:i0({maxWidth:"sm"}),children:[E.jsx("h2",{children:n.name}),E.jsx("p",{children:E.jsxs(Ot,{as:"span",fontSize:"small",fontStyle:"italic",children:["Created on ",fd(n.cts).toLocaleDateString(),", last updated on ",fd(n.uts).toLocaleDateString()]})}),E.jsx(hd,{children:(l,a)=>l?E.jsx("form",{onSubmit:u=>{u.preventDefault(),u.stopPropagation();let h=u.target.filename.value;h.endsWith(".fp")||(h=h+".fp"),i({name:h,cts:n.cts,uts:Date.now().toString(36),content:n.content}),a()},children:E.jsxs(pn,{marginBlockEnd:"var(--sp-2)",gap:"1px",children:[E.jsx(uk,{size:"40",autoFocus:!0,name:"filename",defaultValue:n.name}),E.jsx("button",{type:"button",className:mt({kind:"soft"}),onClick:a,children:E.jsx(Rh,{})}),E.jsx("button",{className:mt({kind:"soft"}),children:E.jsx(Nx,{})})]})}):E.jsx("p",{children:E.jsx("button",{type:"button",className:mt({kind:"text"}),onClick:a,children:"edit file name"})})}),E.jsx("p",{children:E.jsx("a",{className:mt({kind:"text"}),download:n.name,href:o,children:"download file"})}),E.jsx("p",{children:E.jsx(hd,{children:(l,a)=>l?E.jsxs(E.Fragment,{children:[E.jsx("span",{children:"Confirm permanently delete this file?"}),"",E.jsx("button",{className:mt({kind:"soft"}),onClick:()=>{i({cts:n.cts}),a()},children:"delete"})]}):E.jsx("button",{className:mt({kind:"text"}),onClick:a,children:"delete file"})})}),E.jsx(Zx,{children:E.jsx("button",{className:mt({kind:"text"}),onClick:s,children:"close"})})]})})]})}const fk=`(
  stack print;
)`;function o0(){const t=Ex(),e=Lh(),n=Ih();return E.jsxs("button",{className:mt({kind:"line",size:"small"}),onClick:()=>{const i=Date.now().toString(36);e({name:`new-file-${t+1}.fp`,cts:i,uts:i,content:fk}),n({fileId:i,row:0,column:0,active:!0,seq:0})},children:[E.jsx(Dx,{}),E.jsx("span",{children:"new file"})]})}function dk(){const t=Zg("(min-width:640px)");return E.jsx("div",{className:Qi.container,children:t?E.jsx(pk,{}):E.jsx(mk,{})})}function pk(){const t=Xg(),e=Jg();return E.jsxs(pn,{height:"100%",flexDirection:"column",children:[E.jsx(Ot,{as:"h1",children:"Forsp Web Editor"}),E.jsxs("div",{children:[E.jsx("a",{href:"https://github.com/AliceCengal/forsp-web",children:"[ Github ]"}),"",E.jsx("a",{href:"https://github.com/xorvoid/forsp",children:"[ origin ]"})]}),E.jsx("hr",{}),E.jsx(Ot,{as:"div",textAlign:"center",fontSize:"small",marginBlockStart:"-18px",children:"built-ins"}),E.jsx(mi,{gap:"var(--sp-0_5)",children:t.map(n=>E.jsx(r0,{fileId:n},n))}),E.jsx("hr",{}),E.jsx(Ot,{as:"div",textAlign:"center",fontSize:"small",marginBlockStart:"-18px",children:"user files"}),E.jsx(mi,{gap:"var(--sp-0_5)",paddingBlock:"var(--sp-1)",overflowY:"auto",overflowX:"hidden",children:e.map(n=>E.jsx(s0,{fileId:n},n))}),E.jsx(mi,{children:E.jsx(o0,{})})]})}function mk(){const t=Xg(),e=Jg();return E.jsxs("details",{children:[E.jsxs(pn,{as:"summary",children:[E.jsx(Ot,{as:"h1",margin:"0",children:"Forsp Web Editor"}),E.jsxs(Ot,{flexGrow:"1",children:[E.jsx("a",{href:"https://github.com/AliceCengal/forsp-web",children:"[ Github ]"}),"",E.jsx("a",{href:"https://github.com/xorvoid/forsp",children:"[ origin ]"})]}),E.jsx(Ox,{})]}),E.jsxs(pn,{height:"100%",flexDirection:"column",children:[E.jsx("hr",{}),E.jsx(Ot,{as:"div",textAlign:"center",fontSize:"small",marginBlockStart:"-18px",children:"built-ins"}),E.jsx(mi,{gap:"var(--sp-0_5)",children:t.map(n=>E.jsx(r0,{fileId:n},n))}),E.jsx("hr",{}),E.jsx(Ot,{as:"div",textAlign:"center",fontSize:"small",marginBlockStart:"-18px",children:"user files"}),E.jsx(mi,{gap:"var(--sp-0_5)",paddingBlock:"var(--sp-1)",overflowY:"auto",overflowX:"hidden",children:e.map(n=>E.jsx(s0,{fileId:n},n))}),E.jsx(mi,{children:E.jsx(o0,{})})]})]})}const gk={"editor-container":"_editor-container_1twjj_1"};function yk(){return E.jsx(pn,{paddingInline:"var(--sp-2)",height:"var(--sp-4)",alignItems:"flex-end",children:E.jsx(vk,{})})}function vk(){const t=kr(),e=xr(t==null?void 0:t.fileId);return E.jsxs(pn,{alignItems:"center",children:[E.jsx("span",{children:(e==null?void 0:e.name)??""}),"",E.jsx("button",{className:mt({kind:"text",size:"small"}),style:{display:"none"},children:E.jsx(Rh,{})})]})}const wk="modulepreload",xk=function(t){return"/forsp-web/"+t},dd={},kk=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.all(n.map(l=>{if(l=xk(l),l in dd)return;dd[l]=!0;const a=l.endsWith(".css"),u=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":wk,a||(c.as="script",c.crossOrigin=""),c.href=l,o&&c.setAttribute("nonce",o),document.head.appendChild(c),a)return new Promise((h,f)=>{c.addEventListener("load",h),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}return r.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function Sk(t){const e=G.useRef(null);return G.useLayoutEffect(()=>{e.current=t}),G.useCallback((...n)=>{const i=e.current;return i(...n)},[])}function Ck(t,{delay:e,onChange:n}){const[i,r]=G.useState(t),[s,o]=G.useState(t),l=Sk(()=>{o(i),n&&n(i)});return G.useEffect(()=>{const a=setTimeout(l,e);return()=>{clearTimeout(a)}},[i]),[i,r,s]}function Sl(){return Sl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Sl.apply(null,arguments)}const bk=1024;let Ek=0,Ra=class{constructor(e,n){this.from=e,this.to=n}};class Y{constructor(e={}){this.id=Ek++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ct.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}Y.closedBy=new Y({deserialize:t=>t.split(" ")});Y.openedBy=new Y({deserialize:t=>t.split(" ")});Y.group=new Y({deserialize:t=>t.split(" ")});Y.isolate=new Y({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Y.contextHash=new Y({perNode:!0});Y.lookAhead=new Y({perNode:!0});Y.mounted=new Y({perNode:!0});class Cl{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[Y.mounted.id]}}const Mk=Object.create(null);class Ct{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):Mk,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Ct(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Y.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(Y.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}Ct.none=new Ct("",Object.create(null),0,8);const co=new WeakMap,pd=new WeakMap;var De;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(De||(De={}));class je{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=Cl.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new qu(this.topNode,e)}cursorAt(e,n=0,i=0){let r=co.get(this)||this.topNode,s=new qu(r);return s.moveTo(e,n),co.set(this,s._tree),s}get topNode(){return new xt(this,0,0,null)}resolve(e,n=0){let i=Es(co.get(this)||this.topNode,e,n,!1);return co.set(this,i),i}resolveInner(e,n=0){let i=Es(pd.get(this)||this.topNode,e,n,!0);return pd.set(this,i),i}resolveStack(e,n=0){return Ok(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,l=(o&De.IncludeAnonymous)>0;for(let a=this.cursor(o|De.IncludeAnonymous);;){let u=!1;if(a.from<=s&&a.to>=r&&(!l&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:Fh(Ct.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new je(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new je(Ct.none,n,i,r)))}static build(e){return Pk(e)}}je.empty=new je(Ct.none,[],[],0);class _h{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new _h(this.buffer,this.index)}}class Kn{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Ct.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,l=-1;for(let a=e;a!=n&&!(l0(s,r,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let l=e,a=0;l<n;){s[a++]=r[l++],s[a++]=r[l++]-i;let u=s[a++]=r[l++]-i;s[a++]=r[l++]-e,o=Math.max(o,u)}return new Kn(s,o,this.set)}}function l0(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function Es(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof xt&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:De.IgnoreOverlays;if(i)for(let o=t,l=o.parent;l;o=l,l=o.parent)o instanceof xt&&o.index<0&&((r=l.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=l);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class a0{cursor(e=0){return new qu(this,e)}getChild(e,n=null,i=null){let r=md(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return md(this,e,n,i)}resolve(e,n=0){return Es(this,e,n,!1)}resolveInner(e,n=0){return Es(this,e,n,!0)}matchContext(e){return Ku(this,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class xt extends a0{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,u=n>0?l.length:-1;e!=u;e+=n){let c=l[e],h=a[e]+o.from;if(l0(r,i,h,h+c.length)){if(c instanceof Kn){if(s&De.ExcludeBuffers)continue;let f=c.findChild(0,c.buffer.length,n,i-h,r);if(f>-1)return new Dn(new Ak(o,c,e,h),null,f)}else if(s&De.IncludeAnonymous||!c.type.isAnonymous||Bh(c)){let f;if(!(s&De.IgnoreMounts)&&(f=Cl.get(c))&&!f.overlay)return new xt(f.tree,h,e,o);let d=new xt(c,h,e,o);return s&De.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(n<0?c.children.length-1:0,n,i,r)}}}if(s&De.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&De.IgnoreOverlays)&&(r=Cl.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:l}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?l>=s:l>s))return new xt(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function md(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function Ku(t,e,n=e.length-1){for(let i=t.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class Ak{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class Dn extends a0{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new Dn(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&De.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Dn(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Dn(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Dn(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new je(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function u0(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let i=n instanceof xt&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new Tk(r,n)}class Tk{constructor(e,n){this.heads=e,this.node=n}get next(){return u0(this.heads)}}function Ok(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof xt?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,n)),s=o}else{let o=Cl.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new xt(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(Es(l,e,n,!1))}}return r?u0(r):i}class qu{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof xt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof xt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&De.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&De.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&De.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&De.IncludeAnonymous||l instanceof Kn||!l.type.isAnonymous||Bh(l))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new Dn(this.buffer,n,this.stack[r]);return this.bufferNode=new Dn(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&n&&n(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return Ku(this.node,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return Ku(this.node,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function Bh(t){return t.children.some(e=>e instanceof Kn||!e.type.isAnonymous||Bh(e))}function Pk(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=bk,reused:s=[],minRepeatType:o=i.types.length}=t,l=Array.isArray(n)?new _h(n,n.length):n,a=i.types,u=0,c=0;function h(S,b,C,M,_,P){let{id:F,start:z,end:U,size:W}=l,se=c;for(;W<0;)if(l.next(),W==-1){let R=s[F];C.push(R),M.push(z-S);return}else if(W==-3){u=F;return}else if(W==-4){c=F;return}else throw new RangeError(`Unrecognized record size: ${W}`);let be=a[F],Ee,T,B=z-S;if(U-z<=r&&(T=w(l.pos-b,_))){let R=new Uint16Array(T.size-T.skip),$=l.pos-T.size,Z=R.length;for(;l.pos>$;)Z=p(T.start,R,Z);Ee=new Kn(R,U-T.start,i),B=T.start-S}else{let R=l.pos-W;l.next();let $=[],Z=[],pt=F>=o?F:-1,Ge=0,wn=U;for(;l.pos>R;)pt>=0&&l.id==pt&&l.size>=0?(l.end<=wn-r&&(m($,Z,z,Ge,l.end,wn,pt,se),Ge=$.length,wn=l.end),l.next()):P>2500?f(z,R,$,Z):h(z,R,$,Z,pt,P+1);if(pt>=0&&Ge>0&&Ge<$.length&&m($,Z,z,Ge,z,wn,pt,se),$.reverse(),Z.reverse(),pt>-1&&Ge>0){let Bt=d(be);Ee=Fh(be,$,Z,0,$.length,0,U-z,Bt,Bt)}else Ee=y(be,$,Z,U-z,se-U)}C.push(Ee),M.push(B)}function f(S,b,C,M){let _=[],P=0,F=-1;for(;l.pos>b;){let{id:z,start:U,end:W,size:se}=l;if(se>4)l.next();else{if(F>-1&&U<F)break;F<0&&(F=W-r),_.push(z,U,W),P++,l.next()}}if(P){let z=new Uint16Array(P*4),U=_[_.length-2];for(let W=_.length-3,se=0;W>=0;W-=3)z[se++]=_[W],z[se++]=_[W+1]-U,z[se++]=_[W+2]-U,z[se++]=se;C.push(new Kn(z,_[2]-U,i)),M.push(U-S)}}function d(S){return(b,C,M)=>{let _=0,P=b.length-1,F,z;if(P>=0&&(F=b[P])instanceof je){if(!P&&F.type==S&&F.length==M)return F;(z=F.prop(Y.lookAhead))&&(_=C[P]+F.length+z)}return y(S,b,C,M,_)}}function m(S,b,C,M,_,P,F,z){let U=[],W=[];for(;S.length>M;)U.push(S.pop()),W.push(b.pop()+C-_);S.push(y(i.types[F],U,W,P-_,z-P)),b.push(_-C)}function y(S,b,C,M,_=0,P){if(u){let F=[Y.contextHash,u];P=P?[F].concat(P):[F]}if(_>25){let F=[Y.lookAhead,_];P=P?[F].concat(P):[F]}return new je(S,b,C,M,P)}function w(S,b){let C=l.fork(),M=0,_=0,P=0,F=C.end-r,z={size:0,start:0,skip:0};e:for(let U=C.pos-S;C.pos>U;){let W=C.size;if(C.id==b&&W>=0){z.size=M,z.start=_,z.skip=P,P+=4,M+=4,C.next();continue}let se=C.pos-W;if(W<0||se<U||C.start<F)break;let be=C.id>=o?4:0,Ee=C.start;for(C.next();C.pos>se;){if(C.size<0)if(C.size==-3)be+=4;else break e;else C.id>=o&&(be+=4);C.next()}_=Ee,M+=W,P+=be}return(b<0||M==S)&&(z.size=M,z.start=_,z.skip=P),z.size>4?z:void 0}function p(S,b,C){let{id:M,start:_,end:P,size:F}=l;if(l.next(),F>=0&&M<o){let z=C;if(F>4){let U=l.pos-(F-4);for(;l.pos>U;)C=p(S,b,C)}b[--C]=z,b[--C]=P-S,b[--C]=_-S,b[--C]=M}else F==-3?u=M:F==-4&&(c=M);return C}let g=[],v=[];for(;l.pos>0;)h(t.start||0,t.bufferStart||0,g,v,-1,0);let k=(e=t.length)!==null&&e!==void 0?e:g.length?v[0]+g[0].length:0;return new je(a[t.topID],g.reverse(),v.reverse(),k)}const gd=new WeakMap;function Vo(t,e){if(!t.isAnonymous||e instanceof Kn||e.type!=t)return 1;let n=gd.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof je)){n=1;break}n+=Vo(t,i)}gd.set(e,n)}return n}function Fh(t,e,n,i,r,s,o,l,a){let u=0;for(let m=i;m<r;m++)u+=Vo(t,e[m]);let c=Math.ceil(u*1.5/8),h=[],f=[];function d(m,y,w,p,g){for(let v=w;v<p;){let k=v,S=y[v],b=Vo(t,m[v]);for(v++;v<p;v++){let C=Vo(t,m[v]);if(b+C>=c)break;b+=C}if(v==k+1){if(b>c){let C=m[k];d(C.children,C.positions,0,C.children.length,y[k]+g);continue}h.push(m[k])}else{let C=y[v-1]+m[v-1].length-S;h.push(Fh(t,m,y,k,v,S,C,null,a))}f.push(S+g-s)}}return d(e,n,i,r,0),(l||a)(h,f,o)}class gi{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new gi(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,u=0;;l++){let c=l<n.length?n[l]:null,h=c?c.fromA:1e9;if(h-a>=i)for(;o&&o.from<h;){let f=o;if(a>=f.from||h<=f.to||u){let d=Math.max(f.from,a)-u,m=Math.min(f.to,h)-u;f=d>=m?null:new gi(d,m,f.tree,f.offset+u,l>0,!!c)}if(f&&r.push(f),o.to>h)break;o=s<e.length?e[s++]:null}if(!c)break;a=c.toA,u=c.toA-c.toB}return r}}class Dk{startParse(e,n,i){return typeof e=="string"&&(e=new Nk(e)),i=i?i.length?i.map(r=>new Ra(r.from,r.to)):[new Ra(0,0)]:[new Ra(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class Nk{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new Y({perNode:!0});let Lk=0;class $t{constructor(e,n,i){this.set=e,this.base=n,this.modified=i,this.id=Lk++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new $t([],null,[]);if(n.set.push(n),e)for(let i of e.set)n.set.push(i);return n}static defineModifier(){let e=new bl;return n=>n.modified.indexOf(e)>-1?n:bl.get(n.base||n,n.modified.concat(e).sort((i,r)=>i.id-r.id))}}let Rk=0;class bl{constructor(){this.instances=[],this.id=Rk++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(l=>l.base==e&&Ik(n,l.modified));if(i)return i;let r=[],s=new $t(r,e,n);for(let l of n)l.instances.push(s);let o=_k(n);for(let l of e.set)if(!l.modified.length)for(let a of o)r.push(bl.get(l,a));return s}}function Ik(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function _k(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function Bk(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,l=r;for(let h=0;;){if(l=="..."&&h>0&&h+3==r.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!f)throw new RangeError("Invalid path: "+r);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),h+=f[0].length,h==r.length)break;let d=r[h++];if(h==r.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+r);l=r.slice(h)}let a=s.length-1,u=s[a];if(!u)throw new RangeError("Invalid path: "+r);let c=new El(i,o,a>0?s.slice(0,a):null);e[u]=c.sort(e[u])}}return c0.add(e)}const c0=new Y;class El{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}El.empty=new El([],2,null);function h0(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let l of s)for(let a of l.set){let u=n[a.id];if(u){o=o?o+" "+u:u;break}}return o},scope:i}}function Fk(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function zk(t,e,n,i=0,r=t.length){let s=new jk(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class jk{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:l,to:a}=e;if(l>=i||a<=n)return;o.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(o)));let u=r,c=Hk(e)||El.empty,h=Fk(s,c.tags);if(h&&(u&&(u+=" "),u+=h,c.mode==1&&(r+=(r?" ":"")+h)),this.startSpan(Math.max(n,l),u),c.opaque)return;let f=e.tree&&e.tree.prop(Y.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+l,1),m=this.highlighters.filter(w=>!w.scope||w.scope(f.tree.type)),y=e.firstChild();for(let w=0,p=l;;w++){let g=w<f.overlay.length?f.overlay[w]:null,v=g?g.from+l:a,k=Math.max(n,p),S=Math.min(i,v);if(k<S&&y)for(;e.from<S&&(this.highlightRange(e,k,S,r,s),this.startSpan(Math.min(S,e.to),u),!(e.to>=v||!e.nextSibling())););if(!g||v>i)break;p=g.to+l,p>n&&(this.highlightRange(d.cursor(),Math.max(n,g.from+l),Math.min(i,p),"",m),this.startSpan(Math.min(i,p),u))}y&&e.parent()}else if(e.firstChild()){f&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function Hk(t){let e=t.type.prop(c0);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const O=$t.define,ho=O(),Cn=O(),yd=O(Cn),vd=O(Cn),bn=O(),fo=O(bn),Ia=O(bn),Vt=O(),ri=O(Vt),zt=O(),jt=O(),Yu=O(),Dr=O(Yu),po=O(),x={comment:ho,lineComment:O(ho),blockComment:O(ho),docComment:O(ho),name:Cn,variableName:O(Cn),typeName:yd,tagName:O(yd),propertyName:vd,attributeName:O(vd),className:O(Cn),labelName:O(Cn),namespace:O(Cn),macroName:O(Cn),literal:bn,string:fo,docString:O(fo),character:O(fo),attributeValue:O(fo),number:Ia,integer:O(Ia),float:O(Ia),bool:O(bn),regexp:O(bn),escape:O(bn),color:O(bn),url:O(bn),keyword:zt,self:O(zt),null:O(zt),atom:O(zt),unit:O(zt),modifier:O(zt),operatorKeyword:O(zt),controlKeyword:O(zt),definitionKeyword:O(zt),moduleKeyword:O(zt),operator:jt,derefOperator:O(jt),arithmeticOperator:O(jt),logicOperator:O(jt),bitwiseOperator:O(jt),compareOperator:O(jt),updateOperator:O(jt),definitionOperator:O(jt),typeOperator:O(jt),controlOperator:O(jt),punctuation:Yu,separator:O(Yu),bracket:Dr,angleBracket:O(Dr),squareBracket:O(Dr),paren:O(Dr),brace:O(Dr),content:Vt,heading:ri,heading1:O(ri),heading2:O(ri),heading3:O(ri),heading4:O(ri),heading5:O(ri),heading6:O(ri),contentSeparator:O(Vt),list:O(Vt),quote:O(Vt),emphasis:O(Vt),strong:O(Vt),link:O(Vt),monospace:O(Vt),strikethrough:O(Vt),inserted:O(),deleted:O(),changed:O(),invalid:O(),meta:po,documentMeta:O(po),annotation:O(po),processingInstruction:O(po),definition:$t.defineModifier(),constant:$t.defineModifier(),function:$t.defineModifier(),standard:$t.defineModifier(),local:$t.defineModifier(),special:$t.defineModifier()};h0([{tag:x.link,class:"tok-link"},{tag:x.heading,class:"tok-heading"},{tag:x.emphasis,class:"tok-emphasis"},{tag:x.strong,class:"tok-strong"},{tag:x.keyword,class:"tok-keyword"},{tag:x.atom,class:"tok-atom"},{tag:x.bool,class:"tok-bool"},{tag:x.url,class:"tok-url"},{tag:x.labelName,class:"tok-labelName"},{tag:x.inserted,class:"tok-inserted"},{tag:x.deleted,class:"tok-deleted"},{tag:x.literal,class:"tok-literal"},{tag:x.string,class:"tok-string"},{tag:x.number,class:"tok-number"},{tag:[x.regexp,x.escape,x.special(x.string)],class:"tok-string2"},{tag:x.variableName,class:"tok-variableName"},{tag:x.local(x.variableName),class:"tok-variableName tok-local"},{tag:x.definition(x.variableName),class:"tok-variableName tok-definition"},{tag:x.special(x.variableName),class:"tok-variableName2"},{tag:x.definition(x.propertyName),class:"tok-propertyName tok-definition"},{tag:x.typeName,class:"tok-typeName"},{tag:x.namespace,class:"tok-namespace"},{tag:x.className,class:"tok-className"},{tag:x.macroName,class:"tok-macroName"},{tag:x.propertyName,class:"tok-propertyName"},{tag:x.operator,class:"tok-operator"},{tag:x.comment,class:"tok-comment"},{tag:x.meta,class:"tok-meta"},{tag:x.invalid,class:"tok-invalid"},{tag:x.punctuation,class:"tok-punctuation"}]);class J{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=cr(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),Kt.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=cr(this,e,n);let i=[];return this.decompose(e,n,i,0),Kt.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new ts(this),s=new ts(e);for(let o=n,l=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(l+=r.value.length,r.done||l>=i)return!0}}iter(e=1){return new ts(this,e)}iterRange(e,n=this.length){return new f0(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new d0(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?J.empty:e.length<=32?new ye(e):Kt.from(ye.split(e,[]))}}class ye extends J{constructor(e,n=Vk(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],l=r+o.length;if((n?i:l)>=e)return new Wk(r,l,i,o);r=l+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new ye(wd(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),l=Wo(s.text,o.text.slice(),0,s.length);if(l.length<=32)i.push(new ye(l,o.length+s.length));else{let a=l.length>>1;i.push(new ye(l.slice(0,a)),new ye(l.slice(a)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof ye))return super.replace(e,n,i);[e,n]=cr(this,e,n);let r=Wo(this.text,Wo(i.text,wd(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new ye(r,s):Kt.from(ye.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=cr(this,e,n);let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(r+=i),e<a&&n>s&&(r+=l.slice(Math.max(0,e-s),n-s)),s=a+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new ye(i,r)),i=[],r=-1);return r>-1&&n.push(new ye(i,r)),n}}class Kt extends J{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],l=r+o.length,a=i+o.lines-1;if((n?a:l)>=e)return o.lineInner(e,n,i,r);r=l+1,i=a+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&n>=o){let u=r&((o<=e?1:0)|(a>=n?2:0));o>=e&&a<=n&&!u?i.push(l):l.decompose(e-o,n-o,i,u)}o=a+1}}replace(e,n,i){if([e,n]=cr(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.length;if(e>=s&&n<=l){let a=o.replace(e-s,n-s,i),u=this.lines-o.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let c=this.children.slice();return c[r]=a,new Kt(c,this.length-(n-e)+i.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=cr(this,e,n);let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(r+=i),e<a&&n>o&&(r+=l.sliceString(e-o,n-o,i)),o=a+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Kt))return 0;let i=0,[r,s,o,l]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==l)return i;let a=this.children[r],u=e.children[s];if(a!=u)return i+a.scanIdentical(u,n);i+=a.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let m of e)m.flatten(d);return new ye(d,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,l=[],a=0,u=-1,c=[];function h(d){let m;if(d.lines>s&&d instanceof Kt)for(let y of d.children)h(y);else d.lines>o&&(a>o||!a)?(f(),l.push(d)):d instanceof ye&&a&&(m=c[c.length-1])instanceof ye&&d.lines+m.lines<=32?(a+=d.lines,u+=d.length+1,c[c.length-1]=new ye(m.text.concat(d.text),m.length+1+d.length)):(a+d.lines>r&&f(),a+=d.lines,u+=d.length+1,c.push(d))}function f(){a!=0&&(l.push(c.length==1?c[0]:Kt.from(c,u)),u=-1,a=c.length=0)}for(let d of e)h(d);return f(),l.length==1?l[0]:new Kt(l,n)}}J.empty=new ye([""],0);function Vk(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Wo(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let l=t[s],a=r+l.length;a>=n&&(a>i&&(l=l.slice(0,i-r)),r<n&&(l=l.slice(n-r)),o?(e[e.length-1]+=l,o=!1):e.push(l)),r=a+1}return e}function wd(t,e,n){return Wo(t,[""],e,n)}class ts{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof ye?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,l=r instanceof ye?r.text.length:r.children.length;if(o==(n>0?l:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof ye){let a=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=r.children[o+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof ye?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class f0{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new ts(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class d0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(J.prototype[Symbol.iterator]=function(){return this.iter()},ts.prototype[Symbol.iterator]=f0.prototype[Symbol.iterator]=d0.prototype[Symbol.iterator]=function(){return this});class Wk{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}function cr(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}let Xi="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<Xi.length;t++)Xi[t]+=Xi[t-1];function $k(t){for(let e=1;e<Xi.length;e+=2)if(Xi[e]>t)return Xi[e-1]<=t;return!1}function xd(t){return t>=127462&&t<=127487}const kd=8205;function Yt(t,e,n=!0,i=!0){return(n?p0:Uk)(t,e,i)}function p0(t,e,n){if(e==t.length)return e;e&&m0(t.charCodeAt(e))&&g0(t.charCodeAt(e-1))&&e--;let i=ns(t,e);for(e+=Gu(i);e<t.length;){let r=ns(t,e);if(i==kd||r==kd||n&&$k(r))e+=Gu(r),i=r;else if(xd(r)){let s=0,o=e-2;for(;o>=0&&xd(ns(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function Uk(t,e,n){for(;e>0;){let i=p0(t,e-2,n);if(i<e)return i;e--}return 0}function m0(t){return t>=56320&&t<57344}function g0(t){return t>=55296&&t<56320}function ns(t,e){let n=t.charCodeAt(e);if(!g0(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return m0(i)?(n-55296<<10)+(i-56320)+65536:n}function $b(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Gu(t){return t<65536?1:2}const Qu=/\r\n?|\n/;var et=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(et||(et={}));class an{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){Xu(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new an(e)}composeDesc(e){return this.empty?e:e.empty?this:y0(this,e)}mapDesc(e,n=!1){return e.empty?this:Ju(this,e,n)}mapPos(e,n=-1,i=et.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],u=r+l;if(a<0){if(u>e)return s+(e-r);s+=l}else{if(i!=et.Simple&&u>=e&&(i==et.TrackDel&&r<e&&u>e||i==et.TrackBefore&&r<e||i==et.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!l)return e==r||n<0?s:s+a;s+=a}r=u}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],l=r+s;if(o>=0&&r<=n&&l>=e)return r<e&&l>n?"cover":!0;r=l}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new an(e)}static create(e){return new an(e)}}class Ae extends an{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Xu(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return Ju(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],l=n[r+1];if(l>=0){n[r]=l,n[r+1]=o;let a=r>>1;for(;i.length<a;)i.push(J.empty);i.push(o?e.slice(s,s+o):J.empty)}s+=o}return new Ae(n,i)}compose(e){return this.empty?e:e.empty?this:y0(this,e,!0)}map(e,n=!1){return e.empty?this:Ju(this,e,n,!0)}iterChanges(e,n=!1){Xu(this,e,n)}get desc(){return an.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new Ms(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,a-l);Be(r,c,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;Be(n,c,h),h>0&&Nn(i,n,s.text),s.forward(c),l+=c}let u=e[o++];for(;l<u;){if(s.done)break e;let c=Math.min(s.len,u-l);Be(n,c,-1),Be(r,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),l+=c}}return{changes:new Ae(n,i),filtered:an.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,l=null;function a(c=!1){if(!c&&!r.length)return;o<n&&Be(r,n-o,-1);let h=new Ae(r,s);l=l?l.compose(h.map(l)):h,r=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let h of c)u(h);else if(c instanceof Ae){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);a(),l=l?l.compose(c.map(l)):c}else{let{from:h,to:f=h,insert:d}=c;if(h>f||h<0||f>n)throw new RangeError(`Invalid change range ${h} to ${f} (in doc of length ${n})`);let m=d?typeof d=="string"?J.of(d.split(i||Qu)):d:J.empty,y=m.length;if(h==f&&y==0)return;h<o&&a(),h>o&&Be(r,h-o,-1),Be(r,f-h,y),Nn(s,r,m),o=f}}return u(e),a(!l),l}static empty(e){return new Ae(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(J.empty);i[r]=J.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new Ae(n,i)}static createSet(e,n){return new Ae(e,n)}}function Be(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function Nn(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(J.empty);t.push(n)}}function Xu(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let l=t.sections[o++],a=t.sections[o++];if(a<0)r+=l,s+=l;else{let u=r,c=s,h=J.empty;for(;u+=l,c+=a,a&&i&&(h=h.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)l=t.sections[o++],a=t.sections[o++];e(r,u,s,c,h),r=u,s=c}}}function Ju(t,e,n,i=!1){let r=[],s=i?[]:null,o=new Ms(t),l=new Ms(e);for(let a=-1;;)if(o.ins==-1&&l.ins==-1){let u=Math.min(o.len,l.len);Be(r,u,-1),o.forward(u),l.forward(u)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!n))){let u=l.len;for(Be(r,l.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&a<o.i&&o.len<=c&&(Be(r,0,o.ins),s&&Nn(s,r,o.text),a=o.i),o.forward(c),u-=c}l.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(l.ins==-1){let h=Math.min(c,l.len);u+=h,c-=h,l.forward(h)}else if(l.ins==0&&l.len<c)c-=l.len,l.next();else break;Be(r,u,a<o.i?o.ins:0),s&&a<o.i&&Nn(s,r,o.text),a=o.i,o.forward(o.len-c)}else{if(o.done&&l.done)return s?Ae.createSet(r,s):an.create(r);throw new Error("Mismatched change set lengths")}}function y0(t,e,n=!1){let i=[],r=n?[]:null,s=new Ms(t),o=new Ms(e);for(let l=!1;;){if(s.done&&o.done)return r?Ae.createSet(i,r):an.create(i);if(s.ins==0)Be(i,s.len,0,l),s.next();else if(o.len==0&&!o.done)Be(i,0,o.ins,l),r&&Nn(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),u=i.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;Be(i,a,c,l),r&&c&&Nn(r,i,o.text)}else o.ins==-1?(Be(i,s.off?0:s.len,a,l),r&&Nn(r,i,s.textBit(a))):(Be(i,s.off?0:s.len,o.off?0:o.ins,l),r&&!o.off&&Nn(r,i,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>u),s.forward2(a),o.forward(a)}}}}class Ms{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?J.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?J.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class hi{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new hi(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return L.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return L.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return L.range(e.anchor,e.head)}static create(e,n,i){return new hi(e,n,i)}}class L{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:L.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new L([this.main],0)}addRange(e,n=!0){return L.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,L.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new L(e.ranges.map(n=>hi.fromJSON(n)),e.main)}static single(e,n=e){return new L([L.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return L.normalized(e.slice(),n);i=s.to}return new L(e,n)}static cursor(e,n=0,i,r){return hi.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?hi.create(n,e,48|s):hi.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?L.range(a,l):L.range(l,a))}}return new L(e,n)}}function v0(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let zh=0;class I{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=zh++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new I(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:jh),!!e.static,e.enables)}of(e){return new $o([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new $o(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new $o(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function jh(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class $o{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=zh++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,u=!1,c=[];for(let h of this.dependencies)h=="doc"?a=!0:h=="selection"?u=!0:((n=e[h.id])!==null&&n!==void 0?n:1)&1||c.push(e[h.id]);return{create(h){return h.values[o]=i(h),1},update(h,f){if(a&&f.docChanged||u&&(f.docChanged||f.selection)||Zu(h,c)){let d=i(h);if(l?!Sd(d,h.values[o],r):!r(d,h.values[o]))return h.values[o]=d,1}return 0},reconfigure:(h,f)=>{let d,m=f.config.address[s];if(m!=null){let y=Al(f,m);if(this.dependencies.every(w=>w instanceof I?f.facet(w)===h.facet(w):w instanceof _t?f.field(w,!1)==h.field(w,!1):!0)||(l?Sd(d=i(h),y,r):r(d=i(h),y)))return h.values[o]=y,0}else d=i(h);return h.values[o]=d,1}}}}function Sd(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function Zu(t,e){let n=!1;for(let i of e)is(t,i)&1&&(n=!0);return n}function Kk(t,e,n){let i=n.map(a=>t[a.id]),r=n.map(a=>a.type),s=i.filter(a=>!(a&1)),o=t[e.id]>>1;function l(a){let u=[];for(let c=0;c<i.length;c++){let h=Al(a,i[c]);if(r[c]==2)for(let f of h)u.push(f);else u.push(h)}return e.combine(u)}return{create(a){for(let u of i)is(a,u);return a.values[o]=l(a),1},update(a,u){if(!Zu(a,s))return 0;let c=l(a);return e.compare(c,a.values[o])?0:(a.values[o]=c,1)},reconfigure(a,u){let c=Zu(a,i),h=u.config.facets[e.id],f=u.facet(e);if(h&&!c&&jh(n,h))return a.values[o]=f,0;let d=l(a);return e.compare(d,f)?(a.values[o]=f,0):(a.values[o]=d,1)}}}const Cd=I.define({static:!0});class _t{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new _t(zh++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Cd).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}init(e){return[this,Cd.of({field:this,create:e})]}get extension(){return this}}const li={lowest:4,low:3,default:2,high:1,highest:0};function Nr(t){return e=>new w0(e,t)}const Zl={highest:Nr(li.highest),high:Nr(li.high),default:Nr(li.default),low:Nr(li.low),lowest:Nr(li.lowest)};class w0{constructor(e,n){this.inner=e,this.prec=n}}class ea{of(e){return new ec(this,e)}reconfigure(e){return ea.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class ec{constructor(e,n){this.compartment=e,this.inner=n}}class Ml{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let f of qk(e,n,o))f instanceof _t?r.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let l=Object.create(null),a=[],u=[];for(let f of r)l[f.id]=u.length<<1,u.push(d=>f.slot(d));let c=i==null?void 0:i.config.facets;for(let f in s){let d=s[f],m=d[0].facet,y=c&&c[f]||[];if(d.every(w=>w.type==0))if(l[m.id]=a.length<<1|1,jh(y,d))a.push(i.facet(m));else{let w=m.combine(d.map(p=>p.value));a.push(i&&m.compare(w,i.facet(m))?i.facet(m):w)}else{for(let w of d)w.type==0?(l[w.id]=a.length<<1|1,a.push(w.value)):(l[w.id]=u.length<<1,u.push(p=>w.dynamicSlot(p)));l[m.id]=u.length<<1,u.push(w=>Kk(w,m,d))}}let h=u.map(f=>f(l));return new Ml(e,o,h,l,a,s)}}function qk(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,l){let a=r.get(o);if(a!=null){if(a<=l)return;let u=i[a].indexOf(o);u>-1&&i[a].splice(u,1),o instanceof ec&&n.delete(o.compartment)}if(r.set(o,l),Array.isArray(o))for(let u of o)s(u,l);else if(o instanceof ec){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,l)}else if(o instanceof w0)s(o.inner,o.prec);else if(o instanceof _t)i[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof $o)i[l].push(o),o.facet.extensions&&s(o.facet.extensions,li.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,l)}}return s(t,li.default),i.reduce((o,l)=>o.concat(l))}function is(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function Al(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const x0=I.define(),tc=I.define({combine:t=>t.some(e=>e),static:!0}),k0=I.define({combine:t=>t.length?t[0]:void 0,static:!0}),S0=I.define(),C0=I.define(),b0=I.define(),E0=I.define({combine:t=>t.length?t[0]:!1});class Sr{constructor(e,n){this.type=e,this.value=n}static define(){return new Yk}}class Yk{of(e){return new Sr(this,e)}}class Gk{constructor(e){this.map=e}of(e){return new ae(this,e)}}class ae{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new ae(this.type,n)}is(e){return this.type==e}static define(e={}){return new Gk(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}ae.reconfigure=ae.define();ae.appendConfig=ae.define();class He{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&v0(i,n.newLength),s.some(l=>l.type==He.time)||(this.annotations=s.concat(He.time.of(Date.now())))}static create(e,n,i,r,s,o){return new He(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(He.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}He.time=Sr.define();He.userEvent=Sr.define();He.addToHistory=Sr.define();He.remote=Sr.define();function Qk(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function M0(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=Ae.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:ae.mapEffects(t.effects,r).concat(ae.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function nc(t,e,n){let i=e.selection,r=Ji(e.annotations);return e.userEvent&&(r=r.concat(He.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ae?e.changes:Ae.of(e.changes||[],n,t.facet(k0)),selection:i&&(i instanceof L?i:L.single(i.anchor,i.head)),effects:Ji(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function A0(t,e,n){let i=nc(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=M0(i,nc(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=He.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return Jk(n?Xk(r):r)}function Xk(t){let e=t.startState,n=!0;for(let r of e.facet(S0)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:Qk(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=Ae.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=He.create(e,r,t.selection&&t.selection.map(s),ae.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(C0);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof He?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof He?t=s[0]:t=A0(e,Ji(s),!1)}return t}function Jk(t){let e=t.startState,n=e.facet(b0),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=M0(i,nc(e,s,t.changes.newLength),!0))}return i==t?t:He.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const Zk=[];function Ji(t){return t==null?Zk:Array.isArray(t)?t:[t]}var on=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(on||(on={}));const eS=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ic;try{ic=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function tS(t){if(ic)return ic.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||eS.test(n)))return!0}return!1}function nS(t){return e=>{if(!/\S/.test(e))return on.Space;if(tS(e))return on.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return on.Word;return on.Other}}class X{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)is(this,l<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return is(this,i),Al(this,i)}update(...e){return A0(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let l of e.effects)l.is(ea.reconfigure)?(n&&(r=new Map,n.compartments.forEach((a,u)=>r.set(u,a)),n=null),r.set(l.value.compartment,l.value.extension)):l.is(ae.reconfigure)?(n=null,i=l.value):l.is(ae.appendConfig)&&(n=null,i=Ji(i).concat(l.value));let s;n?s=e.startState.values.slice():(n=Ml.resolve(i,r,this),s=new X(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let o=e.startState.facet(tc)?e.newSelection:e.newSelection.asSingle();new X(n,e.newDoc,o,s,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:L.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=Ji(i.effects);for(let l=1;l<n.ranges.length;l++){let a=e(n.ranges[l]),u=this.changes(a.changes),c=u.map(r);for(let f=0;f<l;f++)s[f]=s[f].map(c);let h=r.mapDesc(u,!0);s.push(a.range.map(h)),r=r.compose(c),o=ae.mapEffects(o,c).concat(ae.mapEffects(Ji(a.effects),h))}return{changes:r,selection:L.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof Ae?e:Ae.of(e,this.doc.length,this.facet(X.lineSeparator))}toText(e){return J.of(e.split(this.facet(X.lineSeparator)||Qu))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(is(this,n),Al(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof _t&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],l=e[s];r.push(o.init(a=>o.spec.fromJSON(l,a)))}}return X.create({doc:e.doc,selection:L.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=Ml.resolve(e.extensions||[],new Map),i=e.doc instanceof J?e.doc:J.of((e.doc||"").split(n.staticFacet(X.lineSeparator)||Qu)),r=e.selection?e.selection instanceof L?e.selection:L.single(e.selection.anchor,e.selection.head):L.single(0);return v0(r,i.length),n.staticFacet(tc)||(r=r.asSingle()),new X(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(X.tabSize)}get lineBreak(){return this.facet(X.lineSeparator)||`
`}get readOnly(){return this.facet(E0)}phrase(e,...n){for(let i of this.facet(X.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(x0))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return nS(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=Yt(n,o,!1);if(s(n.slice(a,o))!=on.Word)break;o=a}for(;l<r;){let a=Yt(n,l);if(s(n.slice(l,a))!=on.Word)break;l=a}return o==l?null:L.range(o+i,l+i)}}X.allowMultipleSelections=tc;X.tabSize=I.define({combine:t=>t.length?t[0]:4});X.lineSeparator=k0;X.readOnly=E0;X.phrases=I.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});X.languageData=x0;X.changeFilter=S0;X.transactionFilter=C0;X.transactionExtender=b0;ea.reconfigure=ae.define();function js(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],l=i[s];if(l===void 0)i[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class hr{eq(e){return this==e}range(e,n=e){return As.create(e,n,this)}}hr.prototype.startSide=hr.prototype.endSide=0;hr.prototype.point=!1;hr.prototype.mapMode=et.TrackDel;class As{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new As(e,n,i)}}function rc(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Hh{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,l=s.length;;){if(o==l)return o;let a=o+l>>1,u=s[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-n;if(a==o)return u>=0?o:l;u>=0?l=a:o=a+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],c=this.from[a]+e,h=this.to[a]+e,f,d;if(c==h){let m=n.mapPos(c,u.startSide,u.mapMode);if(m==null||(f=d=m,u.startSide!=u.endSide&&(d=n.mapPos(c,u.endSide),d<f)))continue}else if(f=n.mapPos(c,u.startSide),d=n.mapPos(h,u.endSide),f>d||f==d&&u.startSide>0&&u.endSide<=0)continue;(d-f||u.endSide-u.startSide)<0||(o<0&&(o=f),u.point&&(l=Math.max(l,d-f)),i.push(u),r.push(f-o),s.push(d-o))}return{mapped:i.length?new Hh(r,s,i,l):null,pos:o}}}class q{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new q(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(rc)),this.isEmpty)return n.length?q.of(n):this;let l=new T0(this,null,-1).goto(0),a=0,u=[],c=new Si;for(;l.value||a<n.length;)if(a<n.length&&(l.from-n[a].from||l.startSide-n[a].value.startSide)>=0){let h=n[a++];c.addInner(h.from,h.to,h.value)||u.push(h)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(l.chunkIndex)<n[a].from)&&(!o||r>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||r>l.to||s<l.from||o(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||u.push(As.create(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?q.empty:this.nextLayer.update({add:u,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],u=e.touchesRange(l,l+a.length);if(u===!1)r=Math.max(r,a.maxPoint),n.push(a),i.push(e.mapPos(l));else if(u===!0){let{mapped:c,pos:h}=a.map(l,e);c&&(r=Math.max(r,c.maxPoint),n.push(c),i.push(h))}}let s=this.nextLayer.map(e);return n.length==0?s:new q(i,n,s||q.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Ts.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Ts.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),l=n.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=bd(o,l,i),u=new Lr(o,a,s),c=new Lr(l,a,s);i.iterGaps((h,f,d)=>Ed(u,h,c,f,d,r)),i.empty&&i.length==0&&Ed(u,0,c,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=bd(s,o),a=new Lr(s,l,0).goto(i),u=new Lr(o,l,0).goto(i);for(;;){if(a.to!=u.to||!sc(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>r)return!0;a.next(),u.next()}}static spans(e,n,i,r,s=-1){let o=new Lr(e,null,s).goto(n),l=n,a=o.openStart;for(;;){let u=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),h=o.pointFrom<n?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,a);r.point(l,u,o.point,c,h,o.pointRank),a=Math.min(o.openEnd(u),c.length)}else u>l&&(r.span(l,u,o.active,a),a=o.openEnd(u));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,n=!1){let i=new Si;for(let r of e instanceof As?[e]:n?iS(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return q.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=q.empty;r=r.nextLayer)n=new q(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}q.empty=new q([],[],null,-1);function iS(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(rc(e,i)>0)return t.slice().sort(rc);e=i}return t}q.empty.nextLayer=q.empty;class Si{finishChunk(e){this.chunks.push(new Hh(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new Si)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(q.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=q.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function bd(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=i.get(s.chunk[o]);l!=null&&(n?n.mapPos(l):l)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(l,l+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class T0{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Ts{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new T0(o,n,i,s));return r.length==1?r[0]:new Ts(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)_a(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)_a(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),_a(this.heap,0)}}}function _a(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class Lr{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ts.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){mo(this.active,e),mo(this.activeTo,e),mo(this.activeRank,e),this.minActive=Md(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;go(this.active,n,i),go(this.activeTo,n,r),go(this.activeRank,n,s),e&&go(e,n,this.cursor.from),this.minActive=Md(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&mo(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function Ed(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,l=i,a=i-e;for(;;){let u=t.to+a-n.to||t.endSide-n.endSide,c=u<0?t.to+a:n.to,h=Math.min(c,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&sc(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(l,h,t.point,n.point):h>l&&!sc(t.active,n.active)&&s.compareRange(l,h,t.active,n.active),c>o)break;l=c,u<=0&&t.next(),u>=0&&n.next()}}function sc(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function mo(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function go(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function Md(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function Vh(t,e,n=t.length){let i=0;for(let r=0;r<n;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=Yt(t,r));return i}function oc(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=Yt(t,r)}return i===!0?-1:t.length}const lc="",Ad=typeof Symbol>"u"?"__"+lc:Symbol.for(lc),ac=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Td=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class qn{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,a,u){let c=[],h=/^@(\w+)\b/.exec(o[0]),f=h&&h[1]=="keyframes";if(h&&l==null)return a.push(o[0]+";");for(let d in l){let m=l[d];if(/&/.test(d))s(d.split(/,\s*/).map(y=>o.map(w=>y.replace(/&/,w))).reduce((y,w)=>y.concat(w)),m,a);else if(m&&typeof m=="object"){if(!h)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(r(d),m,c,f)}else m!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,y=>"-"+y.toLowerCase())+": "+m+";")}(c.length||f)&&a.push((i&&!h&&!u?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Td[Ad]||1;return Td[Ad]=e+1,lc+e.toString(36)}static mount(e,n,i){let r=e[ac],s=i&&i.nonce;r?s&&r.setNonce(s):r=new rS(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let Od=new Map;class rS{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=Od.get(i);if(s)return e[ac]=s;this.sheet=new r.CSSStyleSheet,Od.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[ac]=this}mount(e,n){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,l),i)for(let u=0;u<l.rules.length;u++)i.insertRule(l.rules[u],r++)}else{for(;s<a;)r+=this.modules[s++].rules.length;r+=l.rules.length,s++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=n.head||n;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Yn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Os={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},sS=typeof navigator<"u"&&/Mac/.test(navigator.platform),oS=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ne=0;Ne<10;Ne++)Yn[48+Ne]=Yn[96+Ne]=String(Ne);for(var Ne=1;Ne<=24;Ne++)Yn[Ne+111]="F"+Ne;for(var Ne=65;Ne<=90;Ne++)Yn[Ne]=String.fromCharCode(Ne+32),Os[Ne]=String.fromCharCode(Ne);for(var Ba in Yn)Os.hasOwnProperty(Ba)||(Os[Ba]=Yn[Ba]);function lS(t){var e=sS&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||oS&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Os:Yn)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Ps(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function uc(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function aS(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Uo(t,e){if(!e.anchorNode)return!1;try{return uc(t,e.anchorNode)}catch{return!1}}function fr(t){return t.nodeType==3?bi(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function rs(t,e,n,i){return n?Pd(t,e,n,i,-1)||Pd(t,e,n,i,1):!1}function Ci(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Tl(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function Pd(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:mn(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Ci(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?mn(t):0}else return!1}}function mn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ta(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function uS(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function O0(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function cS(t,e,n,i,r,s,o,l){let a=t.ownerDocument,u=a.defaultView||window;for(let c=t,h=!1;c&&!h;)if(c.nodeType==1){let f,d=c==a.body,m=1,y=1;if(d)f=uS(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(h=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let g=c.getBoundingClientRect();({scaleX:m,scaleY:y}=O0(c,g)),f={left:g.left,right:g.left+c.clientWidth*m,top:g.top,bottom:g.top+c.clientHeight*y}}let w=0,p=0;if(r=="nearest")e.top<f.top?(p=-(f.top-e.top+o),n>0&&e.bottom>f.bottom+p&&(p=e.bottom-f.bottom+p+o)):e.bottom>f.bottom&&(p=e.bottom-f.bottom+o,n<0&&e.top-p<f.top&&(p=-(f.top+p-e.top+o)));else{let g=e.bottom-e.top,v=f.bottom-f.top;p=(r=="center"&&g<=v?e.top+g/2-v/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-v+o)-f.top}if(i=="nearest"?e.left<f.left?(w=-(f.left-e.left+s),n>0&&e.right>f.right+w&&(w=e.right-f.right+w+s)):e.right>f.right&&(w=e.right-f.right+s,n<0&&e.left<f.left+w&&(w=-(f.left+w-e.left+s))):w=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==l?e.left-s:e.right-(f.right-f.left)+s)-f.left,w||p)if(d)u.scrollBy(w,p);else{let g=0,v=0;if(p){let k=c.scrollTop;c.scrollTop+=p/y,v=(c.scrollTop-k)*y}if(w){let k=c.scrollLeft;c.scrollLeft+=w/m,g=(c.scrollLeft-k)*m}e={left:e.left-g,top:e.top-v,right:e.right-g,bottom:e.bottom-v},g&&Math.abs(g-w)<1&&(i="nearest"),v&&Math.abs(v-p)<1&&(r="nearest")}if(d)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function hS(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class fS{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?mn(n):0),i,Math.min(e.focusOffset,i?mn(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let Pi=null;function P0(t){if(t.setActive)return t.setActive();if(Pi)return t.focus(Pi);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Pi==null?{get preventScroll(){return Pi={preventScroll:!0},!0}}:void 0),!Pi){Pi=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let Dd;function bi(t,e,n=e){let i=Dd||(Dd=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function Zi(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function dS(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function D0(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function pS(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,mn(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=mn(n))}else{if(n==t)return!0;i=Ci(n),n=n.parentNode}}function N0(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function L0(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=mn(n)}else if(n.parentNode&&!Tl(n))i=Ci(n),n=n.parentNode;else return null}}function R0(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!Tl(n))i=Ci(n)+1,n=n.parentNode;else return null}}class ze{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new ze(e.parentNode,Ci(e),n)}static after(e,n){return new ze(e.parentNode,Ci(e)+1,n)}}const Wh=[];class ne{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let l=ne.get(s);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=Nd(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=Nd(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=mn(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!ne.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,l=-1;for(let a=0,u=i,c=i;a<this.children.length;a++){let h=this.children[a],f=u+h.length;if(u<e&&f>n)return h.domBoundsAround(e,n,u);if(f>=e&&r==-1&&(r=a,s=u),u>n&&h.dom.parentNode==this.dom){o=a,l=c;break}c=f,u=f+h.breakAfter}return{from:s,to:l<0?i+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=Wh){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}this.children.splice(e,n-e,...i);for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new I0(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ne.prototype.breakAfter=0;function Nd(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class I0{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function _0(t,e,n,i,r,s,o,l,a){let{children:u}=t,c=u.length?u[e]:null,h=s.length?s[s.length-1]:null,f=h?h.breakAfter:o;if(!(e==i&&c&&!o&&!f&&s.length<2&&c.merge(n,r,s.length?h:null,n==0,l,a))){if(i<u.length){let d=u[i];d&&(r<d.length||d.breakAfter&&(h!=null&&h.breakAfter))?(e==i&&(d=d.split(r),r=0),!f&&h&&d.merge(0,r,h,!0,0,a)?s[s.length-1]=d:((r||d.children.length&&!d.children[0].length)&&d.merge(0,r,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(h?h.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,l,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,l,0),e++));e<i&&s.length;)if(u[i-1].become(s[s.length-1]))i--,s.pop(),a=s.length?0:l;else if(u[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&i<u.length&&!u[e-1].breakAfter&&u[i].merge(0,0,u[e-1],!1,l,a)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function B0(t,e,n,i,r,s){let o=t.childCursor(),{i:l,off:a}=o.findPos(n,1),{i:u,off:c}=o.findPos(e,-1),h=e-n;for(let f of i)h+=f.length;t.length+=h,_0(t,u,c,l,a,i,0,r,s)}let Ze=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},cc=typeof document<"u"?document:{documentElement:{style:{}}};const hc=/Edge\/(\d+)/.exec(Ze.userAgent),F0=/MSIE \d/.test(Ze.userAgent),fc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ze.userAgent),na=!!(F0||fc||hc),Ld=!na&&/gecko\/(\d+)/i.test(Ze.userAgent),Fa=!na&&/Chrome\/(\d+)/.exec(Ze.userAgent),Rd="webkitFontSmoothing"in cc.documentElement.style,z0=!na&&/Apple Computer/.test(Ze.vendor),Id=z0&&(/Mobile\/\w+/.test(Ze.userAgent)||Ze.maxTouchPoints>2);var N={mac:Id||/Mac/.test(Ze.platform),windows:/Win/.test(Ze.platform),linux:/Linux|X11/.test(Ze.platform),ie:na,ie_version:F0?cc.documentMode||6:fc?+fc[1]:hc?+hc[1]:0,gecko:Ld,gecko_version:Ld?+(/Firefox\/(\d+)/.exec(Ze.userAgent)||[0,0])[1]:0,chrome:!!Fa,chrome_version:Fa?+Fa[1]:0,ios:Id,android:/Android\b/.test(Ze.userAgent),webkit:Rd,safari:z0,webkit_version:Rd?+(/\bAppleWebKit\/(\d+)/.exec(Ze.userAgent)||[0,0])[1]:0,tabSize:cc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const mS=256;class Rt extends ne{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof Rt)||this.length-(n-e)+i.length>mS||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Rt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new ze(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return gS(this.dom,e,n)}}class gn extends ne{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(D0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof gn&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(B0(this,e,n,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let l of this.children){let a=i+l.length;a>e&&n.push(i<e?l.split(e-i):l),r<0&&i>=e&&(r=s),i=a,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new gn(this.mark,n,o)}domAtPos(e){return j0(this,e)}coordsAt(e,n){return V0(this,e,n)}}function gS(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?N.chrome||N.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let l=bi(t,r,s).getClientRects();if(!l.length)return null;let a=l[(o?o<0:n>=0)?0:l.length-1];return N.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,u=>u.width)||a),o?ta(a,o<0):a||null}class Ln extends ne{static create(e,n,i){return new Ln(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=Ln.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof Ln)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof Ln&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return J.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):J.empty}domAtPos(e){return(this.length?e==0:this.side>0)?ze.before(this.dom):ze.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?r.length-1:0;s=r[l],!(e>0?l==0:l==r.length-1||s.top<s.bottom);l+=o?-1:1);return ta(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class dr extends ne{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof dr&&e.side==this.side}split(){return new dr(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ze.before(this.dom):ze.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return J.empty}get isHidden(){return!0}}Rt.prototype.children=Ln.prototype.children=dr.prototype.children=Wh;function j0(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],l=s+o.length;if(!(l==s&&o.getSide()<=0)){if(e>s&&e<l&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new ze(n,0)}function H0(t,e,n){let i,{children:r}=t;n>0&&e instanceof gn&&r.length&&(i=r[r.length-1])instanceof gn&&i.mark.eq(e.mark)?H0(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function V0(t,e,n){let i=null,r=-1,s=null,o=-1;function l(u,c){for(let h=0,f=0;h<u.children.length&&f<=c;h++){let d=u.children[h],m=f+d.length;m>=c&&(d.children.length?l(d,c-f):(!s||s.isHidden&&n>0)&&(m>c||f==m&&d.getSide()>0)?(s=d,o=c-f):(f<c||f==m&&d.getSide()<0&&!d.isHidden)&&(i=d,r=c-f)),f=m}}l(t,e);let a=(n<0?i:s)||i||s;return a?a.coordsAt(Math.max(0,a==i?r:o),n):yS(t)}function yS(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=fr(e);return n[n.length-1]||null}function dc(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const _d=Object.create(null);function $h(t,e,n){if(t==e)return!0;t||(t=_d),e||(e=_d);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function pc(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function vS(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class ke extends ne{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof ke))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),B0(this,e,n,i?i.children.slice():[],s,o),!0}split(e){let n=new ke;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){$h(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){H0(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=dc(n,this.attrs||{})),i&&(this.attrs=dc({class:i},this.attrs||{}))}domAtPos(e){return j0(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(D0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(pc(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&ne.get(r)instanceof gn;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=ne.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!N.ios||!this.children.some(s=>s instanceof Rt))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof Rt)||/[^ -~]/.test(i.text))return null;let r=fr(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=V0(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return!1}covers(){return!0}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof ke)return s;if(o>n)break}r=o+s.breakAfter}return null}}class un extends ne{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof un)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?ze.before(this.dom):ze.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new un(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Wh}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):J.empty}domBoundsAround(){return null}become(e){return e instanceof un&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class ii{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Ke=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Ke||(Ke={}));class H extends hr{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Hs(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Gn(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=W0(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new Gn(e,i,r,n,e.widget||null,!0)}static line(e){return new Vs(e)}static set(e,n=!1){return q.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}H.none=q.empty;class Hs extends H{constructor(e){let{start:n,end:i}=W0(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof Hs&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&$h(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Hs.prototype.point=!1;class Vs extends H{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Vs&&this.spec.class==e.spec.class&&$h(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Vs.prototype.mapMode=et.TrackBefore;Vs.prototype.point=!0;class Gn extends H{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?et.TrackBefore:et.TrackAfter:et.TrackDel}get type(){return this.startSide!=this.endSide?Ke.WidgetRange:this.startSide<=0?Ke.WidgetBefore:Ke.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Gn&&wS(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Gn.prototype.point=!0;function W0(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function wS(t,e){return t==e||!!(t&&e&&t.compare(e))}function mc(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class ss{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof un&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ke),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(yo(new dr(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof un)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(yo(new Rt(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Gn){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=n-e;if(i instanceof Gn)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new un(i.widget||pr.block,l,i));else{let a=Ln.create(i.widget||pr.inline,l,l?0:i.startSide),u=this.atCursorPos&&!a.isEditable&&s<=r.length&&(e<n||i.startSide>0),c=!a.isEditable&&(e<n||s>r.length||i.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),u&&(h.append(yo(new dr(1),r),s),s=r.length+Math.max(0,s-r.length)),h.append(yo(a,r),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new ss(e,n,i,s);return o.openEnd=q.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function yo(t,e){for(let n of e)t=new gn(n,[t],t.length);return t}class pr extends ii{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}pr.inline=new pr("span");pr.block=new pr("div");var de=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(de||(de={}));const Ei=de.LTR,Uh=de.RTL;function $0(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const xS=$0("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),kS=$0("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),gc=Object.create(null),Ht=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);gc[e]=n,gc[n]=-e}function U0(t){return t<=247?xS[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?kS[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const SS=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Rn{get dir(){return this.level%2?Uh:Ei}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=n&&l.to>=n){if(l.level==i)return o;(s<0||(r!=0?r<0?l.from<n:l.to>n:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function K0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!K0(i.inner,r.inner))return!1}return!0}const te=[];function CS(t,e,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,l=s<i.length?i[s].from:n,a=s?256:r;for(let u=o,c=a,h=a;u<l;u++){let f=U0(t.charCodeAt(u));f==512?f=c:f==8&&h==4&&(f=16),te[u]=f==4?2:f,f&7&&(h=f),c=f}for(let u=o,c=a,h=a;u<l;u++){let f=te[u];if(f==128)u<l-1&&c==te[u+1]&&c&24?f=te[u]=c:te[u]=256;else if(f==64){let d=u+1;for(;d<l&&te[d]==64;)d++;let m=u&&c==8||d<n&&te[d]==8?h==1?1:8:256;for(let y=u;y<d;y++)te[y]=m;u=d-1}else f==8&&h==1&&(te[u]=1);c=f,f&7&&(h=f)}}}function bS(t,e,n,i,r){let s=r==1?2:1;for(let o=0,l=0,a=0;o<=i.length;o++){let u=o?i[o-1].to:e,c=o<i.length?i[o].from:n;for(let h=u,f,d,m;h<c;h++)if(d=gc[f=t.charCodeAt(h)])if(d<0){for(let y=l-3;y>=0;y-=3)if(Ht[y+1]==-d){let w=Ht[y+2],p=w&2?r:w&4?w&1?s:r:0;p&&(te[h]=te[Ht[y]]=p),l=y;break}}else{if(Ht.length==189)break;Ht[l++]=h,Ht[l++]=f,Ht[l++]=a}else if((m=te[h])==2||m==1){let y=m==r;a=y?0:1;for(let w=l-3;w>=0;w-=3){let p=Ht[w+2];if(p&2)break;if(y)Ht[w+2]|=2;else{if(p&4)break;Ht[w+2]|=4}}}}}function ES(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:t,l=r<n.length?n[r].from:e;for(let a=o;a<l;){let u=te[a];if(u==256){let c=a+1;for(;;)if(c==l){if(r==n.length)break;c=n[r++].to,l=r<n.length?n[r].from:e}else if(te[c]==256)c++;else break;let h=s==1,f=(c<e?te[c]:i)==1,d=h==f?h?1:2:i;for(let m=c,y=r,w=y?n[y-1].to:t;m>a;)m==w&&(m=n[--y].from,w=y?n[y-1].to:t),te[--m]=d;a=c}else s=u,a++}}}function yc(t,e,n,i,r,s,o){let l=i%2?2:1;if(i%2==r%2)for(let a=e,u=0;a<n;){let c=!0,h=!1;if(u==s.length||a<s[u].from){let y=te[a];y!=l&&(c=!1,h=y==16)}let f=!c&&l==1?[]:null,d=c?i:i+1,m=a;e:for(;;)if(u<s.length&&m==s[u].from){if(h)break e;let y=s[u];if(!c)for(let w=y.to,p=u+1;;){if(w==n)break e;if(p<s.length&&s[p].from==w)w=s[p++].to;else{if(te[w]==l)break e;break}}if(u++,f)f.push(y);else{y.from>a&&o.push(new Rn(a,y.from,d));let w=y.direction==Ei!=!(d%2);vc(t,w?i+1:i,r,y.inner,y.from,y.to,o),a=y.to}m=y.to}else{if(m==n||(c?te[m]!=l:te[m]==l))break;m++}f?yc(t,a,m,i+1,r,f,o):a<m&&o.push(new Rn(a,m,d)),a=m}else for(let a=n,u=s.length;a>e;){let c=!0,h=!1;if(!u||a>s[u-1].to){let y=te[a-1];y!=l&&(c=!1,h=y==16)}let f=!c&&l==1?[]:null,d=c?i:i+1,m=a;e:for(;;)if(u&&m==s[u-1].to){if(h)break e;let y=s[--u];if(!c)for(let w=y.from,p=u;;){if(w==e)break e;if(p&&s[p-1].to==w)w=s[--p].from;else{if(te[w-1]==l)break e;break}}if(f)f.push(y);else{y.to<a&&o.push(new Rn(y.to,a,d));let w=y.direction==Ei!=!(d%2);vc(t,w?i+1:i,r,y.inner,y.from,y.to,o),a=y.from}m=y.from}else{if(m==e||(c?te[m-1]!=l:te[m-1]==l))break;m--}f?yc(t,m,a,i+1,r,f,o):m<a&&o.push(new Rn(m,a,d)),a=m}}function vc(t,e,n,i,r,s,o){let l=e%2?2:1;CS(t,r,s,i,l),bS(t,r,s,i,l),ES(r,s,i,l),yc(t,r,s,e,n,i,o)}function q0(t,e,n){if(!t)return[new Rn(0,0,e==Uh?1:0)];if(e==Ei&&!n.length&&!SS.test(t))return Y0(t.length);if(n.length)for(;t.length>te.length;)te[te.length]=256;let i=[],r=e==Ei?0:1;return vc(t,r,r,n,0,t.length,i),i}function Y0(t){return[new Rn(0,t,0)]}let G0="";function Q0(t,e,n,i,r){var s;let o=i.head-t.from,l=Rn.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),a=e[l],u=a.side(r,n);if(o==u){let f=l+=r?1:-1;if(f<0||f>=e.length)return null;a=e[l=f],o=a.side(!r,n),u=a.side(r,n)}let c=Yt(t.text,o,a.forward(r,n));(c<a.from||c>a.to)&&(c=u),G0=t.text.slice(Math.min(o,c),Math.max(o,c));let h=l==(r?e.length-1:0)?null:e[l+(r?1:-1)];return h&&c==u&&h.level+(r?0:1)<a.level?L.cursor(h.side(!r,n)+t.from,h.forward(r,n)?1:-1,h.level):L.cursor(c+t.from,a.forward(r,n)?-1:1,a.level)}function MS(t,e,n){for(let i=e;i<n;i++){let r=U0(t.charCodeAt(i));if(r==1)return Ei;if(r==2||r==4)return Uh}return Ei}const X0=I.define(),J0=I.define(),Z0=I.define(),ey=I.define(),wc=I.define(),ty=I.define(),ny=I.define(),iy=I.define({combine:t=>t.some(e=>e)}),ry=I.define({combine:t=>t.some(e=>e)}),sy=I.define();class er{constructor(e,n="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new er(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new er(L.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const vo=ae.define({map:(t,e)=>t.map(e)}),oy=ae.define();function Pt(t,e,n){let i=t.facet(ey);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const An=I.define({combine:t=>t.length?t[0]:!0});let AS=0;const jr=I.define();class xe{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.extension=s(this)}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=n||{};return new xe(AS++,e,i,r,l=>{let a=[jr.of(l)];return o&&a.push(Ds.of(u=>{let c=u.plugin(l);return c?o(c):H.none})),s&&a.push(s(l)),a})}static fromClass(e,n){return xe.define(i=>new e(i),n)}}class za{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(Pt(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){Pt(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){Pt(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const ly=I.define(),ia=I.define(),Ds=I.define(),ay=I.define(),Kh=I.define(),uy=I.define();function Bd(t,e){let n=t.state.facet(uy);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return q.spans(i,e.from,e.to,{point(){},span(s,o,l,a){let u=s-e.from,c=o-e.from,h=r;for(let f=l.length-1;f>=0;f--,a--){let d=l[f].spec.bidiIsolate,m;if(d==null&&(d=MS(e.text,u,c)),a>0&&h.length&&(m=h[h.length-1]).to==u&&m.direction==d)m.to=c,h=m.inner;else{let y={from:u,to:c,direction:d,inner:[]};h.push(y),h=y.inner}}}}),r}const cy=I.define();function hy(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(cy)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const Hr=I.define();class ct{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new ct(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,l=0;;r++){let a=r==e.length?null:e[r],u=o-l,c=a?a.fromB:1e9;for(;s<n.length&&n[s]<c;){let h=n[s],f=n[s+1],d=Math.max(l,h),m=Math.min(c,f);if(d<=m&&new ct(d+u,m+u,d,m).addToSet(i),f>c)break;s+=2}if(!a)return i;new ct(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class Ol{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Ae.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,l,a)=>r.push(new ct(s,o,l,a))),this.changedRanges=r}static create(e,n,i){return new Ol(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Fd extends ne{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=H.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ke],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ct(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!RS(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?OS(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;i=new ct(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(N.ie||N.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=NS(o,l,e.changes);return i=ct.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=N.chrome||N.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof un&&o.widget instanceof zd&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let l=o>=0?r[o]:null;if(!l)break;let{fromA:a,toA:u,fromB:c,toB:h}=l,f,d,m,y;if(i&&i.range.fromB<h&&i.range.toB>c){let k=ss.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),S=ss.build(this.view.state.doc,i.range.toB,h,this.decorations,this.dynamicDecorationMap);d=k.breakAtStart,m=k.openStart,y=S.openEnd;let b=this.compositionView(i);S.breakAtStart?b.breakAfter=1:S.content.length&&b.merge(b.length,b.length,S.content[0],!1,S.openStart,0)&&(b.breakAfter=S.content[0].breakAfter,S.content.shift()),k.content.length&&b.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),f=k.content.concat(b).concat(S.content)}else({content:f,breakAtStart:d,openStart:m,openEnd:y}=ss.build(this.view.state.doc,c,h,this.decorations,this.dynamicDecorationMap));let{i:w,off:p}=s.findPos(u,1),{i:g,off:v}=s.findPos(a,-1);_0(this,g,v,w,p,f,d,m,y)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(oy)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new Rt(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new gn(r,[n],n.length);let i=new ke;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=ne.get(s);l&&l!=o&&(l.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&Uo(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),u=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(N.gecko&&l.empty&&!this.hasComposition&&TS(a)){let h=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(h,a.node.childNodes[a.offset]||null)),a=u=new ze(h,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!rs(a.node,a.offset,c.anchorNode,c.anchorOffset)||!rs(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,l))&&(this.view.observer.ignore(()=>{N.android&&N.chrome&&this.dom.contains(c.focusNode)&&LS(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=Ps(this.view.root);if(h)if(l.empty){if(N.gecko){let f=PS(a.node,a.offset);if(f&&f!=3){let d=(f==1?L0:R0)(a.node,a.offset);d&&(a=new ze(d.node,d.offset))}}h.collapse(a.node,a.offset),l.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=l.bidiLevel)}else if(h.extend){h.collapse(a.node,a.offset);try{h.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();l.anchor>l.head&&([a,u]=[u,a]),f.setEnd(u.node,u.offset),f.setStart(a.node,a.offset),h.removeAllRanges(),h.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new ze(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new ze(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&rs(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Ps(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=ke.find(this,n.head);if(!o)return;let l=o.posAtStart;if(n.head==l||n.head==l+o.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);i.collapse(c.node,c.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=n.from&&i.collapse(r,s)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let r=e.offset;!i&&r<n.childNodes.length;r++){let s=ne.get(n.childNodes[r]);s instanceof ke&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=ne.get(n.childNodes[r]);s instanceof ke&&(i=s.domAtPos(s.length))}return i?new ze(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=ne.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof ke)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=s-l.breakAfter,u=a-l.length;if(a<e)break;if(u<=e&&(u<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof ke&&!(i instanceof ke&&n>=0)))i=l,r=u;else if(i&&u==e&&a==e&&l instanceof un&&Math.abs(n)<2){if(l.deco.startSide<0)break;o&&(i=null)}s=u}return i?i.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof ke))return null;for(;r.children.length;){let{i:l,off:a}=r.childPos(i,1);for(;;l++){if(l==r.children.length)return null;if((r=r.children[l]).length)break}i=a}if(!(r instanceof Rt))return null;let s=Yt(r.text,i);if(s==i)return null;let o=bi(r.dom,i,s).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==de.LTR;for(let u=0,c=0;c<this.children.length;c++){let h=this.children[c],f=u+h.length;if(f>r)break;if(u>=i){let d=h.dom.getBoundingClientRect();if(n.push(d.height),o){let m=h.dom.lastChild,y=m?fr(m):[];if(y.length){let w=y[y.length-1],p=a?w.right-d.left:d.right-w.left;p>l&&(l=p,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+h.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?de.RTL:de.LTR}measureTextSize(){for(let s of this.children)if(s instanceof ke){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=fr(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new I0(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let l=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(H.replace({widget:new zd(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return H.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Ds).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(ay).map((s,o)=>{let l=typeof s=="function";return l&&(i=!0),l?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,n.push(q.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(sy))try{if(u(this.view,e.range,e))return!0}catch(c){Pt(this.view.state,c,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=hy(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;cS(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==de.LTR)}}function TS(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class zd extends ii{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function fy(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=L0(n.focusNode,n.focusOffset),r=R0(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let l=ne.get(r.node);if(!l||l instanceof Rt&&l.text!=r.node.nodeValue)s=r;else if(t.docView.lastCompositionAfterCursor){let a=ne.get(i.node);!a||a instanceof Rt&&a.text!=i.node.nodeValue||(s=r)}}if(t.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function OS(t,e,n){let i=fy(t,n);if(!i)return null;let{node:r,from:s,to:o}=i,l=r.nodeValue;if(/[\n\r]/.test(l)||t.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,u=new ct(a.mapPos(s),a.mapPos(o),s,o),c=[];for(let h=r.parentNode;;h=h.parentNode){let f=ne.get(h);if(f instanceof gn)c.push({node:h,deco:f.mark});else{if(f instanceof ke||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:u,text:r,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new Hs({inclusive:!0,attributes:vS(h),tagName:h.tagName.toLowerCase()})});else return null}}}function PS(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let DS=class{constructor(){this.changes=[]}compareRange(e,n){mc(e,n,this.changes)}comparePoint(e,n){mc(e,n,this.changes)}};function NS(t,e,n){let i=new DS;return q.compare(t,e,n,i),i.changes}function LS(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function RS(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}function IS(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return L.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,l=s;n<0?o=Yt(r.text,s,!1):l=Yt(r.text,s);let a=i(r.text.slice(o,l));for(;o>0;){let u=Yt(r.text,o,!1);if(i(r.text.slice(u,o))!=a)break;o=u}for(;l<r.length;){let u=Yt(r.text,l);if(i(r.text.slice(l,u))!=a)break;l=u}return L.range(o+r.from,l+r.from)}function _S(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function BS(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function ja(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function jd(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Hd(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function xc(t,e,n){let i,r,s,o,l=!1,a,u,c,h;for(let m=t.firstChild;m;m=m.nextSibling){let y=fr(m);for(let w=0;w<y.length;w++){let p=y[w];r&&ja(r,p)&&(p=jd(Hd(p,r.bottom),r.top));let g=_S(e,p),v=BS(n,p);if(g==0&&v==0)return m.nodeType==3?Vd(m,e,n):xc(m,e,n);if(!i||o>v||o==v&&s>g){i=m,r=p,s=g,o=v;let k=v?n<p.top?-1:1:g?e<p.left?-1:1:0;l=!k||(k>0?w<y.length-1:w>0)}g==0?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=m,c=p):n<p.top&&(!h||h.top>p.top)&&(u=m,h=p):c&&ja(c,p)?c=Hd(c,p.bottom):h&&ja(h,p)&&(h=jd(h,p.top))}}if(c&&c.bottom>=n?(i=a,r=c):h&&h.top<=n&&(i=u,r=h),!i)return{node:t,offset:0};let f=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return Vd(i,f,n);if(l&&i.contentEditable!="false")return xc(i,f,n);let d=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:d}}function Vd(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let l=0;l<i;l++){let a=bi(t,l,l+1).getClientRects();for(let u=0;u<a.length;u++){let c=a[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<s){let f=e>=(c.left+c.right)/2,d=f;if((N.chrome||N.gecko)&&bi(t,l).getBoundingClientRect().left==c.right&&(d=!f),h<=0)return{node:t,offset:l+(d?1:0)};r=l+(d?1:0),s=h}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function dy(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),l=o.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:c,y:h}=e,f=h-l;if(f<0)return 0;if(f>u)return t.state.doc.length;for(let k=t.viewState.heightOracle.textHeight/2,S=!1;a=t.elementAtHeight(f),a.type!=Ke.Text;)for(;f=i>0?a.bottom+k:a.top-k,!(f>=0&&f<=u);){if(S)return n?null:0;S=!0,i=-i}h=l+f;let d=a.from;if(d<t.viewport.from)return t.viewport.from==0?0:n?null:Wd(t,o,a,c,h);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Wd(t,o,a,c,h);let m=t.dom.ownerDocument,y=t.root.elementFromPoint?t.root:m,w=y.elementFromPoint(c,h);w&&!t.contentDOM.contains(w)&&(w=null),w||(c=Math.max(o.left+1,Math.min(o.right-1,c)),w=y.elementFromPoint(c,h),w&&!t.contentDOM.contains(w)&&(w=null));let p,g=-1;if(w&&((r=t.docView.nearest(w))===null||r===void 0?void 0:r.isEditable)!=!1){if(m.caretPositionFromPoint){let k=m.caretPositionFromPoint(c,h);k&&({offsetNode:p,offset:g}=k)}else if(m.caretRangeFromPoint){let k=m.caretRangeFromPoint(c,h);k&&({startContainer:p,startOffset:g}=k,(!t.contentDOM.contains(p)||N.safari&&FS(p,g,c)||N.chrome&&zS(p,g,c))&&(p=void 0))}}if(!p||!t.docView.dom.contains(p)){let k=ke.find(t.docView,d);if(!k)return f>a.top+a.height/2?a.to:a.from;({node:p,offset:g}=xc(k.dom,c,h))}let v=t.docView.nearest(p);if(!v)return null;if(v.isWidget&&((s=v.dom)===null||s===void 0?void 0:s.nodeType)==1){let k=v.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?v.posAtStart:v.posAtEnd}else return v.localPosFromDOM(p,g)+v.posAtStart}function Wd(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let l=t.viewState.heightOracle.textHeight,a=Math.floor((r-n.top-(t.defaultLineHeight-l)*.5)/l);s+=a*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+oc(o,s,t.state.tabSize)}function FS(t,e,n){let i;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(let r=t.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return bi(t,i-1,i).getBoundingClientRect().left>n}function zS(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():bi(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function kc(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let i of n.type)if(i.to>e||i.to==e&&(i.to==n.to||i.type==Ke.Text))return i}return n}function jS(t,e,n,i){let r=kc(t,e.head),s=!i||r.type!=Ke.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),l=t.textDirectionAt(r.from),a=t.posAtCoords({x:n==(l==de.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(a!=null)return L.cursor(a,n?-1:1)}return L.cursor(n?r.to:r.from,n?-1:1)}function $d(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let l=e,a=null;;){let u=Q0(r,s,o,l,n),c=G0;if(!u){if(r.number==(n?t.state.doc.lines:1))return l;c=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),u=t.visualLineSide(r,!n)}if(a){if(!a(c))return l}else{if(!i)return u;a=i(c)}l=u}}function HS(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==on.Space&&(r=o),r==o}}function VS(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return L.cursor(r,e.assoc);let o=e.goalColumn,l,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(r,e.assoc||-1),c=t.documentTop;if(u)o==null&&(o=u.left-a.left),l=s<0?u.top:u.bottom;else{let d=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(a.right-a.left,t.defaultCharacterWidth*(r-d.from))),l=(s<0?d.top:d.bottom)+c}let h=a.left+o,f=i??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let m=l+(f+d)*s,y=dy(t,{x:h,y:m},!1,s);if(m<a.top||m>a.bottom||(s<0?y<r:y>r)){let w=t.docView.coordsForChar(y),p=!w||m<w.top?-1:1;return L.cursor(y,p,void 0,o)}}}function Ko(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,l)=>{if(e>s&&e<o){let a=i||n||(e-s<o-e?-1:1);e=a<0?s:o,i=a}});if(!i)return e}}function Ha(t,e,n){let i=Ko(t.state.facet(Kh).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:L.cursor(i,i<n.from?1:-1)}class WS{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,N.safari&&e.contentDOM.addEventListener("input",()=>null),N.gecko&&sC(e.contentDOM.ownerDocument)}handleEvent(e){!XS(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=$S(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,l=i[s];l&&o!=!l.handlers.length&&(r.removeEventListener(s,this.handleEvent),l=null),l||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&my.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),N.android&&N.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return N.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=py.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||US.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Zi(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:N.safari&&!N.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Ud(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){Pt(n.state,r)}}}function $S(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec;if(r&&r.domEventHandlers)for(let s in r.domEventHandlers){let o=r.domEventHandlers[s];o&&n(s).handlers.push(Ud(i.value,o))}if(r&&r.domEventObservers)for(let s in r.domEventObservers){let o=r.domEventObservers[s];o&&n(s).observers.push(Ud(i.value,o))}}for(let i in It)n(i).handlers.push(It[i]);for(let i in bt)n(i).observers.push(bt[i]);return e}const py=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],US="dthko",my=[16,17,18,20,91,92,224,225],wo=6;function xo(t){return Math.max(0,t)*.7+8}function KS(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class qS{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=hS(e.contentDOM),this.atoms=e.state.facet(Kh).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(X.allowMultipleSelections)&&YS(e,n),this.dragging=QS(e,n)&&wy(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&KS(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,r=0,s=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=hy(this.view);e.clientX-o.left<=s.left+wo?i=-xo(s.left-e.clientX):e.clientX+o.right>=s.right-wo&&(i=xo(e.clientX-s.right)),e.clientY-o.top<=s.top+wo?r=-xo(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-wo&&(r=xo(e.clientY-s.bottom)),this.setScrollSpeed(i,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=Ko(this.atoms,r.from,0);o!=r.from&&(s=L.cursor(o,-1))}else{let o=Ko(this.atoms,r.from,-1),l=Ko(this.atoms,r.to,1);(o!=r.from||l!=r.to)&&(s=L.range(r.from==r.anchor?o:l,r.from==r.head?o:l))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?L.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function YS(t,e){let n=t.state.facet(X0);return n.length?n[0](e):N.mac?e.metaKey:e.ctrlKey}function GS(t,e){let n=t.state.facet(J0);return n.length?n[0](e):N.mac?!e.altKey:!e.ctrlKey}function QS(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Ps(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function XS(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=ne.get(n))&&i.ignoreEvent(e))return!1;return!0}const It=Object.create(null),bt=Object.create(null),gy=N.ie&&N.ie_version<15||N.ios&&N.webkit_version<604;function JS(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),yy(t,n.value)},50)}function yy(t,e){let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(Sc!=null&&n.selection.ranges.every(a=>a.empty)&&Sc==s.toString()){let a=-1;i=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==a)return{range:u};a=c.from;let h=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:h},range:L.cursor(u.from+h.length)}})}else o?i=n.changeByRange(a=>{let u=s.line(r++);return{changes:{from:a.from,to:a.to,insert:u.text},range:L.cursor(a.from+u.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}bt.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};It.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);bt.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};bt.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};It.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(Z0))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=tC(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new qS(t,e,n,i)),i&&t.observer.ignore(()=>{P0(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function Kd(t,e,n,i){if(i==1)return L.cursor(e,n);if(i==2)return IS(t.state,e,n);{let r=ke.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,l=r?r.posAtEnd:s.to;return l<t.state.doc.length&&l==s.to&&l++,L.range(o,l)}}let vy=(t,e)=>t>=e.top&&t<=e.bottom,qd=(t,e,n)=>vy(e,n)&&t>=n.left&&t<=n.right;function ZS(t,e,n,i){let r=ke.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&qd(n,i,o))return-1;let l=r.coordsAt(s,1);return l&&qd(n,i,l)?1:o&&vy(i,o)?-1:1}function Yd(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:ZS(t,n,e.clientX,e.clientY)}}const eC=N.ie&&N.ie_version<=11;let Gd=null,Qd=0,Xd=0;function wy(t){if(!eC)return t.detail;let e=Gd,n=Xd;return Gd=t,Xd=Date.now(),Qd=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Qd+1)%3:1}function tC(t,e){let n=Yd(t,e),i=wy(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,l){let a=Yd(t,s),u,c=Kd(t,a.pos,a.bias,i);if(n.pos!=a.pos&&!o){let h=Kd(t,n.pos,n.bias,i),f=Math.min(h.from,c.from),d=Math.max(h.to,c.to);c=f<c.from?L.range(f,d):L.range(d,f)}return o?r.replaceRange(r.main.extend(c.from,c.to)):l&&i==1&&r.ranges.length>1&&(u=nC(r,a.pos))?u:l?r.addRange(c):L.create([c])}}}function nC(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return L.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}It.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=n.to||o<=n.from)&&(n=L.range(s,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove"),!1};It.dragend=t=>(t.inputState.draggedContent=null,!1);function Jd(t,e,n,i){if(!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=i&&s&&GS(t,e)?{from:s.from,to:s.to}:null,l={from:r,insert:n},a=t.state.changes(o?[o,l]:l);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(r,-1),head:a.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}It.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&Jd(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),s()},l.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Jd(t,e,i,!0),!0}return!1};It.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=gy?null:e.clipboardData;return n?(yy(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(JS(t),!1)};function iC(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function rC(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:i}}let Sc=null;It.copy=It.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=rC(t.state);if(!n&&!r)return!1;Sc=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=gy?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(iC(t,n),!1)};const xy=Sr.define();function ky(t,e){let n=[];for(let i of t.facet(ny)){let r=i(t,e);r&&n.push(r)}return n?t.update({effects:n,annotations:xy.of(!0)}):null}function Sy(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=ky(t.state,e);n?t.dispatch(n):t.update([])}},10)}bt.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Sy(t)};bt.blur=t=>{t.observer.clearSelectionRange(),Sy(t)};bt.compositionstart=bt.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};bt.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,N.chrome&&N.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};bt.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};It.beforeinput=(t,e)=>{var n;let i;if(N.chrome&&N.android&&(i=py.find(r=>r.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>r+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return N.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),N.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>bt.compositionend(t,e),20),!1};const Zd=new Set;function sC(t){Zd.has(t)||(Zd.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const ep=["pre-wrap","normal","pre-line","break-spaces"];class Cy{constructor(e){this.lineWrapping=e,this.doc=J.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return ep.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let l=ep.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,a){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class by{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class qt{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?Ke.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Gn?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new qt(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var ie=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(ie||(ie={}));const qo=.001;class Ve{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>qo&&(e.heightChanged=!0),this.height=n)}replace(e,n,i){return Ve.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let l=r.length-1;l>=0;l--){let{fromA:a,toA:u,fromB:c,toB:h}=r[l],f=s.lineAt(a,ie.ByPosNoHeight,i.setDoc(n),0,0),d=f.to>=u?f:s.lineAt(u,ie.ByPosNoHeight,i,0,0);for(h+=d.to-u,u=d.to;l>0&&f.from<=r[l-1].toA;)a=r[l-1].fromA,c=r[l-1].fromB,l--,a<f.from&&(f=s.lineAt(a,ie.ByPosNoHeight,i,0,0));c+=f.from-a,a=f.from;let m=qh.build(i.setDoc(o),e,c,h);s=s.replace(a,u,m)}return s.updateHeight(i,0)}static empty(){return new lt(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let l=e[n-1];l.break?e.splice(--n,1,l.left,null,l.right):e.splice(--n,1,l.left,l.right),i+=1+l.break,r-=l.size}else if(s>r*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,s-=l.size}else break;else if(r<s){let l=e[n++];l&&(r+=l.size)}else{let l=e[--i];l&&(s+=l.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new oC(Ve.of(e.slice(0,n)),o,Ve.of(e.slice(i)))}}Ve.prototype.size=1;class Ey extends Ve{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new qt(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class lt extends Ey{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new qt(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof lt||r instanceof Pe&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Pe?r=new lt(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Ve.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(e,r.heights[r.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Pe extends Ve{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);o=a/s,this.length>s+1&&(l=(this.height-a)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:l}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(n,r);if(n.lineWrapping){let u=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),c=n.doc.lineAt(u),h=l+c.length*a,f=Math.max(i,e-h/2);return new qt(c.from,c.length,f,h,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-i)/l))),{from:c,length:h}=n.doc.line(s+u);return new qt(c,h,i+l*u,l,0)}}lineAt(e,n,i,r,s){if(n==ie.ByHeight)return this.blockAt(e,i,r,s);if(n==ie.ByPosNoHeight){let{from:d,to:m}=i.doc.lineAt(e);return new qt(d,m-d,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,s),u=i.doc.lineAt(e),c=l+u.length*a,h=u.number-o,f=r+l*h+a*(u.from-s-h);return new qt(u.from,u.length,Math.max(r,Math.min(f,r+this.height-c)),c,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:l,perLine:a,perChar:u}=this.heightMetrics(i,s);for(let c=e,h=r;c<=n;){let f=i.doc.lineAt(c);if(c==e){let m=f.number-l;h+=a*m+u*(e-s-m)}let d=a+u*f.length;o(new qt(f.from,f.length,h,d,0)),h+=d,c=f.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof Pe?i[i.length-1]=new Pe(s.length+r):i.push(null,new Pe(r-1))}if(e>0){let s=i[0];s instanceof Pe?i[0]=new Pe(e+s.length):i.unshift(new Pe(e-1),null)}return Ve.of(i)}decomposeLeft(e,n){n.push(new Pe(e-1),null)}decomposeRight(e,n){n.push(null,new Pe(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],l=Math.max(n,r.from),a=-1;for(r.from>n&&o.push(new Pe(r.from-n-1).updateHeight(e,n));l<=s&&r.more;){let c=e.doc.lineAt(l).length;o.length&&o.push(null);let h=r.heights[r.index++];a==-1?a=h:Math.abs(h-a)>=qo&&(a=-2);let f=new lt(c,h);f.outdated=!1,o.push(f),l+=c+1}l<=s&&o.push(null,new Pe(s-l).updateHeight(e,l));let u=Ve.of(o);return(a<0||Math.abs(u.height-this.height)>=qo||Math.abs(a-this.heightMetrics(e,n).perLine)>=qo)&&(e.heightChanged=!0),u}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class oC extends Ve{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,l=s+this.left.length+this.break,a=n==ie.ByHeight?e<o:e<l,u=a?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,l);if(this.break||(a?u.to<l:u.from>l))return u;let c=n==ie.ByPosNoHeight?ie.ByPosNoHeight:ie.ByPos;return a?u.join(this.right.lineAt(l,c,i,o,l)):this.left.lineAt(l,c,i,r,s).join(u)}forEachLine(e,n,i,r,s,o){let l=r+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,i,r,s,o),n>=a&&this.right.forEachLine(e,n,i,l,a,o);else{let u=this.lineAt(a,ie.ByPos,i,r,s);e<u.from&&this.left.forEachLine(e,u.from-1,i,r,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,i,l,a,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of i)s.push(l);if(e>0&&tp(s,o-1),n<this.length){let l=s.length;this.decomposeRight(n,s),tp(s,l)}return Ve.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Ve.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,l=n+s.length+this.break,a=null;return r&&r.from<=n+s.length&&r.more?a=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=l+o.length&&r.more?a=o=o.updateHeight(e,l,i,r):o.updateHeight(e,l,i),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function tp(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Pe&&(i=t[e+1])instanceof Pe&&t.splice(e-1,3,new Pe(n.length+1+i.length))}const lC=5;class qh{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof lt?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new lt(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new Ey(o,r,i)):(o||s||r>=lC)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new lt(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new Pe(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof lt)return e;let n=new lt(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof lt)&&!this.isCovered?this.nodes.push(new lt(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof lt&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new qh(i,e);return q.spans(n,i,r,s,0),s.finish(i)}}function aC(t,e,n){let i=new uC;return q.compare(t,e,n,i,0),i.changes}class uC{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&mc(e,n,this.changes,5)}}function cC(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),l=Math.max(0,n.top),a=Math.min(r.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=i.body;)if(u.nodeType==1){let c=u,h=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&h.overflow!="visible"){let f=c.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),l=Math.max(l,f.top),a=u==t.parentNode?f.bottom:Math.min(a,f.bottom)}u=h.position=="absolute"||h.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:l-(n.top+e),bottom:Math.max(l,a)-(n.top+e)}}function hC(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Va{constructor(e,n,i){this.from=e,this.to=n,this.size=i}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return H.replace({widget:new fC(this.size*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class fC extends ii{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class np{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=ip,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=de.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(ia).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new Cy(n),this.stateDeco=e.facet(Ds).filter(i=>typeof i!="function"),this.heightMap=Ve.empty().applyChanges(this.stateDeco,J.empty,this.heightOracle.setDoc(e.doc),[new ct(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=H.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new ko(s,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?ip:new Yh(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Vr(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Ds).filter(c=>typeof c!="function");let r=e.changedRanges,s=ct.extendWithRanges(r,aC(i,this.stateDeco,e?e.changes:Ae.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(ry)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?de.RTL:de.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=n.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let u=0,c=0;if(l.width&&l.height){let{scaleX:k,scaleY:S}=O0(n,l);(k>.005&&Math.abs(this.scaleX-k)>.005||S>.005&&Math.abs(this.scaleY-S)>.005)&&(this.scaleX=k,this.scaleY=S,u|=8,o=a=!0)}let h=(parseInt(i.paddingTop)||0)*this.scaleY,f=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=f)&&(this.paddingTop=h,this.paddingBottom=f,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=N0(e.scrollDOM);let m=(this.printing?hC:cC)(n,this.paddingTop),y=m.top-this.pixelViewport.top,w=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let g=l.width;if((this.contentDOMWidth!=g||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),a){let k=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(k)&&(o=!0),o||r.lineWrapping&&Math.abs(g-this.contentDOMWidth)>r.charWidth){let{lineHeight:S,charWidth:b,textHeight:C}=e.docView.measureTextSize();o=S>0&&r.refresh(s,S,b,C,g/b,k),o&&(e.docView.minWidth=0,u|=8)}y>0&&w>0?c=Math.max(y,w):y<0&&w<0&&(c=Math.min(y,w)),r.heightChanged=!1;for(let S of this.viewports){let b=S.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(S);this.heightMap=(o?Ve.empty().applyChanges(this.stateDeco,J.empty,this.heightOracle,[new ct(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new by(S.from,b))}r.heightChanged&&(u|=2)}let v=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return v&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||v)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new ko(r.lineAt(o-i*1e3,ie.ByHeight,s,0,0).from,r.lineAt(l+(1-i)*1e3,ie.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=r.lineAt(u,ie.ByPos,s,0,0),f;n.y=="center"?f=(h.top+h.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<a.from?f=h.top:f=h.bottom-c,a=new ko(r.lineAt(f-1e3/2,ie.ByHeight,s,0,0).from,r.lineAt(f+c+1e3/2,ie.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new ko(this.heightMap.lineAt(i,ie.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,ie.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,ie.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,ie.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=l+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new Va(n.mapPos(r.from),n.mapPos(r.to),r.size));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=de.LTR&&!i)return[];let l=[],a=(c,h,f,d)=>{if(h-c<s)return;let m=this.state.selection.main,y=[m.from];m.empty||y.push(m.to);for(let p of y)if(p>c&&p<h){a(c,p-10,f,d),a(p+10,h,f,d);return}let w=pC(e,p=>p.from>=f.from&&p.to<=f.to&&Math.abs(p.from-c)<s&&Math.abs(p.to-h)<s&&!y.some(g=>p.from<g&&p.to>g));if(!w){if(h<f.to&&n&&i&&n.visibleRanges.some(p=>p.from<=h&&p.to>=h)){let p=n.moveToLineBoundary(L.cursor(h),!1,!0).head;p>c&&(h=p)}w=new Va(c,h,this.gapSize(f,c,h,d))}l.push(w)},u=c=>{if(c.length<o||c.type!=Ke.Text)return;let h=dC(c.from,c.to,this.stateDeco);if(h.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,m;if(i){let y=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,w,p;if(f!=null){let g=Co(h,f),v=((this.visibleBottom-this.visibleTop)/2+y)/c.height;w=g-v,p=g+v}else w=(this.visibleTop-c.top-y)/c.height,p=(this.visibleBottom-c.top+y)/c.height;d=So(h,w),m=So(h,p)}else{let y=h.total*this.heightOracle.charWidth,w=r*this.heightOracle.charWidth,p,g;if(f!=null){let v=Co(h,f),k=((this.pixelViewport.right-this.pixelViewport.left)/2+w)/y;p=v-k,g=v+k}else p=(this.pixelViewport.left-w)/y,g=(this.pixelViewport.right+w)/y;d=So(h,p),m=So(h,g)}d>c.from&&a(c.from,d,c,h),m<c.to&&a(m,c.to,c,h)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return l}gapSize(e,n,i,r){let s=Co(r,i)-Co(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){Va.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=H.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];q.spans(e,this.viewport.from,this.viewport.to,{span(r,s){n.push({from:r,to:s})},point(){}},20);let i=n.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=n[s].from||r.to!=n[s].to);return this.visibleRanges=n,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Vr(this.heightMap.lineAt(e,ie.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Vr(this.heightMap.lineAt(this.scaler.fromDOM(e),ie.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Vr(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ko{constructor(e,n){this.from=e,this.to=n}}function dC(t,e,n){let i=[],r=t,s=0;return q.spans(n,t,e,{span(){},point(o,l){o>r&&(i.push({from:r,to:o}),s+=o-r),r=l}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function So({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],l=o-s;if(i<=l)return s+i;i-=l}}function Co(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function pC(t,e){for(let n of t)if(e(n))return n}const ip={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class Yh{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let u=n.lineAt(l,ie.ByPos,e,0,0).top,c=n.lineAt(a,ie.ByPos,e,0,0).bottom;return r+=c-u,{from:l,to:a,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof Yh?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function Vr(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new qt(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>Vr(r,e)):t._content)}const bo=I.define({combine:t=>t.join(" ")}),Cc=I.define({combine:t=>t.indexOf(!0)>-1}),bc=qn.newName(),My=qn.newName(),Ay=qn.newName(),Ty={"&light":"."+My,"&dark":"."+Ay};function Ec(t,e,n){return new qn(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const mC=Ec("."+bc,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Ty),Wr="";class gC{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(X.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Wr}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let l=ne.get(r),a=ne.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:Tl(r))||Tl(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=r.exec(n))&&(s=l.index,o=l[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=ne.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(yC(e,i.node,i.offset)?n:0))}}function yC(t,e,n){for(;;){if(!e||n<mn(e))return!1;if(e==t)return!0;n=Ci(e)+1,e=e.parentNode}}class rp{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class vC{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let l=s||o?[]:kC(e),a=new gC(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=SC(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!uc(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),u=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!uc(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),c=e.viewport;if((N.ios||N.chrome)&&e.state.selection.main.empty&&a!=u&&(c.from>0||c.to<e.state.doc.length)){let h=Math.min(a,u),f=Math.max(a,u),d=c.from-h,m=c.to-f;(d==0||d==1||h==0)&&(m==0||m==-1||f==e.state.doc.length)&&(a=0,u=e.state.doc.length)}this.newSel=L.single(u,a)}}}function Oy(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=r.from,u=null;(s===8||N.android&&e.text.length<l-o)&&(a=r.to,u="end");let c=xC(t.state.doc.sliceString(o,l,Wr),e.text,a-o,u);c&&(N.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Wr+Wr&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:J.of(e.text.slice(c.from,c.toB).split(Wr))})}else i&&(!t.hasFocus&&t.state.facet(An)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:(N.mac||N.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=L.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:J.of([" "])}):N.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=L.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:J.of([" "])}),n)return Py(t,n,i,s);if(i&&!i.main.eq(r)){let o=!1,l="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),l=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function Py(t,e,n,i=-1){if(N.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(N.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&t.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Zi(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Zi(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Zi(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,l=()=>o||(o=wC(t,e,n));return t.state.facet(ty).some(a=>a(t,e.from,e.to,s,l))||t.dispatch(l()),!0}function wC(t,e,n){let i,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let l=s.from<e.from?r.sliceDoc(s.from,e.from):"",a=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(l+e.insert.sliceString(0,void 0,t.state.lineBreak)+a))}else{let l=r.changes(e),a=n&&n.main.to<=l.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let u=t.state.sliceDoc(e.from,e.to),c,h=n&&fy(t,n.main.head);if(h){let m=e.insert.length-(e.to-e.from);c={from:h.from,to:h.to-m}}else c=t.state.doc.lineAt(s.head);let f=s.to-e.to,d=s.to-s.from;i=r.changeByRange(m=>{if(m.from==s.from&&m.to==s.to)return{changes:l,range:a||m.map(l)};let y=m.to-f,w=y-u.length;if(m.to-m.from!=d||t.state.sliceDoc(w,y)!=u||m.to>=c.from&&m.from<=c.to)return{range:m};let p=r.changes({from:w,to:y,insert:e.insert}),g=m.to-s.to;return{changes:p,range:a?L.range(Math.max(0,a.anchor+g),Math.max(0,a.head+g)):m.map(p)}})}else i={changes:l,selection:a&&r.selection.replaceRange(a)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function xC(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,l=e.length;for(;o>0&&l>0&&t.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,s-Math.min(o,l));n-=o+a-s}if(o<s&&t.length<e.length){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}else if(l<s){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}function kC(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new rp(n,i)),(r!=n||s!=i)&&e.push(new rp(r,s))),e}function SC(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?L.single(n+e,i+e):null}const CC={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Wa=N.ie&&N.ie_version<=11;class bC{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new fS,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(N.ie&&N.ie_version<=11||N.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT===!0&&(this.editContext=new MC(e),e.state.facet(An)&&(e.contentDOM.editContext=this.editContext.editContext)),Wa&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){e.type=="change"&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(An)?i.root.activeElement!=this.dom:!Uo(i.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(N.ie&&N.ie_version<=11||N.android&&N.chrome)&&!i.state.selection.main.empty&&r.focusNode&&rs(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Ps(e.root);if(!n)return!1;let i=N.safari&&e.root.nodeType==11&&aS(this.dom.ownerDocument)==this.dom&&EC(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let r=Uo(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&pS(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,CC),Wa&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Wa&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Zi(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&Uo(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new vC(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=Oy(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=sp(n,e.previousSibling||e.target.previousSibling,-1),r=sp(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener("change",this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener("change",this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(An)!=e.state.facet(An)&&(e.view.contentDOM.editContext=e.state.facet(An)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function sp(t,e,n){for(;e;){let i=ne.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function op(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return rs(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function EC(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return op(t,r)}let n=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?op(t,n):null}class MC{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});n.addEventListener("textupdate",i=>{let{anchor:r}=e.state.selection.main,s={from:this.toEditorPos(i.updateRangeStart),to:this.toEditorPos(i.updateRangeEnd),insert:J.of(i.text.split(`
`))};s.from==this.from&&r<this.from?s.from=r:s.to==this.to&&r>this.to&&(s.to=r),!(s.from==s.to&&!s.insert.length)&&(this.pendingContextChange=s,Py(e,s,L.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd))),this.pendingContextChange&&this.revertPending(e.state))}),n.addEventListener("characterboundsupdate",i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);o<l;o++){let a=e.coordsForChar(o);s=a&&new DOMRect(a.left,a.right,a.right-a.left,a.bottom-a.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(i.rangeStart,r)}),n.addEventListener("textformatupdate",i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,l=s.underlineThickness;if(o!="None"&&l!="None"){let a=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;r.push(H.mark({attributes:{style:a}}).range(this.toEditorPos(s.rangeStart),this.toEditorPos(s.rangeEnd)))}}e.dispatch({effects:oy.of(H.set(r))})}),n.addEventListener("compositionstart",()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)}),n.addEventListener("compositionend",()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null}),this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=Ps(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,l,a,u)=>{if(i)return;let c=u.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(u)){r=this.pendingContextChange=null,n+=c;return}else r=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+u.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),u.toString()),this.to+=c}n+=c}),r&&!i&&this.revertPending(e.state),!i}update(e){!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)):(e.docChanged||e.selectionSet)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.to+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}}class j{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(i=>i.forEach(r=>n(r,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||dS(e.parent)||document,this.viewState=new np(e.state||X.create(e)),e.scrollTo&&e.scrollTo.is(vo)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(jr).map(i=>new za(i));for(let i of this.plugins)i.update(this);this.observer=new bC(this),this.inputState=new WS(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Fd(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let n=e.length==1&&e[0]instanceof He?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,l=0,a=null;e.some(f=>f.annotation(xy))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=ky(s,o),a||(l=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(X.phrases)!=this.state.facet(X.phrases))return this.setState(s);r=Ol.create(this,s,e),r.flags|=l;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(h&&(h=h.map(f.changes)),f.scrollIntoView){let{main:d}=f.state.selection;h=new er(d.empty?d:L.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of f.effects)d.is(vo)&&(h=d.value.clip(this.state))}this.viewState.update(r,h),this.bidiCache=Pl.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(Hr)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(bo)!=r.state.facet(bo)&&(this.viewState.mustMeasureContent=!0),(n||i||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let f of this.state.facet(wc))try{f(r)}catch(d){Pt(this.state,d,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!Oy(this,c)&&u.force&&Zi(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new np(e),this.plugins=e.facet(jr).map(i=>new za(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new Fd(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(jr),i=e.state.facet(jr);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new za(s));else{let l=this.plugins[o];l.mustUpdate=e,r.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){Pt(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(N0(i))s=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(r);s=d.from,o=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(d=>{try{return d.read(this)}catch(m){return Pt(this.state,m),lp}}),h=Ol.create(this,this.state,[]),f=!1;h.flags|=a,n?n.flags|=a:n=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),f=this.docView.update(h),f&&this.docViewUpdate());for(let d=0;d<u.length;d++)if(c[d]!=lp)try{let m=u[d];m.write&&m.write(c[d],this)}catch(m){Pt(this.state,m)}if(f&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let m=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(m>1||m<-1){r=r+m,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let l of this.state.facet(wc))l(n)}get themeClasses(){return bc+" "+(this.state.facet(Cc)?Ay:My)+" "+this.state.facet(bo)}updateAttrs(){let e=ap(this,ly,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(An)?"true":"false",class:"cm-content",style:`${N.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),ap(this,ia,n);let i=this.observer.ignore(()=>{let r=pc(this.contentDOM,this.contentAttrs,n),s=pc(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(j.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Hr);let e=this.state.facet(j.cspNonce);qn.mount(this.root,this.styleModules.concat(mC).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return Ha(this,e,$d(this,e,n,i))}moveByGroup(e,n){return Ha(this,e,$d(this,e,n,i=>HS(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return L.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return jS(this,e,n,i)}moveVertically(e,n,i){return Ha(this,e,VS(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),dy(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Rn.find(s,e-r.from,-1,n)];return ta(i,o.dir==de.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(iy)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>AC)return Y0(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||K0(s.isolates,i=Bd(this,e))))return s.order;i||(i=Bd(this,e));let r=q0(e.text,n,i);return this.bidiCache.push(new Pl(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||N.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{P0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return vo.of(new er(typeof e=="number"?L.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return vo.of(new er(L.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return xe.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return xe.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=qn.newName(),r=[bo.of(i),Hr.of(Ec(`.${i}`,e))];return n&&n.dark&&r.push(Cc.of(!0)),r}static baseTheme(e){return Zl.lowest(Hr.of(Ec("."+bc,e,Ty)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&ne.get(i)||ne.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}j.styleModule=Hr;j.inputHandler=ty;j.scrollHandler=sy;j.focusChangeEffect=ny;j.perLineTextDirection=iy;j.exceptionSink=ey;j.updateListener=wc;j.editable=An;j.mouseSelectionStyle=Z0;j.dragMovesSelection=J0;j.clickAddsSelectionRange=X0;j.decorations=Ds;j.outerDecorations=ay;j.atomicRanges=Kh;j.bidiIsolatedRanges=uy;j.scrollMargins=cy;j.darkTheme=Cc;j.cspNonce=I.define({combine:t=>t.length?t[0]:""});j.contentAttributes=ia;j.editorAttributes=ly;j.lineWrapping=j.contentAttributes.of({class:"cm-lineWrapping"});j.announce=ae.define();const AC=4096,lp={};class Pl{constructor(e,n,i,r,s,o){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:de.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new Pl(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function ap(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&dc(o,n)}return n}const TC=N.mac?"mac":N.windows?"win":N.linux?"linux":"key";function OC(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,l;for(let a=0;a<n.length-1;++a){const u=n[a];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Eo(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const PC=Zl.default(j.domEventHandlers({keydown(t,e){return Ny(Dy(e.state),t,e,"editor")}})),DC=I.define({enables:PC}),up=new WeakMap;function Dy(t){let e=t.facet(DC),n=up.get(e);return n||up.set(e,n=LC(e.reduce((i,r)=>i.concat(r),[]))),n}function Kb(t,e,n){return Ny(Dy(t.state),e,t,n)}let Tn=null;const NC=4e3;function LC(t,e=TC){let n=Object.create(null),i=Object.create(null),r=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,a,u,c)=>{var h,f;let d=n[o]||(n[o]=Object.create(null)),m=l.split(/ (?!$)/).map(p=>OC(p,e));for(let p=1;p<m.length;p++){let g=m.slice(0,p).join(" ");r(g,!0),d[g]||(d[g]={preventDefault:!0,stopPropagation:!1,run:[v=>{let k=Tn={view:v,prefix:g,scope:o};return setTimeout(()=>{Tn==k&&(Tn=null)},NC),!0}]})}let y=m.join(" ");r(y,!1);let w=d[y]||(d[y]={preventDefault:!1,stopPropagation:!1,run:((f=(h=d._any)===null||h===void 0?void 0:h.run)===null||f===void 0?void 0:f.slice())||[]});a&&w.run.push(a),u&&(w.preventDefault=!0),c&&(w.stopPropagation=!0)};for(let o of t){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of l){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=o;for(let f in c)c[f].run.push(d=>h(d,Mc))}let a=o[e]||o.key;if(a)for(let u of l)s(u,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return n}let Mc=null;function Ny(t,e,n,i){Mc=e;let r=lS(e),s=ns(r,0),o=Gu(s)==r.length&&r!=" ",l="",a=!1,u=!1,c=!1;Tn&&Tn.view==n&&Tn.scope==i&&(l=Tn.prefix+" ",my.indexOf(e.keyCode)<0&&(u=!0,Tn=null));let h=new Set,f=w=>{if(w){for(let p of w.run)if(!h.has(p)&&(h.add(p),p(n)))return w.stopPropagation&&(c=!0),!0;w.preventDefault&&(w.stopPropagation&&(c=!0),u=!0)}return!1},d=t[i],m,y;return d&&(f(d[l+Eo(r,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(N.windows&&e.ctrlKey&&e.altKey)&&(m=Yn[e.keyCode])&&m!=r?(f(d[l+Eo(m,e,!0)])||e.shiftKey&&(y=Os[e.keyCode])!=r&&y!=m&&f(d[l+Eo(y,e,!1)]))&&(a=!0):o&&e.shiftKey&&f(d[l+Eo(r,e,!0)])&&(a=!0),!a&&f(d._any)&&(a=!0)),u&&(a=!0),a&&c&&e.stopPropagation(),Mc=null,a}class Ws{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=Ly(e);return[new Ws(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return RC(e,n,i)}}function Ly(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==de.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function cp(t,e,n,i){let r=t.coordsAtPos(e,n*2);if(!r)return i;let s=t.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,l=t.posAtCoords({x:s.left+1,y:o}),a=t.posAtCoords({x:s.right-1,y:o});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function RC(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==de.LTR,o=t.contentDOM,l=o.getBoundingClientRect(),a=Ly(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),h=l.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),f=l.right-(c?parseInt(c.paddingRight):0),d=kc(t,i),m=kc(t,r),y=d.type==Ke.Text?d:null,w=m.type==Ke.Text?m:null;if(y&&(t.lineWrapping||d.widgetLineBreaks)&&(y=cp(t,i,1,y)),w&&(t.lineWrapping||m.widgetLineBreaks)&&(w=cp(t,r,-1,w)),y&&w&&y.from==w.from&&y.to==w.to)return g(v(n.from,n.to,y));{let S=y?v(n.from,null,y):k(d,!1),b=w?v(null,n.to,w):k(m,!0),C=[];return(y||d).to<(w||m).from-(y&&w?1:0)||d.widgetLineBreaks>1&&S.bottom+t.defaultLineHeight/2<b.top?C.push(p(h,S.bottom,f,b.top)):S.bottom<b.top&&t.elementAtHeight((S.bottom+b.top)/2).type==Ke.Text&&(S.bottom=b.top=(S.bottom+b.top)/2),g(S).concat(C).concat(g(b))}function p(S,b,C,M){return new Ws(e,S-a.left,b-a.top-.01,C-S,M-b+.01)}function g({top:S,bottom:b,horizontal:C}){let M=[];for(let _=0;_<C.length;_+=2)M.push(p(C[_],S,C[_+1],b));return M}function v(S,b,C){let M=1e9,_=-1e9,P=[];function F(W,se,be,Ee,T){let B=t.coordsAtPos(W,W==C.to?-2:2),R=t.coordsAtPos(be,be==C.from?2:-2);!B||!R||(M=Math.min(B.top,R.top,M),_=Math.max(B.bottom,R.bottom,_),T==de.LTR?P.push(s&&se?h:B.left,s&&Ee?f:R.right):P.push(!s&&Ee?h:R.left,!s&&se?f:B.right))}let z=S??C.from,U=b??C.to;for(let W of t.visibleRanges)if(W.to>z&&W.from<U)for(let se=Math.max(W.from,z),be=Math.min(W.to,U);;){let Ee=t.state.doc.lineAt(se);for(let T of t.bidiSpans(Ee)){let B=T.from+Ee.from,R=T.to+Ee.from;if(B>=be)break;R>se&&F(Math.max(B,se),S==null&&B<=z,Math.min(R,be),b==null&&R>=U,T.dir)}if(se=Ee.to+1,se>=be)break}return P.length==0&&F(z,S==null,U,b==null,t.textDirection),{top:M,bottom:_,horizontal:P}}function k(S,b){let C=l.top+(b?S.top:S.bottom);return{top:C,bottom:C,horizontal:[]}}}function IC(t,e){return t.constructor==e.constructor&&t.eq(e)}class _C{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(Yo)!=e.state.facet(Yo)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(Yo);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!IC(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Yo=I.define();function Ry(t){return[xe.define(e=>new _C(e,t)),Yo.of(t)]}const Iy=!N.ios,mr=I.define({combine(t){return js(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function qb(t={}){return[mr.of(t),BC,FC,zC,ry.of(!0)]}function Yb(t){return t.facet(mr)}function _y(t){return t.startState.facet(mr)!=t.state.facet(mr)}const BC=Ry({above:!0,markers(t){let{state:e}=t,n=e.facet(mr),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||Iy:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=r.empty?r:L.cursor(r.head,r.head>r.anchor?-1:1);for(let a of Ws.forRange(t,o,l))i.push(a)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=_y(t);return n&&hp(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){hp(e.state,t)},class:"cm-cursorLayer"});function hp(t,e){e.style.animationDuration=t.facet(mr).cursorBlinkRate+"ms"}const FC=Ry({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Ws.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||_y(t)},class:"cm-selectionLayer"}),Ac={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};Iy&&(Ac[".cm-line"].caretColor=Ac[".cm-content"].caretColor="transparent !important");const zC=Zl.highest(j.theme(Ac)),By=ae.define({map(t,e){return t==null?null:e.mapPos(t)}}),$r=_t.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,i)=>i.is(By)?i.value:n,t)}}),jC=xe.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field($r);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field($r)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field($r),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let i=t.scrollDOM.getBoundingClientRect();return{left:n.left-i.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-i.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field($r)!=t&&this.view.dispatch({effects:By.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Gb(){return[$r,jC]}function fp(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)r(o+l.index,l)}function HC(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class Gh{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(l,a,u,c)=>r(c,u,u+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,u,c)=>{let h=i(l,a,u);h&&c(u,u+l[0].length,h)};else if(i)this.addMatch=(l,a,u,c)=>c(u,u+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new Si,i=n.add.bind(n);for(let{from:r,to:s}of HC(e,this.maxLength))fp(e.state.doc,this.regexp,r,s,(o,l)=>this.addMatch(l,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,l,a)=>{a>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),r=Math.max(a,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),l=Math.min(s.to,r);if(l>o){let a=e.state.doc.lineAt(o),u=a.to<l?e.state.doc.lineAt(l):a,c=Math.max(s.from,a.from),h=Math.min(s.to,u.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){c=o;break}for(;l<u.to;l++)if(this.boundary.test(u.text[l-u.from])){h=l;break}}let f=[],d,m=(y,w,p)=>f.push(p.range(y,w));if(a==u)for(this.regexp.lastIndex=c-a.from;(d=this.regexp.exec(a.text))&&d.index<h-a.from;)this.addMatch(d,e,d.index+a.from,m);else fp(e.state.doc,this.regexp,c,h,(y,w)=>this.addMatch(w,e,y,m));n=n.update({filterFrom:c,filterTo:h,filter:(y,w)=>y<c||w>h,add:f})}}return n}}const Tc=/x/.unicode!=null?"gu":"g",VC=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Tc),WC={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let $a=null;function $C(){var t;if($a==null&&typeof document<"u"&&document.body){let e=document.body.style;$a=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return $a||!1}const Go=I.define({combine(t){let e=js(t,{render:null,specialChars:VC,addSpecialChars:null});return(e.replaceTabs=!$C())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Tc)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Tc)),e}});function Qb(t={}){return[Go.of(t),UC()]}let dp=null;function UC(){return dp||(dp=xe.fromClass(class{constructor(t){this.view=t,this.decorations=H.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Go)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Gh({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=ns(e[0],0);if(s==9){let o=r.lineAt(i),l=n.state.tabSize,a=Vh(o.text,l,i-o.from);return H.replace({widget:new GC((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=H.replace({widget:new YC(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Go);t.startState.facet(Go)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const KC="";function qC(t){return t>=32?KC:t==10?"":String.fromCharCode(9216+t)}class YC extends ii{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=qC(this.code),i=e.state.phrase("Control character")+" "+(WC[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class GC extends ii{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const pp=xe.fromClass(class{constructor(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}update(t){let{view:e}=t,n=e.viewState.editorHeight-e.defaultLineHeight-e.documentPadding.top-.5;n>=0&&n!=this.height&&(this.height=n,this.attrs={style:`padding-bottom: ${n}px`})}});function Xb(){return[pp,ia.of(t=>{var e;return((e=t.plugin(pp))===null||e===void 0?void 0:e.attrs)||null})]}function Jb(){return XC}const QC=H.line({class:"cm-activeLine"}),XC=xe.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(QC.range(r.from)),e=r.from)}return H.set(n)}},{decorations:t=>t.decorations});class JC extends ii{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let n=e.firstChild?fr(e.firstChild):[];if(!n.length)return null;let i=window.getComputedStyle(e.parentNode),r=ta(n[0],i.direction!="rtl"),s=parseInt(i.lineHeight);return r.bottom-r.top>s*1.5?{left:r.left,right:r.right,top:r.top,bottom:r.top+s}:r}ignoreEvent(){return!1}}function Zb(t){return xe.fromClass(class{constructor(e){this.view=e,this.placeholder=t?H.set([H.widget({widget:new JC(t),side:1}).range(0)]):H.none}get decorations(){return this.view.state.doc.length?H.none:this.placeholder}},{decorations:e=>e.decorations})}const Oc=2e3;function ZC(t,e,n){let i=Math.min(e.line,n.line),r=Math.max(e.line,n.line),s=[];if(e.off>Oc||n.off>Oc||e.col<0||n.col<0){let o=Math.min(e.off,n.off),l=Math.max(e.off,n.off);for(let a=i;a<=r;a++){let u=t.doc.line(a);u.length<=l&&s.push(L.range(u.from+o,u.to+l))}}else{let o=Math.min(e.col,n.col),l=Math.max(e.col,n.col);for(let a=i;a<=r;a++){let u=t.doc.line(a),c=oc(u.text,o,t.tabSize,!0);if(c<0)s.push(L.cursor(u.to));else{let h=oc(u.text,l,t.tabSize);s.push(L.range(u.from+c,u.from+h))}}}return s}function e2(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function mp(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),i=t.state.doc.lineAt(n),r=n-i.from,s=r>Oc?-1:r==i.length?e2(t,e.clientX):Vh(i.text,t.state.tabSize,n-i.from);return{line:i.number,col:s,off:r}}function t2(t,e){let n=mp(t,e),i=t.state.selection;return n?{update(r){if(r.docChanged){let s=r.changes.mapPos(r.startState.doc.line(n.line).from),o=r.state.doc.lineAt(s);n={line:o.number,col:n.col,off:Math.min(n.off,o.length)},i=i.map(r.changes)}},get(r,s,o){let l=mp(t,r);if(!l)return i;let a=ZC(t.state,n,l);return a.length?o?L.create(a.concat(i.ranges)):L.create(a):i}}:null}function eE(t){let e=(t==null?void 0:t.eventFilter)||(n=>n.altKey&&n.button==0);return j.mouseSelectionStyle.of((n,i)=>e(i)?t2(n,i):null)}const n2={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},i2={style:"cursor: crosshair"};function tE(t={}){let[e,n]=n2[t.key||"Alt"],i=xe.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||n(r))},keyup(r){(r.keyCode==e||!n(r))&&this.set(!1)},mousemove(r){this.set(n(r))}}});return[i,j.contentAttributes.of(r=>{var s;return!((s=r.plugin(i))===null||s===void 0)&&s.isDown?i2:null})]}const Rr="-10000px";class Fy{constructor(e,n,i,r){this.facet=n,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(a=>a);if(r===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=n?[]:null;for(let a=0;a<s.length;a++){let u=s[a],c=-1;if(u){for(let h=0;h<this.tooltips.length;h++){let f=this.tooltips[h];f&&f.create==u.create&&(c=h)}if(c<0)o[a]=this.createTooltipView(u,a?o[a-1]:null),l&&(l[a]=!!u.above);else{let h=o[a]=this.tooltipViews[c];l&&(l[a]=n[c]),h.update&&h.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return n&&(l.forEach((a,u)=>n[u]=a),n.length=l.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function nE(t={}){return Qo.of(t)}function r2(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Qo=I.define({combine:t=>{var e,n,i;return{position:N.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||r2}}}),gp=new WeakMap,ra=xe.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Qo);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Fy(t,zy,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(Qo);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=Rr,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect(),e=1,n=1,i=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(N.gecko)i=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==Rr&&r.style.left=="0px"){let s=r.getBoundingClientRect();i=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(i||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(e=r.width/this.parent.offsetWidth,n=r.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:n}=this.view.viewState);return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((r,s)=>{let o=this.manager.tooltipViews[s];return o.getCoords?o.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(Qo).tooltipSpace(this.view),scaleX:e,scaleY:n,makeAbsolute:i}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{editor:n,space:i,scaleX:r,scaleY:s}=t,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],u=this.manager.tooltipViews[l],{dom:c}=u,h=t.pos[l],f=t.size[l];if(!h||h.bottom<=Math.max(n.top,i.top)||h.top>=Math.min(n.bottom,i.bottom)||h.right<Math.max(n.left,i.left)-.1||h.left>Math.min(n.right,i.right)+.1){c.style.top=Rr;continue}let d=a.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,m=d?7:0,y=f.right-f.left,w=(e=gp.get(u))!==null&&e!==void 0?e:f.bottom-f.top,p=u.offset||o2,g=this.view.textDirection==de.LTR,v=f.width>i.right-i.left?g?i.left:i.right-f.width:g?Math.min(h.left-(d?14:0)+p.x,i.right-y):Math.max(i.left,h.left-y+(d?14:0)-p.x),k=this.above[l];!a.strictSide&&(k?h.top-(f.bottom-f.top)-p.y<i.top:h.bottom+(f.bottom-f.top)+p.y>i.bottom)&&k==i.bottom-h.bottom>h.top-i.top&&(k=this.above[l]=!k);let S=(k?h.top-i.top:i.bottom-h.bottom)-m;if(S<w&&u.resize!==!1){if(S<this.view.defaultLineHeight){c.style.top=Rr;continue}gp.set(u,w),c.style.height=(w=S)/s+"px"}else c.style.height&&(c.style.height="");let b=k?h.top-w-m-p.y:h.bottom+m+p.y,C=v+y;if(u.overlap!==!0)for(let M of o)M.left<C&&M.right>v&&M.top<b+w&&M.bottom>b&&(b=k?M.top-w-2-m:M.bottom+m+2);if(this.position=="absolute"?(c.style.top=(b-t.parent.top)/s+"px",c.style.left=(v-t.parent.left)/r+"px"):(c.style.top=b/s+"px",c.style.left=v/r+"px"),d){let M=h.left+(g?p.x:-p.x)-(v+14-7);d.style.left=M/r+"px"}u.overlap!==!0&&o.push({left:v,top:b,right:C,bottom:b+w}),c.classList.toggle("cm-tooltip-above",k),c.classList.toggle("cm-tooltip-below",!k),u.positioned&&u.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Rr}},{eventObservers:{scroll(){this.maybeMeasure()}}}),s2=j.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),o2={x:0,y:0},zy=I.define({enables:[ra,s2]}),Ns=I.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class sa{static create(e){return new sa(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Fy(e,Ns,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const l2=zy.compute([Ns],t=>{let e=t.facet(Ns);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:sa.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class a2{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let r,s=1;if(i instanceof Ln)r=i.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let l=e.coordsAtPos(r);if(!l||n.y<l.top||n.y>l.bottom||n.x<l.left-e.defaultCharacterWidth||n.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(r)).find(c=>c.from<=r&&c.to>=r),u=a&&a.dir==de.RTL?-1:1;s=n.x<l.left?-u:u}let o=this.source(e,r,s);if(o!=null&&o.then){let l=this.pending={pos:r};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>Pt(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(ra),n=e?e.manager.tooltips.findIndex(i=>i.create==sa.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!u2(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,l=(i=(n=r[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!c2(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Mo=4;function u2(t,e){let n=t.getBoundingClientRect();return e.clientX>=n.left-Mo&&e.clientX<=n.right+Mo&&e.clientY>=n.top-Mo&&e.clientY<=n.bottom+Mo}function c2(t,e,n,i,r,s){let o=t.scrollDOM.getBoundingClientRect(),l=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,l)<r)return!1;let a=t.posAtCoords({x:i,y:r},!1);return a>=e&&a<=n}function iE(t,e={}){let n=ae.define(),i=_t.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let l of r){let a=s.changes.mapPos(l.pos,-1,et.TrackDel);if(a!=null){let u=Object.assign(Object.create(null),l);u.pos=a,u.end!=null&&(u.end=s.changes.mapPos(u.end)),o.push(u)}}r=o}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(jy)&&(r=[]);return r},provide:r=>Ns.from(r)});return[i,xe.define(r=>new a2(r,t,i,n,e.hoverTime||300)),l2]}function rE(t,e){let n=t.plugin(ra);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}function sE(t){return t.facet(Ns).some(e=>e)}const jy=ae.define(),oE=jy.of(null);function lE(t){let e=t.plugin(ra);e&&e.maybeMeasure()}const Pc=I.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function aE(t){return t?[Pc.of(t)]:[]}function uE(t,e){let n=t.plugin(Hy),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const Hy=xe.fromClass(class{constructor(t){this.input=t.state.facet(vp),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(Pc);this.top=new Ao(t,!0,e.topContainer),this.bottom=new Ao(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(Pc);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Ao(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ao(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(vp);if(n!=this.input){let i=n.filter(a=>a),r=[],s=[],o=[],l=[];for(let a of i){let u=this.specs.indexOf(a),c;u<0?(c=a(t.view),l.push(c)):(c=this.panels[u],c.update&&c.update(t)),r.push(c),(c.top?s:o).push(c)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>j.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Ao{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=yp(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=yp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function yp(t){let e=t.nextSibling;return t.remove(),e}const vp=I.define({enables:Hy});class yn extends hr{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}yn.prototype.elementClass="";yn.prototype.toDOM=void 0;yn.prototype.mapMode=et.TrackBefore;yn.prototype.startSide=yn.prototype.endSide=-1;yn.prototype.point=!0;const Xo=I.define(),h2={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>q.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},os=I.define();function f2(t){return[Vy(),os.of(Object.assign(Object.assign({},h2),t))]}const Dc=I.define({combine:t=>t.some(e=>e)});function Vy(t){let e=[d2];return t&&t.fixed===!1&&e.push(Dc.of(!0)),e}const d2=xe.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(os).map(e=>new xp(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(Dc),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Dc)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=q.iter(this.view.state.facet(Xo),this.view.viewport.from),i=[],r=this.gutters.map(s=>new p2(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let l of s.type)if(l.type==Ke.Text&&o){Nc(n,i,l.from);for(let a of r)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of r)a.widget(this.view,l)}else if(s.type==Ke.Text){Nc(n,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(os),n=t.state.facet(os),i=t.docChanged||t.heightChanged||t.viewportChanged||!q.eq(t.startState.facet(Xo),t.state.facet(Xo),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new xp(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>j.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==de.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}})});function wp(t){return Array.isArray(t)?t:[t]}function Nc(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class p2{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=q.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==r.elements.length){let l=new Wy(e,o,s,i);r.elements.push(l),r.dom.appendChild(l.dom)}else r.elements[this.i].update(e,o,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];Nc(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n);i&&this.addElement(e,n,[i])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class xp{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=r.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,l,r)&&r.preventDefault()});this.markers=wp(n.markers(e)),n.initialSpacer&&(this.spacer=new Wy(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=wp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!q.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Wy{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),m2(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let l=o,a=s<n.length?n[s++]:null,u=!1;if(a){let c=a.elementClass;c&&(i+=" "+c);for(let h=o;h<this.markers.length;h++)if(this.markers[h].compare(a)){l=h,u=!0;break}}else l=this.markers.length;for(;o<l;){let c=this.markers[o++];if(c.toDOM){c.destroy(r);let h=r.nextSibling;r.remove(),r=h}}if(!a)break;a.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),u&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function m2(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const g2=I.define(),Wi=I.define({combine(t){return js(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(l,a,u)=>s(l,a,u)||o(l,a,u):o}return i}})}});class Ua extends yn{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Ka(t,e){return t.state.facet(Wi).formatNumber(e,t.state)}const y2=os.compute([Wi],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(g2)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new Ua(Ka(e,e.state.doc.lineAt(n.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(Wi)!=e.state.facet(Wi),initialSpacer(e){return new Ua(Ka(e,kp(e.state.doc.lines)))},updateSpacer(e,n){let i=Ka(n.view,kp(n.view.state.doc.lines));return i==e.number?e:new Ua(i)},domEventHandlers:t.facet(Wi).domEventHandlers}));function cE(t={}){return[Wi.of(t),Vy(),y2]}function kp(t){let e=9;for(;e<t;)e=e*10+9;return e}const v2=new class extends yn{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},w2=Xo.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(v2.range(r)))}return q.of(e)});function hE(){return w2}const Sp=new Map;function x2(t){let e=Sp.get(t);return e||Sp.set(t,e=H.mark({attributes:t==="	"?{class:"cm-highlightTab"}:{class:"cm-highlightSpace","data-display":t.replace(/ /g,"")}})),e}function $y(t){return xe.define(e=>({decorations:t.createDeco(e),update(n){this.decorations=t.updateDeco(n,this.decorations)}}),{decorations:e=>e.decorations})}const k2=$y(new Gh({regexp:/\t| +/g,decoration:t=>x2(t[0]),boundary:/\S/}));function fE(){return k2}const S2=$y(new Gh({regexp:/\s+$/g,decoration:H.mark({class:"cm-trailingSpace"}),boundary:/\S/}));function dE(){return S2}const pE={HeightMap:Ve,HeightOracle:Cy,MeasuredHeights:by,QueryType:ie,ChangedRange:ct,computeOrder:q0,moveVisually:Q0};var qa;const Ur=new Y,C2=new Y;class Gt{constructor(e,n,i=[],r=""){this.data=e,this.name=r,X.prototype.hasOwnProperty("tree")||Object.defineProperty(X.prototype,"tree",{get(){return Jt(this)}}),this.parser=n,this.extension=[Qn.of(this),X.languageData.of((s,o,l)=>{let a=Cp(s,o,l),u=a.type.prop(Ur);if(!u)return[];let c=s.facet(u),h=a.type.prop(C2);if(h){let f=a.resolve(o-a.from,l);for(let d of h)if(d.test(f,s)){let m=s.facet(d.facet);return d.type=="replace"?m:m.concat(c)}}return c})].concat(i)}isActiveAt(e,n,i=-1){return Cp(e,n,i).type.prop(Ur)==this.data}findRegions(e){let n=e.facet(Qn);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(Ur)==this.data){i.push({from:o,to:o+s.length});return}let l=s.prop(Y.mounted);if(l){if(l.tree.prop(Ur)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+s.length});return}else if(l.overlay){let a=i.length;if(r(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<s.children.length;a++){let u=s.children[a];u instanceof je&&r(u,s.positions[a]+o)}};return r(Jt(e),0),i}get allowsNesting(){return!0}}Gt.setState=ae.define();function Cp(t,e,n){let i=t.facet(Qn),r=Jt(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,De.ExcludeBuffers))s.type.isTop&&(r=s);return r}function Jt(t){let e=t.field(Gt.state,!1);return e?e.tree:je.empty}class b2{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Ir=null;class Dl{constructor(e,n,i=[],r,s,o,l,a){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new Dl(e,n,[],je.empty,0,i,[],null)}startParse(){return this.parser.startParse(new b2(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=je.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(gi.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(gi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Ir;Ir=this;try{return e()}finally{Ir=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=bp(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,c,h,f)=>a.push({fromA:u,toA:c,fromB:h,toB:f})),i=gi.applyChanges(i,a),r=je.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),h=e.mapPos(u.to,-1);c<h&&l.push({from:c,to:h})}}}return new Dl(this.parser,n,i,r,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=bp(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Dk{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let a=Ir;if(a){for(let u of r)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new je(Ct.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Ir}}function bp(t,e,n){return gi.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class gr{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new gr(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=Dl.create(e.facet(Qn).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new gr(i)}}Gt.state=_t.define({create:gr.init,update(t,e){for(let n of e.effects)if(n.is(Gt.setState))return n.value;return e.startState.facet(Qn)!=e.state.facet(Qn)?gr.init(e.state):t.apply(e)}});let Uy=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Uy=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Ya=typeof navigator<"u"&&(!((qa=navigator.scheduling)===null||qa===void 0)&&qa.isInputPending)?()=>navigator.scheduling.isInputPending():null,E2=xe.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Gt.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Gt.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=Uy(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(Gt.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Ya?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<r&&i.doc.length>r+1e3,a=s.context.work(()=>Ya&&Ya()||Date.now()>o,r+(l?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Gt.setState.of(new gr(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Pt(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Qn=I.define({combine(t){return t.length?t[0]:null},enables:t=>[Gt.state,E2,j.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]}),M2=I.define(),Ky=I.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function A2(t){let e=t.facet(Ky);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function T2(t,e){let n="",i=t.tabSize,r=t.facet(Ky)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function O2(t,e){t instanceof X&&(t=new qy(t));for(let i of t.state.facet(M2)){let r=i(t,e);if(r!==void 0)return r}let n=Jt(t.state);return n.length>=e?D2(t,n,e):null}class qy{constructor(e,n={}){this.state=e,this.options=n,this.unit=A2(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return Vh(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const P2=new Y;function D2(t,e,n){let i=e.resolveStack(n),r=i.node.enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let o=r;o!=i.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return Yy(i,t,n)}function Yy(t,e,n){for(let i=t;i;i=i.next){let r=L2(i.node);if(r)return r(Qh.create(e,n,i))}return 0}function N2(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function L2(t){let e=t.type.prop(P2);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(Y.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>B2(o,!0,1,void 0,s&&!N2(o)?r.from:void 0)}return t.parent==null?R2:null}function R2(){return 0}class Qh extends qy{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new Qh(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(I2(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return Yy(this.context.next,this.base,this.pos)}}function I2(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function _2(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let l=n.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped)return a.from<o?n:null;l=a.to}}function B2(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,l=r==t.pos+o,a=_2(t);return a?l?t.column(a.from):t.column(a.to):t.baseIndent+(l?0:t.unit*n)}const F2=200;function gE(){return X.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.main,r=n.lineAt(i);if(i>r.from+F2)return t;let s=n.sliceString(r.from,i);if(!e.some(u=>u.test(s)))return t;let{state:o}=t,l=-1,a=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==l)continue;l=c.from;let h=O2(o,c.from);if(h==null)continue;let f=/^\s*/.exec(c.text)[0],d=T2(o,h);f!=d&&a.push({from:c.from,to:c.from+f.length,insert:d})}return a.length?[t,{changes:a,sequential:!0}]:t})}const z2=I.define(),j2=new Y;function H2(t,e,n){let i=Jt(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let o=r;o;o=o.next){let l=o.node;if(l.to<=n||l.from>n)continue;if(s&&l.from<e)break;let a=l.type.prop(j2);if(a&&(l.to<i.length-50||i.length==t.doc.length||!V2(l))){let u=a(l,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function V2(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Nl(t,e,n){for(let i of t.facet(z2)){let r=i(t,e,n);if(r)return r}return H2(t,e,n)}function Gy(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const oa=ae.define({map:Gy}),$s=ae.define({map:Gy});function Qy(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const Mi=_t.define({create(){return H.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(oa)&&!W2(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(Zy),r=i?H.replace({widget:new G2(i(e.state,n.value))}):Ep;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is($s)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:i}=e.selection.main;t.between(i,i,(r,s)=>{r<i&&s>i&&(n=!0)}),n&&(t=t.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return t},provide:t=>j.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(Ep.range(i,r))}return H.set(e,!0)}});function Ll(t,e,n){var i;let r=null;return(i=t.field(Mi,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function W2(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function Xy(t,e){return t.field(Mi,!1)?e:e.concat(ae.appendConfig.of(ev()))}const $2=t=>{for(let e of Qy(t)){let n=Nl(t.state,e.from,e.to);if(n)return t.dispatch({effects:Xy(t.state,[oa.of(n),Jy(t,n)])}),!0}return!1},U2=t=>{if(!t.state.field(Mi,!1))return!1;let e=[];for(let n of Qy(t)){let i=Ll(t.state,n.from,n.to);i&&e.push($s.of(i),Jy(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function Jy(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return j.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const K2=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=Nl(e,r.from,r.to);s&&n.push(oa.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:Xy(t.state,n)}),!!n.length},q2=t=>{let e=t.state.field(Mi,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push($s.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},yE=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:$2},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:U2},{key:"Ctrl-Alt-[",run:K2},{key:"Ctrl-Alt-]",run:q2}],Y2={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Zy=I.define({combine(t){return js(t,Y2)}});function ev(t){return[Mi,X2]}function tv(t,e){let{state:n}=t,i=n.facet(Zy),r=o=>{let l=t.lineBlockAt(t.posAtDOM(o.target)),a=Ll(t.state,l.from,l.to);a&&t.dispatch({effects:$s.of(a)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const Ep=H.replace({widget:new class extends ii{toDOM(t){return tv(t,null)}}});class G2 extends ii{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return tv(e,this.value)}}const Q2={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Ga extends yn{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function vE(t={}){let e=Object.assign(Object.assign({},Q2),t),n=new Ga(e,!0),i=new Ga(e,!1),r=xe.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Qn)!=o.state.facet(Qn)||o.startState.field(Mi,!1)!=o.state.field(Mi,!1)||Jt(o.startState)!=Jt(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new Si;for(let a of o.viewportLineBlocks){let u=Ll(o.state,a.from,a.to)?i:Nl(o.state,a.from,a.to)?n:null;u&&l.add(a.from,a.from,u)}return l.finish()}}),{domEventHandlers:s}=e;return[r,f2({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(r))===null||l===void 0?void 0:l.markers)||q.empty},initialSpacer(){return new Ga(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,l,a)=>{if(s.click&&s.click(o,l,a))return!0;let u=Ll(o.state,l.from,l.to);if(u)return o.dispatch({effects:$s.of(u)}),!0;let c=Nl(o.state,l.from,l.to);return c?(o.dispatch({effects:oa.of(c)}),!0):!1}})}),ev()]}const X2=j.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Us{constructor(e,n){this.specs=e;let i;function r(l){let a=qn.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof Gt?l=>l.prop(Ur)==o.data:o?l=>l==o:void 0,this.style=h0(e.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=i?new qn(i):null,this.themeType=n.themeType}static define(e,n){return new Us(e,n||{})}}const Lc=I.define(),nv=I.define({combine(t){return t.length?[t[0]]:null}});function Qa(t){let e=t.facet(Lc);return e.length?e:t.facet(nv)}function J2(t,e){let n=[eb],i;return t instanceof Us&&(t.module&&n.push(j.styleModule.of(t.module)),i=t.themeType),e!=null&&e.fallback?n.push(nv.of(t)):i?n.push(Lc.computeN([j.darkTheme],r=>r.facet(j.darkTheme)==(i=="dark")?[t]:[])):n.push(Lc.of(t)),n}class Z2{constructor(e){this.markCache=Object.create(null),this.tree=Jt(e.state),this.decorations=this.buildDeco(e,Qa(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=Jt(e.state),i=Qa(e.state),r=i!=Qa(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return H.none;let i=new Si;for(let{from:r,to:s}of e.visibleRanges)zk(this.tree,n,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=H.mark({class:a})))},r,s);return i.finish()}}const eb=Zl.high(xe.fromClass(Z2,{decorations:t=>t.decorations})),wE=Us.define([{tag:x.meta,color:"#404740"},{tag:x.link,textDecoration:"underline"},{tag:x.heading,textDecoration:"underline",fontWeight:"bold"},{tag:x.emphasis,fontStyle:"italic"},{tag:x.strong,fontWeight:"bold"},{tag:x.strikethrough,textDecoration:"line-through"},{tag:x.keyword,color:"#708"},{tag:[x.atom,x.bool,x.url,x.contentSeparator,x.labelName],color:"#219"},{tag:[x.literal,x.inserted],color:"#164"},{tag:[x.string,x.deleted],color:"#a11"},{tag:[x.regexp,x.escape,x.special(x.string)],color:"#e40"},{tag:x.definition(x.variableName),color:"#00f"},{tag:x.local(x.variableName),color:"#30a"},{tag:[x.typeName,x.namespace],color:"#085"},{tag:x.className,color:"#167"},{tag:[x.special(x.variableName),x.macroName],color:"#256"},{tag:x.definition(x.propertyName),color:"#00c"},{tag:x.comment,color:"#940"},{tag:x.invalid,color:"#f00"}]),tb=j.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),iv=1e4,rv="()[]{}",sv=I.define({combine(t){return js(t,{afterCursor:!0,brackets:rv,maxScanDistance:iv,renderMatch:rb})}}),nb=H.mark({class:"cm-matchingBracket"}),ib=H.mark({class:"cm-nonmatchingBracket"});function rb(t){let e=[],n=t.matched?nb:ib;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const sb=_t.define({create(){return H.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],i=e.state.facet(sv);for(let r of e.state.selection.ranges){if(!r.empty)continue;let s=To(e.state,r.head,-1,i)||r.head>0&&To(e.state,r.head-1,1,i)||i.afterCursor&&(To(e.state,r.head,1,i)||r.head<e.state.doc.length&&To(e.state,r.head+1,-1,i));s&&(n=n.concat(i.renderMatch(s,e.state)))}return H.set(n,!0)},provide:t=>j.decorations.from(t)}),ob=[sb,tb];function xE(t={}){return[sv.of(t),ob]}const lb=new Y;function Rc(t,e,n){let i=t.prop(e<0?Y.openedBy:Y.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function Ic(t){let e=t.type.prop(lb);return e?e(t.node):t}function To(t,e,n,i={}){let r=i.maxScanDistance||iv,s=i.brackets||rv,o=Jt(t),l=o.resolveInner(e,n);for(let a=l;a;a=a.parent){let u=Rc(a.type,n,s);if(u&&a.from<a.to){let c=Ic(a);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return ab(t,e,n,a,c,u,s)}}return ub(t,e,n,o,l.type,r,s)}function ab(t,e,n,i,r,s,o){let l=i.parent,a={from:r.from,to:r.to},u=0,c=l==null?void 0:l.cursor();if(c&&(n<0?c.childBefore(i.from):c.childAfter(i.to)))do if(n<0?c.to<=i.from:c.from>=i.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let h=Ic(c);return{start:a,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(Rc(c.type,n,o))u++;else if(Rc(c.type,-n,o)){if(u==0){let h=Ic(c);return{start:a,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function ub(t,e,n,i,r,s,o){let l=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),h=0;for(let f=0;!c.next().done&&f<=s;){let d=c.value;n<0&&(f+=d.length);let m=e+f*n;for(let y=n>0?0:d.length-1,w=n>0?d.length:-1;y!=w;y+=n){let p=o.indexOf(d[y]);if(!(p<0||i.resolveInner(m+y,1).type!=r))if(p%2==0==n>0)h++;else{if(h==1)return{start:u,end:{from:m+y,to:m+y+1},matched:p>>1==a>>1};h--}}n>0&&(f+=d.length)}return c.done?{start:u,matched:!1}:null}const cb=Object.create(null),Mp=[Ct.none],Ap=[],Tp=Object.create(null),hb=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])hb[t]=fb(cb,e);function Xa(t,e){Ap.indexOf(t)>-1||(Ap.push(t),console.warn(e))}function fb(t,e){let n=[];for(let l of e.split(" ")){let a=[];for(let u of l.split(".")){let c=t[u]||x[u];c?typeof c=="function"?a.length?a=a.map(c):Xa(u,`Modifier ${u} used at start of tag`):a.length?Xa(u,`Tag ${u} used as modifier`):a=Array.isArray(c)?c:[c]:Xa(u,`Unknown highlighting tag ${u}`)}for(let u of a)n.push(u)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(l=>l.id),s=Tp[r];if(s)return s.id;let o=Tp[r]=Ct.define({id:Mp.length,name:i,props:[Bk({[i]:n})]});return Mp.push(o),o.id}de.RTL,de.LTR;var ov=t=>{var{theme:e,settings:n={},styles:i=[]}=t,r={".cm-gutters":{}},s={};n.background&&(s.backgroundColor=n.background),n.backgroundImage&&(s.backgroundImage=n.backgroundImage),n.foreground&&(s.color=n.foreground),n.fontSize&&(s.fontSize=n.fontSize),(n.background||n.foreground)&&(r["&"]=s),n.fontFamily&&(r["&.cm-editor .cm-scroller"]={fontFamily:n.fontFamily}),n.gutterBackground&&(r[".cm-gutters"].backgroundColor=n.gutterBackground),n.gutterForeground&&(r[".cm-gutters"].color=n.gutterForeground),n.gutterBorder&&(r[".cm-gutters"].borderRightColor=n.gutterBorder),n.caret&&(r[".cm-content"]={caretColor:n.caret},r[".cm-cursor, .cm-dropCursor"]={borderLeftColor:n.caret});var o={};n.gutterActiveForeground&&(o.color=n.gutterActiveForeground),n.lineHighlight&&(r[".cm-activeLine"]={backgroundColor:n.lineHighlight},o.backgroundColor=n.lineHighlight),r[".cm-activeLineGutter"]=o,n.selection&&(r["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:n.selection+" !important"}),n.selectionMatch&&(r["& .cm-selectionMatch"]={backgroundColor:n.selectionMatch});var l=j.theme(r,{dark:e==="dark"}),a=Us.define(i),u=[l,J2(a)];return u},db={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#f0f0f0",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'};function pb(t){var{theme:e="dark",settings:n={},styles:i=[]}={};return ov({theme:e,settings:Sl({},db,n),styles:[{tag:[x.keyword,x.operatorKeyword,x.modifier,x.color,x.constant(x.name),x.standard(x.name),x.standard(x.tagName),x.special(x.brace),x.atom,x.bool,x.special(x.variableName)],color:"#0000ff"},{tag:[x.moduleKeyword,x.controlKeyword],color:"#af00db"},{tag:[x.name,x.deleted,x.character,x.macroName,x.propertyName,x.variableName,x.labelName,x.definition(x.name)],color:"#0070c1"},{tag:x.heading,fontWeight:"bold",color:"#0070c1"},{tag:[x.typeName,x.className,x.tagName,x.number,x.changed,x.annotation,x.self,x.namespace],color:"#267f99"},{tag:[x.function(x.variableName),x.function(x.propertyName)],color:"#795e26"},{tag:[x.number],color:"#098658"},{tag:[x.operator,x.punctuation,x.separator,x.url,x.escape,x.regexp],color:"#383a42"},{tag:[x.regexp],color:"#af00db"},{tag:[x.special(x.string),x.processingInstruction,x.string,x.inserted],color:"#a31515"},{tag:[x.angleBracket],color:"#383a42"},{tag:x.strong,fontWeight:"bold"},{tag:x.emphasis,fontStyle:"italic"},{tag:x.strikethrough,textDecoration:"line-through"},{tag:[x.meta,x.comment],color:"#008000"},{tag:x.link,color:"#4078f2",textDecoration:"underline"},{tag:x.invalid,color:"#e45649"},...i]})}pb();var mb={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'};function gb(t){var{theme:e="dark",settings:n={},styles:i=[]}={};return ov({theme:e,settings:Sl({},mb,n),styles:[{tag:[x.keyword,x.operatorKeyword,x.modifier,x.color,x.constant(x.name),x.standard(x.name),x.standard(x.tagName),x.special(x.brace),x.atom,x.bool,x.special(x.variableName)],color:"#569cd6"},{tag:[x.controlKeyword,x.moduleKeyword],color:"#c586c0"},{tag:[x.name,x.deleted,x.character,x.macroName,x.propertyName,x.variableName,x.labelName,x.definition(x.name)],color:"#9cdcfe"},{tag:x.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[x.typeName,x.className,x.tagName,x.number,x.changed,x.annotation,x.self,x.namespace],color:"#4ec9b0"},{tag:[x.function(x.variableName),x.function(x.propertyName)],color:"#dcdcaa"},{tag:[x.number],color:"#b5cea8"},{tag:[x.operator,x.punctuation,x.separator,x.url,x.escape,x.regexp],color:"#d4d4d4"},{tag:[x.regexp],color:"#d16969"},{tag:[x.special(x.string),x.processingInstruction,x.string,x.inserted],color:"#ce9178"},{tag:[x.angleBracket],color:"#808080"},{tag:x.strong,fontWeight:"bold"},{tag:x.emphasis,fontStyle:"italic"},{tag:x.strikethrough,textDecoration:"line-through"},{tag:[x.meta,x.comment],color:"#6a9955"},{tag:x.link,color:"#6a9955",textDecoration:"underline"},{tag:x.invalid,color:"#ff0000"},...i]})}var yb=gb();const vb=G.lazy(()=>kk(()=>import("./index-WbGJ2mag.js"),[]));function wb({group:t}){const e=kr(),n=xr(e.fileId),i=Lh(),[r,s]=Ck((n==null?void 0:n.content)??"",{delay:2e3,onChange:o=>{n.content!=o&&i({...n,content:o,uts:Date.now().toString(36)})}});return n?E.jsx(G.Suspense,{fallback:E.jsx("div",{children:"Loading..."}),children:E.jsx(vb,{style:{overflowY:"auto"},theme:yb,value:r,onChange:s})}):null}const lv="<",av=">",uv="'",Oo="@",fe={NIL:0,ATOM:1,NUM:2,PAIR:3,CLOS:4,PRIM:5,STRING:6};function xb(){return{tag:0}}function kb(t){return{tag:1,atom:t}}function tn(t){return{tag:2,num:t}}function Sb(t){return{tag:6,str:t}}function Ls(t,e){return{tag:3,pair:{car:t,cdr:e}}}function Cb(t,e){return{tag:4,clos:{body:t,env:{head:e}}}}function bb(t){return{tag:5,prim:{func:t}}}function fi(t,e){const n=t.internedAtoms.find(r=>r.atom===e);if(n)return n;const i=kb(e);return t.internedAtoms.push(i),i}function Xn(t){if(t.tag!==fe.PAIR)throw new Error("Cannot car a not-Pair");return t.pair.car}function Jn(t){if(t.tag!==fe.PAIR)throw new Error("Cannot cdr a not-Pair");return t.pair.cdr}function Eb(t,e){return t==e||t.tag===fe.NUM&&e.tag===fe.NUM&&t.num===e.num}function Qe(t){return t.tag===fe.NUM?t.num:NaN}function Zn(t){return t.input.length===t.inputPos?"":t.input.charAt(t.inputPos)}function Xe(t){t.input.length>t.inputPos&&t.inputPos++}function cv(t){return t.trim().length===0}const Mb=[av,lv,uv],Ab=["(",")",";"];function Tb(t){return Mb.includes(t)}function Ob(t){return cv(t)||Tb(t)||Ab.includes(t)}function Rl(t){const e=Zn(t);if(e!==""){if(cv(e))return Xe(t),Rl(t);if(e===";"){for(Xe(t);;){const n=Zn(t);if(n==="")return;if(Xe(t),n===`
`)break}Rl(t)}}}function Wn(t){if(t.readStack.length)return t.readStack.pop();Rl(t);const e=Zn(t);if(e==="")return null;if(e===uv)return Xe(t),t.QUOTE;if(e===lv)return Xe(t),t.readStack.push(t.PUSH,Ja(t),t.QUOTE),Wn(t);if(e===av)return Xe(t),t.readStack.push(t.POP,Ja(t),t.QUOTE),Wn(t);if(e===Oo){if(Xe(t),Zn(t)!=="(")throw new Error(`${Oo} sigil must be used in the form '${Oo}(... ...)'`);Xe(t);const i=fi(t,"dict-get");let r=_c(t);if(r==t.NIL)throw new Error(`${Oo} list cannot be empty`);let s=[Xn(r)];for(r=Jn(r);r!=t.NIL;)s.push(t.QUOTE,Xn(r),i),r=Jn(r);return t.readStack=t.readStack.concat(s.toReversed()),Wn(t)}return e==='"'?(Xe(t),Pb(t)):e==="("?(Xe(t),_c(t)):Ja(t)}function Ja(t){const e=t.inputPos;for(;!Ob(Zn(t));)Xe(t);const n=t.input.slice(e,t.inputPos),i=Number(n);return Number.isNaN(i)?fi(t,n):tn(i)}function _c(t){if(!t.readStack.length&&(Rl(t),Zn(t)===")"))return Xe(t),t.NIL;const e=Wn(t),n=_c(t);return Ls(e,n)}function Pb(t){const e=t.inputPos;let n=Zn(t),i=!1;for(;i||n!=='"';)i=n=="\\",Xe(t),n=Zn(t);let r=t.input.slice(e,t.inputPos);return r=JSON.parse(`["${r}"]`)[0],Xe(t),Sb(r)}function Db(t,e){t.io.std.printLine(Rs(e))}function Rs(t){switch(t.tag){case fe.NIL:return"()";case fe.ATOM:return t.atom;case fe.NUM:return t.num.toString();case fe.STRING:return t.str;case fe.PAIR:return`(${Rs(t.pair.car)}${hv(t.pair.cdr)}`;case fe.CLOS:return`CLOSURE<${Rs(t.clos.body)}>`;case fe.PRIM:return`PRIM<${t.prim.func.name||t.prim.func.toString()}>`;default:return"UNKNOWN_VALUE"}}function hv(t){switch(t.tag){case fe.NIL:return")";case fe.PAIR:return` ${Rs(t.pair.car)}${hv(t.pair.cdr)}`;default:return` . ${Rs(t)})`}}function fv(t,e){if(e.tag!==fe.ATOM)throw new Error("Expected 'key' to be an atom in envFind");let n=t.head;for(;n.tag!=fe.NIL;){const i=Xn(n);if(e==Xn(i))return Jn(i);n=Jn(n)}throw new Error(`Failed to find '${e.atom||JSON.stringify(e)}' in environment`)}function dv(t,e,n){t.head=Ls(Ls(e,n),t.head)}function Op(t,e,n,i){return dv(e,fi(t,n),bb(i))}function ce(t,e){t.stack=Ls(e,t.stack)}function Q(t){if(t.stack===t.NIL)throw new Error("Value Stack underflow");const e=Xn(t.stack);return t.stack=Jn(t.stack),e}function Nb(t,e,n){switch(n.tag){case fe.ATOM:{const i=fv(e,n);switch(i.tag){case fe.CLOS:return Il(t,i.clos.env,i.clos.body);case fe.PRIM:return i.prim.func(t,e);default:return ce(t,i)}}case fe.NIL:case fe.PAIR:return ce(t,Cb(n,e.head));default:return ce(t,n)}}function Il(t,e,n){let i=n;for(;i!=t.NIL;){const r=Xn(i);if(i=Jn(i),r==t.QUOTE){if(i==t.NIL)throw new Error("Expected data following quote form");ce(t,Xn(i)),i=Jn(i);continue}Nb(t,e,r)}}const Lb={push:(t,e)=>{ce(t,fv(e,Q(t)))},pop:(t,e)=>{const n=Q(t),i=Q(t);dv(e,n,i)},eq:(t,e)=>{ce(t,Eb(Q(t),Q(t))?t.TRUE:t.NIL)},cons:(t,e)=>{const n=Q(t),i=Q(t);ce(t,Ls(n,i))},car:(t,e)=>{ce(t,Xn(Q(t)))},cdr:(t,e)=>{ce(t,Jn(Q(t)))},cswap:(t,e)=>{if(Q(t)==t.TRUE){const n=Q(t),i=Q(t);ce(t,n),ce(t,i)}},tag:(t,e)=>{ce(t,tn(Q(t).tag))},read:(t,e)=>{ce(t,Wn(t))},print:(t,e)=>{Db(t,Q(t))}},Rb={stack:(t,e)=>{ce(t,t.stack)},env:(t,e)=>{ce(t,e.head)},"*":(t,e)=>{const n=Q(t),i=Q(t);ce(t,tn(Qe(i)*Qe(n)))},"/":(t,e)=>{const n=Q(t),i=Q(t);ce(t,tn(Qe(i)/Qe(n)))},"-":(t,e)=>{const n=Q(t),i=Q(t);ce(t,tn(Qe(i)-Qe(n)))},"+":(t,e)=>{const n=Q(t),i=Q(t);ce(t,tn(Qe(i)+Qe(n)))},"b-nor":(t,e)=>{const n=Q(t),i=Q(t);ce(t,tn(~(Qe(i)|Qe(n))))},"b-shr":(t,e)=>{const n=Q(t),i=Q(t);ce(t,tn(Qe(i)>>Qe(n)))},"b-shl":(t,e)=>{const n=Q(t),i=Q(t);ce(t,tn(Qe(i)<<Qe(n)))},import:(t,e)=>{const n=Q(t);if(n.tag!==fe.STRING)throw new Error("import expects a string operand");const i=e.head;try{let r=n.str;r.endsWith(".fp")||(r=`${r}.fp`);const s=t.io.file.read(r);t.input=s,t.inputPos=0;const o=Wn(t);Il(t,e,o),ce(t,e.head)}catch(r){t.io.std.printError(`Failed to import module "${n.str}"`),r instanceof Error&&t.io.std.printError(r.message)}finally{e.head=i}},"import*":(t,e)=>{const n=Q(t);if(n.tag!==fe.STRING)throw new Error("import* expects a string operand");const i=e.head;try{let r=n.str;r.endsWith(".fp")||(r=`${r}.fp`);const s=t.io.file.read(r);t.input=s,t.inputPos=0;const o=Wn(t);Il(t,e,o)}catch(r){e.head=i,t.io.std.printError(`Failed to import module "${n.str}"`),r instanceof Error&&t.io.std.printError(r.message)}}};function Ib(t,e){const n=xb(),i={input:e,inputPos:0,readStack:[],stack:n,env:{head:n},internedAtoms:[],NIL:n,TRUE:null,QUOTE:null,PUSH:null,POP:null,io:t};i.TRUE=fi(i,"#t"),i.QUOTE=fi(i,"quote"),i.PUSH=fi(i,"push"),i.POP=fi(i,"pop");for(let[r,s]of Object.entries(Lb))Op(i,i.env,r,s);for(let[r,s]of Object.entries(Rb))Op(i,i.env,r,s);return i}function _b(t){const e=Wn(t);try{Il(t,t.env,e)}catch(n){n instanceof Error&&(t.io.std.printError(n.message),t.io.std.printError(n.stack??""))}}function Bb(){const t=kr(),e=xr(t.fileId),n=Zg("(min-width:640px)"),[i,r]=G.useState(!1),[s,o]=G.useState([]);function l(){r(!0),o([`Running "${e.name}"...`]);const c=Ib({std:{readLine:function(){throw new Error("Function not implemented.")},printLine:function(h){o(f=>f.concat(h??""))},printError:function(h){o(f=>f.concat(h??""))}},file:{read:function(h){if(!h.startsWith("./"))throw new Error(`File not found: "${h}"`);const f=Mx(h.slice(2));if(!f)throw new Error(`File not found: "${h}"`);return f}}},e.content);_b(c)}const a=n?"large":"regular";return E.jsxs(Ot,{position:"absolute",top:"48px",right:"24px",zIndex:"10",width:i?"80%":"auto",children:[E.jsxs(pn,{justifyContent:"flex-end",children:[i&&E.jsx("button",{className:mt({kind:"soft",size:a}),onClick:()=>r(!1),children:E.jsx(Rh,{})}),E.jsx("button",{className:mt({kind:"bold",size:a}),onClick:l,children:E.jsx(Lx,{})})]}),i&&E.jsx(Ot,{className:i0(),maxHeight:"36rem",overflowY:"auto",whiteSpace:"pre-wrap",resize:"vertical",children:s.map(u=>E.jsx("div",{children:u}))})]})}function Fb(){return E.jsx("div",{className:gk["editor-container"],children:E.jsx(zb,{})})}function zb(){const t=kr();return E.jsxs(mi,{height:"100%",position:"relative",gridTemplateRows:"auto minmax(0, 1fr)",gridTemplateColumns:"minmax(0,1fr)",children:[E.jsx(yk,{}),E.jsx(Bb,{}),E.jsx(wb,{group:""},t.fileId)]})}const jb={"editor-layout":"_editor-layout_1y235_1"};function Hb(){return E.jsxs("main",{className:jb["editor-layout"],children:[E.jsx(Fb,{}),E.jsx(dk,{})]})}function Vb(){return E.jsx(E.Fragment,{children:E.jsx(Hb,{})})}Za.createRoot(document.getElementById("root")).render(E.jsx(Hc.StrictMode,{children:E.jsx(Vb,{})}));export{eE as $,Sr as A,hr as B,Ae as C,de as D,j as E,I as F,q as G,iE as H,qy as I,yE as J,cE as K,hE as L,et as M,Y as N,Qb as O,Zl as P,vE as Q,Si as R,_t as S,He as T,qb as U,xe as V,ii as W,Gb as X,gE as Y,J2 as Z,xE as _,an as a,tE as a0,Jb as a1,wE as a2,Us as a3,x as a4,Zb as a5,G as a6,E as a7,Sl as a8,Rn as a9,Gk as aA,oc as aB,qt as aa,Ke as ab,yn as ac,Gh as ad,Ws as ae,Ol as af,pE as ag,oE as ah,Yb as ai,f2 as aj,Xo as ak,Vy as al,sE as am,dE as an,fE as ao,Ry as ap,g2 as aq,aE as ar,lE as as,Xb as at,nE as au,Yk as av,ea as aw,Wk as ax,As as ay,hi as az,L as b,js as c,Vh as d,J as e,ae as f,O2 as g,Ky as h,T2 as i,A2 as j,Yt as k,H as l,To as m,ns as n,$b as o,Gu as p,uE as q,on as r,Jt as s,vp as t,X as u,Kb as v,DC as w,zy as x,rE as y,Pt as z};
